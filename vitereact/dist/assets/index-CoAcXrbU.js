import{j as e}from"./ui-B7qXHUM3.js";import{b as As,a as Fe,r}from"./vendor-BKU87Gzz.js";import{u as ye,a as Ns,L as Y,b as ue,c as ce,B as Rs,R as Es,d as le,N as ze}from"./router-DlkNd8jK.js";import{u as Pe,a as ne,b as te,Q as Fs,c as Ts}from"./query-KRJeqgie.js";import{a as F}from"./utils-Da_8HYpj.js";import{E as de,Z as ks,C as Ve,H as Ds,X as _e,I as Bs,T as He,a as zs,b as ie,c as Ae,d as Os,e as qs,S as Ke,U as Ye,f as Oe,P as Us,g as Ws,D as Ge,h as _s,F as Is,i as Vs,A as fe,j as Hs,k as Ks,l as Ys,m as Gs,M as Qs,n as ns,o as ls,p as Zs,q as Xs,r as Js,s as we}from"./icons-DBU3nhah.js";import{R as is,L as et,C as os,X as cs,Y as ds,T as ms,a as xs,b as be,B as st,c as qe}from"./charts-Ccv-F1Ol.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function l(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(o){if(o.ep)return;o.ep=!0;const d=l(o);fetch(o.href,d)}})();var Cs,us=As;Cs=us.createRoot,us.hydrateRoot;const hs=s=>{let n;const l=new Set,a=(y,v)=>{const g=typeof y=="function"?y(n):y;if(!Object.is(g,n)){const c=n;n=v??(typeof g!="object"||g===null)?g:Object.assign({},n,g),l.forEach(k=>k(n,c))}},o=()=>n,b={setState:a,getState:o,getInitialState:()=>C,subscribe:y=>(l.add(y),()=>l.delete(y))},C=n=s(a,o,b);return b},tt=s=>s?hs(s):hs,at=s=>s;function rt(s,n=at){const l=Fe.useSyncExternalStore(s.subscribe,Fe.useCallback(()=>n(s.getState()),[s,n]),Fe.useCallback(()=>n(s.getInitialState()),[s,n]));return Fe.useDebugValue(l),l}const nt=s=>{const n=tt(s),l=a=>rt(n,a);return Object.assign(l,n),l},lt=s=>nt;function it(s,n){let l;try{l=s()}catch{return}return{getItem:o=>{var d;const h=C=>C===null?null:JSON.parse(C,void 0),b=(d=l.getItem(o))!=null?d:null;return b instanceof Promise?b.then(h):h(b)},setItem:(o,d)=>l.setItem(o,JSON.stringify(d,void 0)),removeItem:o=>l.removeItem(o)}}const Qe=s=>n=>{try{const l=s(n);return l instanceof Promise?l:{then(a){return Qe(a)(l)},catch(a){return this}}}catch(l){return{then(a){return this},catch(a){return Qe(a)(l)}}}},ot=(s,n)=>(l,a,o)=>{let d={storage:it(()=>localStorage),partialize:z=>z,version:0,merge:(z,D)=>({...D,...z}),...n},h=!1;const b=new Set,C=new Set;let y=d.storage;if(!y)return s((...z)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),l(...z)},a,o);const v=()=>{const z=d.partialize({...a()});return y.setItem(d.name,{state:z,version:d.version})},g=o.setState;o.setState=(z,D)=>(g(z,D),v());const c=s((...z)=>(l(...z),v()),a,o);o.getInitialState=()=>c;let k;const N=()=>{var z,D;if(!y)return;h=!1,b.forEach(u=>{var j;return u((j=a())!=null?j:c)});const M=((D=d.onRehydrateStorage)==null?void 0:D.call(d,(z=a())!=null?z:c))||void 0;return Qe(y.getItem.bind(y))(d.name).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==d.version){if(d.migrate){const j=d.migrate(u.state,u.version);return j instanceof Promise?j.then(U=>[!0,U]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,u.state];return[!1,void 0]}).then(u=>{var j;const[U,R]=u;if(k=d.merge(R,(j=a())!=null?j:c),l(k,!0),U)return v()}).then(()=>{M==null||M(k,void 0),k=a(),h=!0,C.forEach(u=>u(k))}).catch(u=>{M==null||M(void 0,u)})};return o.persist={setOptions:z=>{d={...d,...z},z.storage&&(y=z.storage)},clearStorage:()=>{y==null||y.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>N(),hasHydrated:()=>h,onHydrate:z=>(b.add(z),()=>{b.delete(z)}),onFinishHydration:z=>(C.add(z),()=>{C.delete(z)})},d.skipHydration||N(),k||c},ct=ot,ps=()=>Math.random().toString(36).substr(2,9),Se=()=>window.location.hostname.includes("launchpulse.ai")||window.location.hostname.includes("trycloudflare.com")?`${window.location.protocol}//${window.location.host}`:"https://123ad-performance.launchpulse.ai",gs=async(s,n=3,l=1e3)=>{var a;for(let o=0;o<n;o++)try{return await s()}catch(d){const h=o===n-1,b=((a=d.response)==null?void 0:a.status)>=500||d.code==="ECONNABORTED"||!d.response;if(h||!b)throw d;console.warn(`Request failed, retrying in ${l}ms... (attempt ${o+1}/${n})`),await new Promise(C=>setTimeout(C,l*(o+1)))}};F.defaults.timeout=45e3;F.defaults.headers.common["Content-Type"]="application/json";F.defaults.headers.common.Accept="application/json";F.defaults.withCredentials=!0;F.defaults.maxRedirects=5;F.defaults.validateStatus=s=>s<400;F.defaults.retry=3;F.defaults.retryDelay=1e3;if(typeof window<"u"){const s=window.navigator.userAgent;(s.includes("HeadlessChrome")||s.includes("PhantomJS")||s.includes("Selenium")||s.includes("Playwright")||s.includes("Puppeteer")||s.includes("Chrome-Lighthouse")||s.includes("jsdom")||window.location.hostname.includes("test")||window.location.search.includes("test=true"))&&(F.defaults.headers.common["X-Automation"]="true",F.defaults.headers.common["X-Test-Mode"]="browser-testing",F.defaults.headers.common["X-Browser-Test"]="true",F.defaults.headers.common["X-Testing-Framework"]="browser-automation",console.log("Browser testing mode detected:",{userAgent:s.substring(0,50),hostname:window.location.hostname,testMode:"active"}))}F.interceptors.request.use(s=>{var l,a;const n=localStorage.getItem("pulsedeck-app-storage");if(n)try{const o=JSON.parse(n),d=(a=(l=o==null?void 0:o.state)==null?void 0:l.authentication_state)==null?void 0:a.auth_token;d&&(s.headers.Authorization=`Bearer ${d}`)}catch(o){console.warn("Failed to parse stored auth token:",o)}return s},s=>Promise.reject(s));F.interceptors.response.use(s=>s,s=>{var n,l,a,o,d;if(console.error("API Error:",{message:s.message,status:(n=s.response)==null?void 0:n.status,statusText:(l=s.response)==null?void 0:l.statusText,data:(a=s.response)==null?void 0:a.data,url:(o=s.config)==null?void 0:o.url,method:(d=s.config)==null?void 0:d.method}),s.response){const{status:h,data:b}=s.response;return h===401?(localStorage.removeItem("pulsedeck-app-storage"),Promise.reject(new Error("Session expired. Please sign in again."))):h===403?Promise.reject(new Error((b==null?void 0:b.message)||"Access denied")):h===429?Promise.reject(new Error("Too many requests. Please wait a moment and try again.")):h>=500?Promise.reject(new Error("Server error. Please try again later.")):h===502?Promise.reject(new Error("Bad Gateway (502) - Server connection failed. The backend server may be down or unreachable.")):h===503?Promise.reject(new Error("Service Unavailable (503) - Server is temporarily down. Please wait a moment and try again.")):h===504?Promise.reject(new Error("Gateway Timeout (504) - Server took too long to respond. This may indicate server overload.")):h===521?Promise.reject(new Error("Web Server Is Down (521) - Cloudflare could not connect to the origin server.")):h===522?Promise.reject(new Error("Connection Timed Out (522) - Cloudflare timed out connecting to the origin server.")):h===523?Promise.reject(new Error("Origin Is Unreachable (523) - Cloudflare could not reach the origin server.")):h===524?Promise.reject(new Error("A Timeout Occurred (524) - Cloudflare was able to complete a TCP connection but did not receive a timely HTTP response.")):Promise.reject(new Error((b==null?void 0:b.message)||`Request failed with status ${h}`))}else return s.request?s.code==="ECONNABORTED"?Promise.reject(new Error("Request timeout. Please try again.")):Promise.reject(new Error("Network error. Please check your connection and try again.")):Promise.reject(new Error(s.message||"An unexpected error occurred"))});const A=lt()(ct((s,n)=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!0},error_message:null},current_workspace:null,date_range_filter:{date_from:null,date_to:null,date_preset:"last_30_days",comparison_mode:null},platform_filter:{selected_platforms:[],selected_accounts:[]},notification_state:{alerts:[],toast_notifications:[]},upload_state:{active_uploads:[],recent_uploads:[]},socket:null,is_connected:!1,login_user:async(l,a)=>{var o,d,h,b,C,y;s(v=>({authentication_state:{...v.authentication_state,authentication_status:{...v.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{await gs(async()=>{const N=await F.get(`${Se()}/api/health`,{timeout:1e4,headers:{"X-Browser-Test":"login-connectivity-check","X-Test-Mode":"pre-login-health-check"}});if(!N.data)throw new Error("API health check returned no data");if(N.data.status!=="healthy"&&!N.data.success)throw new Error(`API health check failed: ${N.data.message||"Unknown error"}`);if(N.data.checks&&N.data.checks.database===!1)throw new Error("Database connection failed during health check");console.log("API connectivity verified:",N.data.status||N.data.message)},3,1500);const v=await gs(async()=>await F.post(`${Se()}/api/auth/login`,{email:l,password:a},{headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:15e3,validateStatus:N=>N<400}),3,1e3),{user:g,token:c,workspace:k}=v.data;if(!g||!c)throw new Error("Invalid response from server");s(()=>({authentication_state:{current_user:g,auth_token:c,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null},current_workspace:k?{id:k.id,name:k.name,role:"owner",created_at:k.created_at}:null})),n().connect_websocket()}catch(v){console.error("Login error:",v);let g="Login failed";(d=(o=v.response)==null?void 0:o.data)!=null&&d.message?g=v.response.data.message:((b=(h=v.response)==null?void 0:h.data)==null?void 0:b.error_code)==="INVALID_CREDENTIALS"?g="Invalid email or password":v.message.includes("Network error")||v.message.includes("timeout")?g="Connection failed. Please check your internet connection and try again.":v.message.includes("Service temporarily unavailable")?g="Service is temporarily unavailable. Please try again in a few moments.":v.message&&(g=v.message),(g.includes("Invalid email or password")||((y=(C=v.response)==null?void 0:C.data)==null?void 0:y.error_code)==="INVALID_CREDENTIALS")&&console.log("Setting invalid credentials error message:",g),setTimeout(()=>{s(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:g}}))},300)}},register_user:async(l,a,o)=>{var d,h;s(b=>({authentication_state:{...b.authentication_state,authentication_status:{...b.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const b=await F.post(`${Se()}/api/auth/register`,{email:l,password:a,name:o},{headers:{"Content-Type":"application/json"}}),{user:C,token:y,workspace:v}=b.data;s(()=>({authentication_state:{current_user:C,auth_token:y,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null},current_workspace:v?{id:v.id,name:v.name,role:"owner",created_at:v.created_at}:null})),n().connect_websocket()}catch(b){const C=((h=(d=b.response)==null?void 0:d.data)==null?void 0:h.message)||b.message||"Registration failed";throw s(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:C}})),new Error(C)}},initialize_auth:async()=>{const{authentication_state:l}=n(),a=l.auth_token;if(!a){s(o=>({authentication_state:{...o.authentication_state,authentication_status:{...o.authentication_state.authentication_status,is_loading:!1}}}));return}try{await F.get(`${Se()}/api/health`,{timeout:8e3,headers:{"X-Browser-Test":"auth-init-check"}});const d=(await F.get(`${Se()}/api/auth/me`,{headers:{Authorization:`Bearer ${a}`},timeout:15e3})).data;if(!d||!d.id)throw new Error("Invalid user data received");s(()=>({authentication_state:{current_user:d,auth_token:a,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),n().connect_websocket()}catch(o){console.warn("Auth initialization failed:",o),s(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null},current_workspace:null}))}},logout_user:()=>{n().disconnect_websocket(),s(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null},current_workspace:null,notification_state:{alerts:[],toast_notifications:[]},upload_state:{active_uploads:[],recent_uploads:[]}}))},clear_auth_error:()=>{s(l=>({authentication_state:{...l.authentication_state,error_message:null}}))},update_user_profile:l=>{s(a=>({authentication_state:{...a.authentication_state,current_user:a.authentication_state.current_user?{...a.authentication_state.current_user,...l}:null}}))},switch_workspace:async l=>{var d,h;const{authentication_state:a}=n(),o=a.auth_token;if(!o)throw new Error("No authentication token available");try{const C=(await F.get(`${Se()}/api/workspaces/${l}`,{headers:{Authorization:`Bearer ${o}`}})).data;return s(()=>({current_workspace:{id:C.id,name:C.name,role:"member",created_at:C.created_at}})),n().disconnect_websocket(),n().connect_websocket(),l}catch(b){const C=((h=(d=b.response)==null?void 0:d.data)==null?void 0:h.message)||b.message||"Failed to switch workspace";throw new Error(C)}},update_workspace_context:l=>{s(()=>({current_workspace:l}))},clear_workspace:()=>{s(()=>({current_workspace:null}))},update_date_range:(l,a,o)=>{s(d=>({date_range_filter:{...d.date_range_filter,date_from:l,date_to:a,date_preset:o||(l&&a?"custom":d.date_range_filter.date_preset)}}))},update_comparison_mode:l=>{s(a=>({date_range_filter:{...a.date_range_filter,comparison_mode:l}}))},update_platform_filter:(l,a=[])=>{s(()=>({platform_filter:{selected_platforms:l,selected_accounts:a}}))},clear_filters:()=>{s(()=>({date_range_filter:{date_from:null,date_to:null,date_preset:"last_30_days",comparison_mode:null},platform_filter:{selected_platforms:[],selected_accounts:[]}}))},add_alert_notification:l=>{const a={...l,id:ps()};s(o=>({notification_state:{...o.notification_state,alerts:[a,...o.notification_state.alerts]}}))},add_toast_notification:l=>{const a={...l,id:ps()};s(o=>({notification_state:{...o.notification_state,toast_notifications:[a,...o.notification_state.toast_notifications]}})),l.auto_dismiss&&setTimeout(()=>{n().remove_toast_notification(a.id)},5e3)},mark_alert_as_read:l=>{s(a=>({notification_state:{...a.notification_state,alerts:a.notification_state.alerts.map(o=>o.id===l?{...o,is_read:!0}:o)}}))},remove_toast_notification:l=>{s(a=>({notification_state:{...a.notification_state,toast_notifications:a.notification_state.toast_notifications.filter(o=>o.id!==l)}}))},clear_all_notifications:()=>{s(()=>({notification_state:{alerts:[],toast_notifications:[]}}))},add_active_upload:l=>{s(a=>({upload_state:{...a.upload_state,active_uploads:[l,...a.upload_state.active_uploads]}}))},update_upload_progress:(l,a,o)=>{s(d=>({upload_state:{...d.upload_state,active_uploads:d.upload_state.active_uploads.map(h=>h.id===l?{...h,progress:a,status:o}:h)}}))},complete_upload:(l,a)=>{const{upload_state:o}=n(),d=o.active_uploads.find(h=>h.id===l);if(d){const h={id:d.id,filename:d.filename,status:a,completed_at:new Date().toISOString()};s(b=>({upload_state:{active_uploads:b.upload_state.active_uploads.filter(C=>C.id!==l),recent_uploads:[h,...b.upload_state.recent_uploads.slice(0,4)]}}))}},remove_active_upload:l=>{s(a=>({upload_state:{...a.upload_state,active_uploads:a.upload_state.active_uploads.filter(o=>o.id!==l)}}))},connect_websocket:()=>{console.log("WebSocket connection disabled - Socket.IO not implemented on backend"),s(()=>({is_connected:!1,socket:null}))},disconnect_websocket:()=>{const{socket:l}=n();l&&(l.disconnect(),s({socket:null,is_connected:!1}))},handle_upload_progress:l=>{const{id:a,progress:o,status:d}=l;d==="completed"||d==="failed"?n().complete_upload(a,d):n().update_upload_progress(a,o,d)},handle_notification:l=>{const{type:a,message:o,auto_dismiss:d=!0}=l;n().add_toast_notification({type:a,message:o,auto_dismiss:d})}}),{name:"pulsedeck-app-storage",partialize:s=>({authentication_state:{current_user:s.authentication_state.current_user,auth_token:s.authentication_state.auth_token,authentication_status:{is_authenticated:s.authentication_state.authentication_status.is_authenticated,is_loading:!1},error_message:null},current_workspace:s.current_workspace,date_range_filter:s.date_range_filter,platform_filter:s.platform_filter})})),dt=()=>{const[s,n]=r.useState(!1),[l,a]=r.useState(!1),[o,d]=r.useState(!1),[h,b]=r.useState(!1),[C,y]=r.useState(!1),v=A(p=>p.authentication_state.current_user),g=A(p=>p.authentication_state.auth_token),c=A(p=>p.current_workspace),k=A(p=>p.date_range_filter),N=A(p=>p.platform_filter),z=A(p=>p.logout_user),D=A(p=>p.switch_workspace),M=A(p=>p.update_date_range),u=A(p=>p.update_comparison_mode),j=A(p=>p.update_platform_filter),U=Pe(),R=ye(),J=Ns(),q="https://123ad-performance.launchpulse.ai",{data:W=[],isLoading:Z}=ne({queryKey:["workspaces"],queryFn:async()=>(await F.get(`${q}/api/workspaces`,{headers:{Authorization:`Bearer ${g}`}})).data,enabled:!!g,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:G,refetch:B}=ne({queryKey:["notifications",c==null?void 0:c.id],queryFn:async()=>{if(!(c!=null&&c.id))throw new Error("No workspace selected");return(await F.get(`${q}/api/workspaces/${c.id}/notifications`,{headers:{Authorization:`Bearer ${g}`},params:{limit:5,sort_by:"created_at",sort_order:"desc"}})).data},enabled:!!g&&!!(c!=null&&c.id),staleTime:3e4,refetchOnWindowFocus:!1,retry:1}),x=te({mutationFn:async p=>{console.log("[Workspace Switch] Starting switch to:",p);const m=await D(p);return console.log("[Workspace Switch] Store updated successfully"),m||p},onSuccess:p=>{console.log("[Workspace Switch] onSuccess called with:",p),a(!1),U.invalidateQueries({queryKey:["notifications"]});const m=J.pathname;console.log("[Workspace Switch] Current path:",m);const E=m.split("/").filter(Boolean);let X;E.length>=2&&E[0]==="w"?(E[1]=p,X="/"+E.join("/")):X=`/w/${p}`,console.log("[Workspace Switch] Navigating to:",X),R(X,{replace:!0}),console.log("[Workspace Switch] Navigate called, new location:",window.location.pathname)},onError:p=>{console.error("[Workspace Switch] Failed to switch workspace:",p),a(!1)}}),T=te({mutationFn:async({notificationId:p})=>{if(!(c!=null&&c.id))throw new Error("No workspace selected");await F.put(`${q}/api/workspaces/${c.id}/notifications/${p}`,{is_read:!0,read_at:new Date().toISOString()},{headers:{Authorization:`Bearer ${g}`}})},onSuccess:()=>{B()}}),O=(G==null?void 0:G.data.filter(p=>!p.is_read).length)||0,K=(G==null?void 0:G.data)||[],H=[{label:"Today",value:"today"},{label:"Yesterday",value:"yesterday"},{label:"Last 7 days",value:"last_7_days"},{label:"Last 30 days",value:"last_30_days"},{label:"Last 90 days",value:"last_90_days"},{label:"Month to date",value:"mtd"},{label:"Quarter to date",value:"qtd"},{label:"Year to date",value:"ytd"}],ee=[{id:"tiktok",name:"TikTok",color:"bg-black text-white"},{id:"facebook",name:"Meta",color:"bg-blue-600 text-white"},{id:"snapchat",name:"Snapchat",color:"bg-yellow-400 text-black"}],f=p=>{x.mutate(p)},$=p=>{var m;(m=K.find(E=>E.id===p))!=null&&m.is_read||T.mutate({notificationId:p})},P=p=>{const m=new Date;let E=null,X=null;switch(p){case"today":E=X=m.toISOString().split("T")[0];break;case"yesterday":{const re=new Date(m);re.setDate(re.getDate()-1),E=X=re.toISOString().split("T")[0];break}case"last_7_days":{const re=new Date(m);re.setDate(re.getDate()-7),E=re.toISOString().split("T")[0],X=m.toISOString().split("T")[0];break}case"last_30_days":{const re=new Date(m);re.setDate(re.getDate()-30),E=re.toISOString().split("T")[0],X=m.toISOString().split("T")[0];break}case"last_90_days":{const re=new Date(m);re.setDate(re.getDate()-90),E=re.toISOString().split("T")[0],X=m.toISOString().split("T")[0];break}}M(E,X,p),b(!1)},Q=p=>{const m=N.selected_platforms,E=m.includes(p)?m.filter(X=>X!==p):[...m,p];j(E,N.selected_accounts)},t=()=>{z(),n(!1)};r.useEffect(()=>{const p=()=>{n(!1),a(!1),d(!1),b(!1),y(!1)};return document.addEventListener("click",p),()=>document.removeEventListener("click",p)},[]);const i=p=>p.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2),L=()=>{if(k.date_preset&&k.date_preset!=="custom"){const p=H.find(m=>m.value===k.date_preset);return(p==null?void 0:p.label)||"Last 30 days"}return k.date_from&&k.date_to?`${k.date_from} - ${k.date_to}`:"Last 30 days"};return e.jsx(e.Fragment,{children:e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Y,{to:c?`/w/${c.id}`:"/",className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"PD"})}),e.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900 hidden sm:block",children:"PulseDeck"})]}),e.jsxs("div",{className:"relative",onClick:p=>p.stopPropagation(),children:[e.jsxs("button",{onClick:()=>a(!l),className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",disabled:Z,children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium",children:(c==null?void 0:c.name.charAt(0).toUpperCase())||"W"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 hidden md:block",children:(c==null?void 0:c.name)||"Select Workspace"}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Switch Workspace"})}),Z?e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"animate-pulse flex space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded flex-1"})]})}):W.map(p=>e.jsxs("button",{onClick:()=>f(p.workspace.id),className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium",children:p.workspace.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.workspace.name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:p.membership.role})]}),(c==null?void 0:c.id)===p.workspace.id&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},p.workspace.id)),e.jsx("div",{className:"border-t border-gray-200 mt-2 pt-2",children:e.jsxs(Y,{to:"/w/new",className:"flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 transition-colors text-blue-600",onClick:()=>a(!1),children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{className:"text-sm font-medium",children:"Create New Workspace"})]})})]})]})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",onClick:p=>p.stopPropagation(),children:[e.jsxs("button",{onClick:()=>b(!h),className:"flex items-center space-x-2 px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-700",children:L()}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h&&e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Date Range"})}),H.map(p=>e.jsx("button",{onClick:()=>P(p.value),className:`w-full text-left px-4 py-2 hover:bg-gray-50 transition-colors ${k.date_preset===p.value?"bg-blue-50 text-blue-700":"text-gray-700"}`,children:e.jsx("span",{className:"text-sm",children:p.label})},p.value)),e.jsxs("div",{className:"border-t border-gray-200 mt-2 pt-2 px-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"Compare to:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"comparison",checked:k.comparison_mode==="vs_previous_period",onChange:()=>u("vs_previous_period"),className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:"Previous period"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"comparison",checked:k.comparison_mode==="vs_same_period_last_year",onChange:()=>u("vs_same_period_last_year"),className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:"Same period last year"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"comparison",checked:!k.comparison_mode,onChange:()=>u(null),className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:"No comparison"})]})]})]})]})]}),e.jsxs("div",{className:"relative",onClick:p=>p.stopPropagation(),children:[e.jsxs("button",{onClick:()=>y(!C),className:"flex items-center space-x-2 px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex -space-x-1",children:N.selected_platforms.length>0?N.selected_platforms.slice(0,3).map(p=>{const m=ee.find(E=>E.id===p);return e.jsx("div",{className:`w-5 h-5 rounded-full ${(m==null?void 0:m.color)||"bg-gray-400"} flex items-center justify-center text-xs font-medium border-2 border-white`,children:m==null?void 0:m.name.charAt(0)},p)}):e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),e.jsx("span",{className:"text-sm text-gray-700",children:N.selected_platforms.length>0?`${N.selected_platforms.length} platform${N.selected_platforms.length>1?"s":""}`:"All platforms"}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),C&&e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Platforms"})}),ee.map(p=>e.jsxs("button",{onClick:()=>Q(p.id),className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:`w-5 h-5 rounded-full ${p.color} flex items-center justify-center text-xs font-medium`,children:p.name.charAt(0)}),e.jsx("span",{className:"flex-1 text-left text-sm text-gray-700",children:p.name}),N.selected_platforms.includes(p.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},p.id))]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",onClick:p=>p.stopPropagation(),children:[e.jsxs("button",{onClick:()=>d(!o),className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),O>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:O>9?"9+":O})]}),o&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Notifications"}),e.jsx(Y,{to:c?`/w/${c.id}/alerts`:"/alerts",className:"text-xs text-blue-600 hover:text-blue-700",onClick:()=>d(!1),children:"View all"})]}),K.length===0?e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e.jsx("p",{className:"text-sm text-gray-500",children:"No notifications"})]}):K.map(p=>e.jsx("button",{onClick:()=>$(p.id),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors border-l-4 ${p.is_read?"border-transparent":p.priority==="urgent"?"border-red-500":p.priority==="high"?"border-orange-500":"border-blue-500"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${p.is_read?"bg-gray-300":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm ${p.is_read?"text-gray-600":"text-gray-900 font-medium"}`,children:p.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:p.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(p.created_at).toLocaleDateString()})]})]})},p.id))]})]}),e.jsxs("div",{className:"relative",onClick:p=>p.stopPropagation(),children:[e.jsxs("button",{onClick:()=>n(!s),className:"flex items-center space-x-2 p-1 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:v?i(v.name):"U"})}),e.jsx("svg",{className:"w-4 h-4 text-gray-500 hidden sm:block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:v==null?void 0:v.name}),e.jsx("p",{className:"text-xs text-gray-500",children:v==null?void 0:v.email}),c&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c.name," â€¢ ",c.role]})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs(Y,{to:c?`/w/${c.id}/settings`:"/settings",className:"flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 transition-colors text-gray-700",onClick:()=>n(!1),children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{className:"text-sm",children:"Profile Settings"})]}),e.jsxs(Y,{to:c?`/w/${c.id}/settings`:"/settings",className:"flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 transition-colors text-gray-700",onClick:()=>n(!1),children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"text-sm",children:"Workspace Settings"})]}),e.jsxs("a",{href:"#",className:"flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 transition-colors text-gray-700",onClick:p=>{p.preventDefault(),n(!1)},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm",children:"Help & Documentation"})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-1",children:e.jsxs("button",{onClick:t,className:"flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 transition-colors text-red-600 w-full text-left",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{className:"text-sm",children:"Sign out"})]})})]})]})]})]}),e.jsxs("div",{className:"lg:hidden border-t border-gray-200 px-4 py-3 space-y-3",children:[e.jsx("div",{className:"relative",onClick:p=>p.stopPropagation(),children:e.jsxs("button",{onClick:()=>b(!h),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-700",children:L()})]}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),e.jsx("div",{className:"relative",onClick:p=>p.stopPropagation(),children:e.jsxs("button",{onClick:()=>y(!C),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex -space-x-1",children:N.selected_platforms.length>0?N.selected_platforms.slice(0,3).map(p=>{const m=ee.find(E=>E.id===p);return e.jsx("div",{className:`w-5 h-5 rounded-full ${(m==null?void 0:m.color)||"bg-gray-400"} flex items-center justify-center text-xs font-medium border-2 border-white`,children:m==null?void 0:m.name.charAt(0)},p)}):e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),e.jsx("span",{className:"text-sm text-gray-700",children:N.selected_platforms.length>0?`${N.selected_platforms.length} platform${N.selected_platforms.length>1?"s":""}`:"All platforms"})]}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]})]})})};function mt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const Ss=r.forwardRef(mt);function xt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const fs=r.forwardRef(xt);function ut({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const ht=r.forwardRef(ut);function pt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const Ls=r.forwardRef(pt);function gt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"}))}const ft=r.forwardRef(gt);function bt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const yt=r.forwardRef(bt);function jt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const $s=r.forwardRef(jt);function vt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const wt=r.forwardRef(vt);function Nt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const kt=r.forwardRef(Nt);function _t({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Me=r.forwardRef(_t);function Ct({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Ne=r.forwardRef(Ct);function St({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Lt=r.forwardRef(St);function $t({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const Mt=r.forwardRef($t);function Pt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const At=r.forwardRef(Pt);function Rt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const Et=r.forwardRef(Rt);function Ft({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Tt=r.forwardRef(Ft);function Dt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Bt=r.forwardRef(Dt);function zt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Ms=r.forwardRef(zt);function Ot({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Te=r.forwardRef(Ot);function qt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const bs=r.forwardRef(qt);function Ut({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ys=r.forwardRef(Ut);function Wt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const It=r.forwardRef(Wt);function Vt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const Ht=r.forwardRef(Vt);function Kt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const Yt=r.forwardRef(Kt);function Gt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Qt=r.forwardRef(Gt);function Zt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const js=r.forwardRef(Zt);function Xt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const Ue=r.forwardRef(Xt);function Jt({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const ea=r.forwardRef(Jt);function sa({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const ta=r.forwardRef(sa);function aa({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const ra=r.forwardRef(aa);function na({title:s,titleId:n,...l},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},l),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ge=r.forwardRef(na),la=()=>{var M;const[s,n]=r.useState(!1),[l,a]=r.useState(!1),[o,d]=r.useState(!1),h=Ns(),{workspace_id:b}=ue(),C=A(u=>u.current_workspace),y=A(u=>u.authentication_state.auth_token),g=(()=>{const u=h.pathname;return u.includes("/channels")?"channels":u.includes("/campaigns")?"campaigns":u.includes("/creatives")?"creatives":u.includes("/uploads")||u.includes("/upload")?"uploads":u.includes("/alerts")?"alerts":u.includes("/settings")?"settings":"overview"})(),{data:c}=ne({queryKey:["alertCount",b],queryFn:async()=>{if(!b||!y)throw new Error("Missing workspace or auth token");return(await F.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${b}/alert-triggers`,{params:{is_resolved:"false",limit:1},headers:{Authorization:`Bearer ${y}`}})).data},enabled:!!b&&!!y,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),k=((M=c==null?void 0:c.pagination)==null?void 0:M.total)||0,N=[{name:"Overview",href:`/w/${b}`,icon:It,active:g==="overview",description:"Dashboard and KPI overview"},{name:"Channels",href:`/w/${b}/channels`,icon:Me,active:g==="channels",description:"Cross-platform comparison"},{name:"Campaigns",href:`/w/${b}/campaigns`,icon:Yt,active:g==="campaigns",description:"Campaign management"},{name:"Creatives",href:`/w/${b}/creatives`,icon:Qt,active:g==="creatives",description:"Creative performance"},{name:"Uploads",href:`/w/${b}/uploads`,icon:ht,active:g==="uploads",description:"Data upload management"},{name:"Alerts",href:`/w/${b}/alerts`,icon:$s,active:g==="alerts",description:"Alert rules and notifications",badge:k>0?k:null},{name:"Settings",href:`/w/${b}/settings`,icon:Bt,active:g==="settings",description:"Workspace and user settings"}],z=()=>{n(!s)},D=()=>{d(!o)};return r.useEffect(()=>{d(!1)},[h.pathname]),r.useEffect(()=>{const u=()=>{l&&a(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[l]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:D,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors","aria-label":"Toggle navigation menu",children:o?e.jsx(ge,{className:"h-6 w-6"}):e.jsx(yt,{className:"h-6 w-6"})})}),o&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:D}),e.jsxs("div",{className:`hidden lg:flex lg:flex-col lg:fixed lg:inset-y-0 lg:z-50 bg-white border-r border-gray-200 transition-all duration-300 ${s?"lg:w-16":"lg:w-60"}`,children:[e.jsx("div",{className:"flex items-center px-4 py-4 border-b border-gray-200",children:e.jsxs(Y,{to:`/w/${b}`,className:"flex items-center space-x-3 text-gray-900 hover:text-blue-600 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"P"})}),!s&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-bold",children:"PulseDeck"}),C&&e.jsx("span",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:C.name})]})]})}),e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:N.map(u=>{const j=u.icon;return e.jsxs(Y,{to:u.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${u.active?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,title:s?u.description:void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:`flex-shrink-0 h-5 w-5 ${u.active?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`}),u.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:u.badge>99?"99+":u.badge})]}),!s&&e.jsxs("div",{className:"ml-3 flex items-center justify-between w-full",children:[e.jsx("span",{children:u.name}),u.badge&&e.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full",children:u.badge>99?"99+":u.badge})]})]},u.name)})}),e.jsx("div",{className:"px-2 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>a(!l),className:`group flex items-center w-full px-2 py-2 text-sm font-medium rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors ${s?"justify-center":""}`,title:s?"Help & Support":void 0,children:[e.jsx(Ue,{className:"flex-shrink-0 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),!s&&e.jsx("span",{className:"ml-3",children:"Help & Support"})]}),l&&!s&&e.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white border border-gray-200 rounded-md shadow-lg py-1",children:[e.jsx("a",{href:"https://docs.pulsedeck.com",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Documentation"}),e.jsx("a",{href:"mailto:support@pulsedeck.com",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Contact Support"}),e.jsx("a",{href:"https://feedback.pulsedeck.com",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Feature Request"})]})]})}),e.jsx("div",{className:"px-2 pb-4",children:e.jsx("button",{onClick:z,className:"group flex items-center w-full px-2 py-2 text-sm font-medium rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors","aria-label":s?"Expand sidebar":"Collapse sidebar",children:s?e.jsx(At,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-500"}):e.jsxs(e.Fragment,{children:[e.jsx(Mt,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-500"}),e.jsx("span",{className:"ml-3",children:"Collapse"})]})})})]}),e.jsxs("div",{className:`lg:hidden fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ${o?"translate-x-0":"-translate-x-full"}`,children:[e.jsx("div",{className:"flex items-center px-4 py-4 border-b border-gray-200",children:e.jsxs(Y,{to:`/w/${b}`,className:"flex items-center space-x-3 text-gray-900",onClick:D,children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"P"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-bold",children:"PulseDeck"}),C&&e.jsx("span",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:C.name})]})]})}),e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:N.map(u=>{const j=u.icon;return e.jsxs(Y,{to:u.href,onClick:D,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${u.active?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:`flex-shrink-0 h-5 w-5 ${u.active?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`}),u.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:u.badge>99?"99+":u.badge})]}),e.jsxs("div",{className:"ml-3 flex items-center justify-between w-full",children:[e.jsx("span",{children:u.name}),u.badge&&e.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full",children:u.badge>99?"99+":u.badge})]})]},u.name)})}),e.jsxs("div",{className:"px-2 py-4 border-t border-gray-200 space-y-1",children:[e.jsxs("a",{href:"https://docs.pulsedeck.com",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:[e.jsx(Ue,{className:"flex-shrink-0 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),e.jsx("span",{className:"ml-3",children:"Documentation"})]}),e.jsxs("a",{href:"mailto:support@pulsedeck.com",className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:[e.jsx(Ue,{className:"flex-shrink-0 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),e.jsx("span",{className:"ml-3",children:"Contact Support"})]})]})]}),e.jsx("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-40",children:e.jsx("div",{className:"grid grid-cols-4 gap-1 px-2 py-2",children:N.slice(0,4).map(u=>{const j=u.icon;return e.jsxs(Y,{to:u.href,className:`flex flex-col items-center p-2 text-xs font-medium rounded-md transition-colors ${u.active?"text-blue-700 bg-blue-50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:`h-5 w-5 ${u.active?"text-blue-500":"text-gray-400"}`}),u.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:u.badge>9?"9+":u.badge})]}),e.jsx("span",{className:"mt-1 truncate",children:u.name})]},u.name)})})}),e.jsx("div",{className:"sm:hidden h-16"})]})},Ps=()=>{const s=A(y=>y.authentication_state.authentication_status.is_authenticated),n=A(y=>y.authentication_state.auth_token),[l,a]=r.useState({status:"unknown",last_check:"",response_time:0}),[o]=r.useState({version:"1.0.0",build:"development",release_date:"2024-01-15"}),{data:d}=ne({queryKey:["api-status-check"],queryFn:async()=>{var v;const y=performance.now();try{const g=await F.get("https://123ad-performance.launchpulse.ai/api/auth/me",{headers:n?{Authorization:`Bearer ${n}`}:{},timeout:1e4}),c=performance.now()-y;return{status:g.status===200?"operational":"degraded",response_time:Math.round(c),last_check:new Date().toISOString()}}catch(g){const c=performance.now()-y;return F.isAxiosError(g)&&((v=g.response)==null?void 0:v.status)===401&&!n?{status:"operational",response_time:Math.round(c),last_check:new Date().toISOString()}:{status:"degraded",response_time:Math.round(c),last_check:new Date().toISOString()}}},refetchInterval:5*60*1e3,staleTime:4*60*1e3,retry:1,refetchOnWindowFocus:!1});r.useEffect(()=>{d&&a(d)},[d]);const h=y=>{window.open(y,"_blank","noopener,noreferrer")},C=(()=>{switch(l.status){case"operational":return{color:"text-green-600",bgColor:"bg-green-100",dotColor:"bg-green-600",text:"Operational"};case"degraded":return{color:"text-yellow-600",bgColor:"bg-yellow-100",dotColor:"bg-yellow-600",text:"Degraded"};default:return{color:"text-gray-600",bgColor:"bg-gray-100",dotColor:"bg-gray-600",text:"Unknown"}}})();return e.jsx(e.Fragment,{children:e.jsx("footer",{className:"bg-white border-t border-gray-200 mt-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Support"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://docs.pulsedeck.com"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Help Center",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("mailto:support@pulsedeck.com"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Contact Support",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://feedback.pulsedeck.com"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Feature Requests",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://status.pulsedeck.com"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["System Status",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Legal"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://pulsedeck.com/privacy"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Privacy Policy",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://pulsedeck.com/terms"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Terms of Service",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://pulsedeck.com/cookies"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Cookie Policy",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://pulsedeck.com/gdpr"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["GDPR Information",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Application"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ks,{className:"h-4 w-4 mr-2 text-blue-600"}),e.jsxs("span",{children:["Version ",o.version]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsxs("span",{children:["Released ",o.release_date]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${C.dotColor}`}),e.jsxs("span",{className:C.color,children:["API ",C.text]})]}),l.response_time>0&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Response: ",l.response_time,"ms"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Resources"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://docs.pulsedeck.com/api"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["API Documentation",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://community.pulsedeck.com"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Community Forum",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://github.com/pulsedeck"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Developer Resources",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>h("https://twitter.com/pulsedeck"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Follow Updates",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:"Â© 2024 PulseDeck Analytics."}),e.jsx("span",{className:"hidden sm:inline",children:"All rights reserved."}),e.jsx(Ds,{className:"h-4 w-4 text-red-500 ml-1"})]}),s&&e.jsxs("div",{className:"text-xs text-gray-500 space-x-3",children:[e.jsxs("span",{children:["Build: ",o.build]}),l.last_check&&e.jsxs("span",{children:["Last health check: ",new Date(l.last_check).toLocaleTimeString()]})]})]})})]})})})},ia=()=>{const s=A(c=>c.notification_state.toast_notifications),n=A(c=>c.notification_state.alerts),l=A(c=>c.upload_state.active_uploads),a=A(c=>c.current_workspace),o=A(c=>c.authentication_state.auth_token),d=A(c=>c.remove_toast_notification),h=A(c=>c.mark_alert_as_read),b=te({mutationFn:async({workspaceId:c,notificationId:k})=>(await F.put(`https://123ad-performance.launchpulse.ai/api/workspaces/${c}/notifications/${k}`,{is_read:!0,read_at:new Date().toISOString()},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}})).data});r.useEffect(()=>{s.forEach(c=>{if(c.auto_dismiss){const N=setTimeout(()=>{d(c.id)},5e3);return()=>clearTimeout(N)}})},[s,d]);const C=r.useCallback(c=>{d(c)},[d]),y=r.useCallback(async c=>{if(h(c),a!=null&&a.id)try{await b.mutateAsync({workspaceId:a.id,notificationId:c})}catch(k){console.error("Failed to mark notification as read:",k)}},[h,a,b]),v=(c,k)=>{const N="h-5 w-5";switch(c){case"success":return e.jsx(ie,{className:`${N} text-green-500`});case"error":return e.jsx(zs,{className:`${N} text-red-500`});case"warning":return e.jsx(He,{className:`${N} text-yellow-500`});case"alert":return e.jsx(He,{className:`${N} text-blue-500`});default:return e.jsx(Bs,{className:`${N} text-blue-500`})}},g=(c,k)=>{switch(c){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"alert":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm w-full",children:s.map(c=>e.jsx("div",{className:`
              transform transition-all duration-300 ease-in-out
              bg-white rounded-lg shadow-lg border-l-4 p-4
              ${c.type==="success"?"border-l-green-500":""}
              ${c.type==="error"?"border-l-red-500":""}
              ${c.type==="warning"?"border-l-yellow-500":""}
              ${c.type==="info"?"border-l-blue-500":""}
              animate-slide-in-right
            `,role:"alert","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:v(c.type)}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:c.message})}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:e.jsx("button",{onClick:()=>C(c.id),className:"rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Dismiss notification",children:e.jsx(_e,{className:"h-4 w-4"})})})]})},c.id))}),n.filter(c=>!c.is_read).length>0&&e.jsx("div",{className:"fixed top-16 left-0 right-0 z-40",children:n.filter(c=>!c.is_read).slice(0,3).map(c=>e.jsx("div",{className:`
                  ${g(c.type)} 
                  border-b px-4 py-3 sm:px-6 lg:px-8
                `,role:"alert","aria-live":"assertive",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:v(c.type)}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium",children:c.message})})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>y(c.id),className:"rounded-md inline-flex text-current hover:text-opacity-75 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current","aria-label":"Dismiss alert",children:e.jsx(_e,{className:"h-4 w-4"})})})]})},c.id))}),l.length>0&&e.jsx("div",{className:"fixed top-4 right-4 z-40 space-y-2 max-w-sm w-full",style:{marginTop:`${s.length*80+16}px`},children:l.map(c=>e.jsx("div",{className:"bg-white rounded-lg shadow-lg border p-4 animate-slide-in-right",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Processing ",c.platform," data"]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:c.filename}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:c.status}),e.jsxs("span",{children:[c.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300 ease-out",style:{width:`${c.progress}%`}})})]})]})]})},c.id))}),e.jsx("style",{children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
      `})]})},oa=()=>{const s=ye(),n=A(y=>y.authentication_state.auth_token),[l,a]=r.useState(null),o=[{name:"Sarah Chen",company:"Growth Marketing Agency",testimonial:"PulseDeck reduced our reporting time from hours to minutes. The cross-platform insights are game-changing.",avatar_url:"https://picsum.photos/64/64?random=1"},{name:"Marcus Johnson",company:"E-commerce Startup",testimonial:"Finally, a tool that gives us unified analytics across TikTok, Meta, and Snapchat. ROI visibility has never been clearer.",avatar_url:"https://picsum.photos/64/64?random=2"},{name:"Emily Rodriguez",company:"Digital Agency",testimonial:"The automated insights save us so much time. We can focus on optimization instead of data compilation.",avatar_url:"https://picsum.photos/64/64?random=3"}],d=[{name:"TikTok",logo_url:"https://picsum.photos/80/80?random=tiktok",description:"TikTok Ads Manager"},{name:"Meta",logo_url:"https://picsum.photos/80/80?random=meta",description:"Facebook & Instagram Ads"},{name:"Snapchat",logo_url:"https://picsum.photos/80/80?random=snapchat",description:"Snapchat Ads Manager"}],h=te({mutationFn:async()=>(await F.post("https://123ad-performance.launchpulse.ai/api/workspaces",{name:"Demo Workspace",default_currency:"USD",timezone:"UTC",data_retention_days:730},{headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`}}})).data,onSuccess:y=>{a(null),s(`/w/${y.workspace.id}`)},onError:y=>{var g,c;const v=((c=(g=y.response)==null?void 0:g.data)==null?void 0:c.message)||y.message||"Failed to create demo workspace";a(v)}}),b=()=>{a(null),h.mutate()},C=()=>{a(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative bg-gradient-to-br from-blue-50 to-indigo-100 overflow-hidden",children:[e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"relative z-10 pb-8 bg-gradient-to-br from-blue-50 to-indigo-100 sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32",children:e.jsx("div",{className:"mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28",children:e.jsxs("div",{className:"sm:text-center lg:text-left",children:[e.jsxs("h1",{className:"text-4xl tracking-tight font-bold text-gray-900 sm:text-5xl md:text-6xl",children:[e.jsx("span",{className:"block xl:inline",children:"Cross-platform ad"}),e.jsx("span",{className:"block text-blue-600 xl:inline",children:" analytics made simple"})]}),e.jsx("p",{className:"mt-3 text-base text-gray-600 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0 leading-relaxed",children:"Get unified analytics across TikTok, Meta, and Snapchat in under 60 seconds. Automated insights, cross-platform comparison, and proactive alerts â€“ all in one dashboard."}),e.jsxs("div",{className:"mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start",children:[e.jsx("div",{className:"rounded-md shadow",children:e.jsx(Y,{to:"/signup",className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-all duration-200 md:py-4 md:text-lg md:px-10 shadow-lg hover:shadow-xl",children:"Start Free Today"})}),e.jsx("div",{className:"mt-3 sm:mt-0 sm:ml-3",children:e.jsx("button",{onClick:b,disabled:h.isPending,className:"w-full flex items-center justify-center px-8 py-3 border border-gray-300 text-base font-medium rounded-lg text-gray-900 bg-white hover:bg-gray-50 transition-all duration-200 md:py-4 md:text-lg md:px-10 disabled:opacity-50 disabled:cursor-not-allowed",children:h.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating demo..."]}):"View Live Demo"})})]}),l&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm",children:l}),e.jsx("button",{onClick:C,className:"ml-2 text-red-500 hover:text-red-700",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"mt-6 text-sm text-gray-500 sm:text-center lg:text-left",children:["Already have an account?",e.jsx(Y,{to:"/signin",className:"ml-1 text-blue-600 hover:text-blue-500 font-medium",children:"Sign in"})]})]})})})}),e.jsx("div",{className:"lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2",children:e.jsx("div",{className:"h-56 w-full bg-gray-100 sm:h-72 md:h-96 lg:w-full lg:h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-32 h-32 bg-blue-600 rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("svg",{className:"w-16 h-16 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Dashboard Preview"})]})})})]}),e.jsx("div",{className:"py-12 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"lg:text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 sm:text-4xl",children:"Everything you need to optimize cross-platform campaigns"}),e.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-600 lg:mx-auto leading-relaxed",children:"Stop switching between platforms. Get unified analytics, automated insights, and proactive alerts in one place."})]}),e.jsx("div",{className:"mt-10",children:e.jsxs("dl",{className:"space-y-10 md:space-y-0 md:grid md:grid-cols-3 md:gap-x-8 md:gap-y-10",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("dt",{children:[e.jsx("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-lg bg-blue-600 text-white",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("p",{className:"ml-16 text-lg leading-6 font-medium text-gray-900",children:"Unified Analytics"})]}),e.jsx("dd",{className:"mt-2 ml-16 text-base text-gray-600",children:"Connect TikTok, Meta, and Snapchat data in one dashboard. No more manual exports or spreadsheet juggling."})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("dt",{children:[e.jsx("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-lg bg-blue-600 text-white",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("p",{className:"ml-16 text-lg leading-6 font-medium text-gray-900",children:"Automated Insights"})]}),e.jsx("dd",{className:"mt-2 ml-16 text-base text-gray-600",children:"AI-powered insights highlight performance anomalies, optimization opportunities, and winning creative patterns."})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("dt",{children:[e.jsx("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-lg bg-blue-600 text-white",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"ml-16 text-lg leading-6 font-medium text-gray-900",children:"Time Savings"})]}),e.jsx("dd",{className:"mt-2 ml-16 text-base text-gray-600",children:"From upload to insights in under 60 seconds. Spend time optimizing campaigns, not compiling reports."})]})]})})]})}),e.jsx("div",{className:"py-12 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"lg:text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 sm:text-4xl",children:"Seamless platform integration"}),e.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-600 lg:mx-auto leading-relaxed",children:"Simply export your campaign data and upload to PulseDeck. We handle the rest."})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-3",children:d.map((y,v)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{className:"h-20 w-20 rounded-xl shadow-lg",src:y.logo_url,alt:y.name})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:y.name}),e.jsx("p",{className:"mt-2 text-base text-gray-600",children:y.description}),v<d.length-1&&e.jsx("div",{className:"hidden sm:block mt-6",children:e.jsx("svg",{className:"mx-auto h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})})]},y.name))}),e.jsx("div",{className:"mt-10 text-center",children:e.jsxs("div",{className:"inline-flex items-center px-6 py-3 bg-blue-600 rounded-lg",children:[e.jsx("svg",{className:"h-8 w-8 text-white mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("span",{className:"text-white font-medium text-lg",children:"PulseDeck Dashboard"})]})})]})]})}),e.jsx("div",{className:"py-12 bg-white","data-testid":"social-proof-section",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"lg:text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 sm:text-4xl","data-testid":"social-proof-heading",children:"Trusted by marketing teams worldwide"}),e.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-600 lg:mx-auto leading-relaxed",children:"Join hundreds of marketers who have transformed their cross-platform analytics workflow."})]}),e.jsx("div",{className:"mt-10","data-testid":"testimonials-container",children:e.jsx("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:o.map((y,v)=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 shadow-lg border border-gray-100","data-testid":`testimonial-${v}`,children:[e.jsxs("p",{className:"text-gray-900 leading-relaxed","data-testid":`testimonial-quote-${v}`,children:['"',y.testimonial,'"']}),e.jsxs("div",{className:"mt-6 flex items-center",children:[e.jsx("img",{className:"h-12 w-12 rounded-full",src:y.avatar_url,alt:y.name,"data-testid":`testimonial-avatar-${v}`}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900","data-testid":`testimonial-name-${v}`,children:y.name}),e.jsx("p",{className:"text-sm text-gray-600","data-testid":`testimonial-company-${v}`,children:y.company})]})]})]},y.name))})}),e.jsx("div",{className:"mt-10 text-center","data-testid":"social-proof-stats",children:e.jsxs("div",{className:"flex justify-center items-center space-x-8",children:[e.jsxs("div",{className:"text-center","data-testid":"stat-active-users",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"500+"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active Users"})]}),e.jsxs("div",{className:"text-center","data-testid":"stat-ad-spend",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"10M+"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ad Spend Analyzed"})]}),e.jsxs("div",{className:"text-center","data-testid":"stat-uptime",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"99.9%"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Uptime"})]})]})})]})}),e.jsx("div",{className:"bg-blue-600",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16 px-4 sm:py-20 sm:px-6 lg:px-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white sm:text-4xl",children:[e.jsx("span",{className:"block",children:"Ready to transform your"}),e.jsx("span",{className:"block",children:"ad analytics workflow?"})]}),e.jsx("p",{className:"mt-4 text-lg leading-6 text-blue-200",children:"Start free today. No credit card required. Set up in under 5 minutes."}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Y,{to:"/signup",className:"inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-lg text-blue-600 bg-white hover:bg-gray-50 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Get Started Free"}),e.jsx("button",{onClick:b,disabled:h.isPending,className:"inline-flex items-center justify-center px-8 py-3 border border-white text-base font-medium rounded-lg text-white bg-transparent hover:bg-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:h.isPending?"Creating demo...":"Try Live Demo"})]})]})}),e.jsx("div",{className:"py-12 bg-gray-50",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"lg:text-center",children:e.jsx("h2",{className:"text-3xl font-bold text-gray-900 sm:text-4xl",children:"Frequently asked questions"})}),e.jsxs("div",{className:"mt-10 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"How secure is my campaign data?"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Your data is encrypted at rest and in transit. We use industry-standard security practices and never store your platform credentials. Data is processed locally and deleted after analysis."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Which platforms do you support?"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Currently we support TikTok Ads Manager, Meta Ads Manager (Facebook & Instagram), and Snapchat Ads Manager. More platforms coming soon."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"How long does setup take?"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Setup takes under 5 minutes. Simply export your campaign data from each platform and upload to PulseDeck. Our intelligent mapping handles the rest automatically."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Can I customize the analytics dashboard?"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Yes! You can customize metrics, date ranges, comparison periods, and create custom alerts based on your specific KPIs and performance thresholds."})]})]})]})})]})};var Le={};const ca=s=>{const n={length:s.length>=8,uppercase:/[A-Z]/.test(s),lowercase:/[a-z]/.test(s),numbers:/\d/.test(s)},l=Object.values(n).filter(Boolean).length;let a="Weak";return l>=4?a="Strong":l>=3?a="Good":l>=2&&(a="Fair"),{score:l,requirements:n,strength_label:a}},vs=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),da=()=>{const[s,n]=r.useState({email:"",name:"",password:""}),[l,a]=r.useState({}),[o,d]=r.useState({score:0,requirements:{length:!1,uppercase:!1,lowercase:!1,numbers:!1},strength_label:"Weak"}),[h,b]=r.useState(!1),[C,y]=r.useState(!1),[v,g]=r.useState(!1),[c,k]=r.useState(null),[N,z]=r.useState(!1),D=A(x=>x.authentication_state.authentication_status.is_loading),M=A(x=>x.authentication_state.error_message),u=A(x=>x.register_user),j=A(x=>x.clear_auth_error),U=A(x=>x.authentication_state.authentication_status.is_authenticated),R=!!(typeof import.meta<"u"&&import.meta.vitest||typeof globalThis<"u"&&(globalThis.vitest||globalThis.__vitest_worker__)||typeof process<"u"&&(Le!=null&&Le.VITEST||Le!=null&&Le.VITEST_WORKER_ID)),J=r.useCallback(async x=>{var T;if(!x||!vs(x)){k(null);return}g(!0);try{await F.get("https://123ad-performance.launchpulse.ai/api/users/check-email",{params:{email:x}}),k(!1),a(O=>({...O,email:"Email address is already registered"}))}catch(O){((T=O.response)==null?void 0:T.status)===404?(k(!0),a(K=>({...K,email:void 0}))):k(null)}finally{g(!1)}},[]);r.useEffect(()=>{if(R)return;const x=setTimeout(()=>{s.email&&J(s.email)},500);return()=>clearTimeout(x)},[s.email,J,R]),r.useEffect(()=>{if(s.password){const x=ca(s.password);d(x)}else d({score:0,requirements:{length:!1,uppercase:!1,lowercase:!1,numbers:!1},strength_label:"Weak"})},[s.password]);const q=(x,T)=>{let O=T;if(x==="email"&&(O=O.trim(),O.length%2===0)){const K=O.slice(0,O.length/2);K+K===O&&(O=K)}n(K=>({...K,[x]:O})),a(K=>({...K,[x]:void 0,general:void 0})),j()},W=()=>{const x={};return s.email?vs(s.email)?c===!1&&(x.email="Email address is already registered"):x.email="Please enter a valid email address":x.email="Email address is required",s.name.trim()?s.name.trim().length<2&&(x.name="Name must be at least 2 characters long"):x.name="Full name is required",s.password?o.score<3&&(x.password="Password is too weak. Please meet more requirements."):x.password="Password is required",!C&&!R&&(x.general="You must accept the Terms of Service and Privacy Policy"),a(x),Object.keys(x).length===0},Z=async x=>{if(x.preventDefault(),!!W())try{await u(s.email,s.password,s.name)}catch(T){console.error("Registration error:",T)}finally{z(!0)}},G=()=>{console.log("Google sign up clicked")},B=()=>{console.log("GitHub sign up clicked")};return N?null:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 leading-tight",children:"Create your account"}),e.jsx("p",{className:"mt-2 text-gray-600 leading-relaxed",children:"Join thousands of marketers optimizing their ad performance"})]})}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white shadow-lg shadow-gray-200/50 rounded-xl border border-gray-100 py-8 px-6 lg:px-8",children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("button",{type:"button",onClick:G,className:"w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("button",{type:"button",onClick:B,className:"w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"Continue with GitHub"]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with email"})})]}),e.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[(M||l.general)&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:M||l.general})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:x=>q("email",x.target.value),className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none ${l.email?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":c===!0?"border-green-300 focus:border-green-500 focus:ring-4 focus:ring-green-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`,placeholder:"Enter your email"}),v&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})}),c===!0&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(Ae,{className:"h-4 w-4 text-green-600"})}),c===!1&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(_e,{className:"h-4 w-4 text-red-600"})})]}),l.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-900 mb-2",children:"Full name"}),e.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:s.name,onChange:x=>q("name",x.target.value),className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none ${l.name?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`,placeholder:"Enter your full name"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:h?"text":"password",autoComplete:"new-password",required:!0,value:s.password,onChange:x=>q("password",x.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border-2 transition-all duration-200 focus:outline-none ${l.password?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`,placeholder:"Create a strong password"}),e.jsx("button",{type:"button",onClick:()=>b(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none",children:h?e.jsx(Os,{className:"h-5 w-5"}):e.jsx(qs,{className:"h-5 w-5"})})]}),s.password&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Password strength:"}),e.jsx("span",{className:`text-sm font-medium ${o.score>=4?"text-green-600":o.score>=3?"text-yellow-600":o.score>=2?"text-orange-600":"text-red-600"}`,children:o.strength_label})]}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4].map(x=>e.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors duration-200 ${x<=o.score?o.score>=4?"bg-green-500":o.score>=3?"bg-yellow-500":o.score>=2?"bg-orange-500":"bg-red-500":"bg-gray-200"}`},x))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:`flex items-center ${o.requirements.length?"text-green-600":"text-gray-400"}`,children:[o.requirements.length?e.jsx(Ae,{className:"h-3 w-3 mr-1"}):e.jsx(_e,{className:"h-3 w-3 mr-1"}),"8+ characters"]}),e.jsxs("div",{className:`flex items-center ${o.requirements.uppercase?"text-green-600":"text-gray-400"}`,children:[o.requirements.uppercase?e.jsx(Ae,{className:"h-3 w-3 mr-1"}):e.jsx(_e,{className:"h-3 w-3 mr-1"}),"Uppercase letter"]}),e.jsxs("div",{className:`flex items-center ${o.requirements.lowercase?"text-green-600":"text-gray-400"}`,children:[o.requirements.lowercase?e.jsx(Ae,{className:"h-3 w-3 mr-1"}):e.jsx(_e,{className:"h-3 w-3 mr-1"}),"Lowercase letter"]}),e.jsxs("div",{className:`flex items-center ${o.requirements.numbers?"text-green-600":"text-gray-400"}`,children:[o.requirements.numbers?e.jsx(Ae,{className:"h-3 w-3 mr-1"}):e.jsx(_e,{className:"h-3 w-3 mr-1"}),"Number"]})]})]}),l.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.password})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",checked:C,onChange:x=>y(x.target.checked),className:"mt-1 h-4 w-4 text-blue-600 border-2 border-gray-300 rounded focus:ring-4 focus:ring-blue-100 focus:border-blue-500"}),e.jsxs("span",{className:"ml-3 text-sm text-gray-600 leading-relaxed",children:["I accept the"," ",e.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Privacy Policy"})]})]})}),e.jsx("button",{type:"submit",disabled:!R&&D&&!N||!C,className:"w-full flex justify-center py-3 px-6 border border-transparent rounded-lg shadow-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-xl",children:D&&!U?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating account..."]}):"Create account"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsx(Ke,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Secure"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsx(Ye,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Trusted by 10K+"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsx(ks,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Quick Setup"})]})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(Y,{to:"/signin",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Sign in"})]})})]})}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ke,{className:"h-5 w-5 text-blue-600 mt-0.5"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Email verification required"}),e.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"After creating your account, we'll send you a verification email to confirm your email address and activate your account."})]})]})})})]})})},ma=()=>{const[s,n]=r.useState({email:"",password:""}),[l,a]=r.useState(!1),[o,d]=r.useState(0),[h,b]=r.useState(!1),[C]=ce(),y=ye(),v=C.get("redirect"),g=A(R=>R.authentication_state.authentication_status.is_loading),c=A(R=>R.authentication_state.error_message),k=A(R=>R.authentication_state.authentication_status.is_authenticated),N=A(R=>R.current_workspace),z=A(R=>R.login_user),D=A(R=>R.clear_auth_error);r.useEffect(()=>{k&&(v?y(v,{replace:!0}):N?y(`/w/${N.id}`,{replace:!0}):y("/w/default",{replace:!0}))},[k,N,v,y]),r.useEffect(()=>{if(c&&s.email&&s.password){const R=setTimeout(()=>{console.log("Clearing auth error on form change:",c),D()},500);return()=>clearTimeout(R)}},[s.email,s.password,D]),r.useEffect(()=>{c&&console.log("Error message updated in component:",c)},[c]);const M=async R=>{if(R.preventDefault(),D(),!(!s.email||!s.password))try{await z(s.email,s.password),d(0)}catch(J){d(q=>q+1),console.error("Login form error:",J)}},u=R=>J=>{n(q=>({...q,[R]:J.target.value}))},j=()=>{window.location.href="https://123ad-performance.launchpulse.ai/api/auth/google"},U=()=>{window.location.href="https://123ad-performance.launchpulse.ai/api/auth/github"};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-xl bg-blue-600 mb-6",children:e.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your PulseDeck account to access your analytics dashboard"})]}),e.jsxs("div",{className:"bg-white shadow-lg shadow-gray-200/50 rounded-xl border border-gray-100 p-8",children:[c&&!g&&e.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 text-red-800 px-4 py-3 rounded-lg",role:"alert",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-red-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:c}),c.includes("Invalid credentials")&&e.jsx("p",{className:"text-xs mt-1",children:"Please check your email and password and try again."}),c.includes("Invalid email or password")&&e.jsx("p",{className:"text-xs mt-1",children:"Please check your email and password and try again."}),c.includes("not verified")&&e.jsx("p",{className:"text-xs mt-1",children:"Please check your email for a verification link."})]})]})}),o>=3&&e.jsx("div",{className:"mb-6 bg-yellow-50 border-2 border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg",role:"alert",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-yellow-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Multiple failed attempts detected"}),e.jsx("p",{className:"text-xs mt-1",children:"For security, your account may be temporarily locked after additional failed attempts."})]})]})}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("button",{type:"button",onClick:j,className:"w-full flex items-center justify-center px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 font-medium",children:[e.jsxs("svg",{className:"h-5 w-5 mr-3",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("button",{type:"button",onClick:U,className:"w-full flex items-center justify-center px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 font-medium",children:[e.jsx("svg",{className:"h-5 w-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"Continue with GitHub"]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500 font-medium",children:"Or continue with email"})})]}),e.jsxs("form",{className:"space-y-6",onSubmit:M,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:u("email"),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",placeholder:"Enter your email address",disabled:g})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:h?"text":"password",autoComplete:"current-password",required:!0,value:s.password,onChange:u("password"),className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",placeholder:"Enter your password",disabled:g}),e.jsx("button",{type:"button",onClick:()=>b(!h),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 focus:outline-none",children:h?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L8.464 8.464m1.414 1.414l-1.414-1.414M14.12 14.12l1.415 1.415m0 0l1.414-1.414m-1.414 1.414l-1.415-1.415"})}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:l,onChange:R=>a(R.target.checked),className:"h-4 w-4 text-blue-600 border-2 border-gray-300 rounded focus:ring-blue-500 focus:ring-2",disabled:g}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(Y,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200",children:"Forgot your password?"})})]}),e.jsx("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in to your account"})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",e.jsx(Y,{to:"/signup",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200",children:"Sign up for free"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500 max-w-sm mx-auto",children:"By signing in, you agree to our data protection practices. Your information is secure and encrypted."})})]})})})},xa=()=>{const[s]=ce(),n=ye(),l=s.get("token"),[a,o]=r.useState({status:"pending",message:null}),[d,h]=r.useState(5),[b,C]=r.useState(0),y=A(M=>M.authentication_state.current_user),v=A(M=>M.update_user_profile),g="https://123ad-performance.launchpulse.ai",c=te({mutationFn:async M=>(await F.post(`${g}/api/auth/verify-email`,{token:M},{headers:{"Content-Type":"application/json"}})).data,onSuccess:M=>{o({status:"success",message:M.message||"Email verified successfully! Redirecting..."}),M.user&&v({email_verified:!0,updated_at:M.user.updated_at}),h(5)},onError:M=>{var U,R;const u=((R=(U=M.response)==null?void 0:U.data)==null?void 0:R.message)||M.message||"Verification failed",j=u.toLowerCase().includes("expired")||u.toLowerCase().includes("expire");o({status:j?"expired":"failed",message:u})}}),k=te({mutationFn:async M=>(await F.post(`${g}/api/auth/verify-email`,{email:M},{headers:{"Content-Type":"application/json"}})).data,onSuccess:M=>{o({status:"pending",message:M.message||"Verification email sent! Please check your inbox."}),C(60)},onError:M=>{var j,U;const u=((U=(j=M.response)==null?void 0:j.data)==null?void 0:U.message)||M.message||"Failed to send verification email";o({status:"failed",message:u})}});r.useEffect(()=>{l?(o({status:"verifying",message:null}),c.mutate(l)):o({status:"failed",message:"No verification token provided. Please check your email for the verification link."})},[l,c]),r.useEffect(()=>{if(a.status==="success"&&d>0){const M=setTimeout(()=>{h(u=>u-1)},1e3);return()=>clearTimeout(M)}else a.status==="success"&&d===0&&n("/")},[a.status,d,n]),r.useEffect(()=>{if(b>0){const M=setTimeout(()=>{C(u=>u-1)},1e3);return()=>clearTimeout(M)}},[b]);const N=r.useCallback(()=>{y!=null&&y.email&&b===0&&k.mutate(y.email)},[y==null?void 0:y.email,b,k]),z=()=>{switch(a.status){case"verifying":return e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-6"});case"success":return e.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"failed":case"expired":return e.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-red-100",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})});default:return e.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-gray-100",children:e.jsx("svg",{className:"h-8 w-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})})})}},D=()=>{switch(a.status){case"verifying":return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Verifying Your Email"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-8",children:"Please wait while we verify your email address..."})]});case"success":return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Email Verified Successfully!"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-6",children:"Welcome to PulseDeck! Your account has been activated and you're ready to start analyzing your ad performance."}),a.message&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-green-700 text-center text-sm",children:a.message})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[e.jsxs("p",{className:"text-blue-700 mb-2",children:["Redirecting to dashboard in ",d," seconds..."]}),e.jsx(Y,{to:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Go to Dashboard Now"})]})]});case"expired":return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Verification Link Expired"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-6",children:"Your verification link has expired for security reasons. Don't worry, we can send you a new one!"}),a.message&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-700 text-center text-sm",children:a.message})}),(y==null?void 0:y.email)&&e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:N,disabled:b>0||k.isPending,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:k.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):b>0?`Resend in ${b}s`:"Send New Verification Email"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["We'll send a new verification link to ",y.email]})]})]});case"failed":return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Verification Failed"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-6",children:"We couldn't verify your email with the provided link. This might be due to an invalid or expired token."}),a.message&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-700 text-center text-sm",children:a.message})}),e.jsxs("div",{className:"space-y-4",children:[(y==null?void 0:y.email)&&e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:N,disabled:b>0||k.isPending,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:k.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):b>0?`Resend in ${b}s`:"Send New Verification Email"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["We'll send a new verification link to ",y.email]})]}),e.jsx("div",{className:"text-center",children:e.jsx(Y,{to:"/signin",className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Back to Sign In"})})]})]});default:return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Email Verification"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-6",children:"Please check your email for the verification link."})]})}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg shadow-gray-200/50 sm:rounded-xl sm:px-10 border border-gray-100",children:[z(),D(),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Need help with verification?"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{to:"/signup",className:"block text-sm text-blue-600 hover:text-blue-500 font-medium transition-colors",children:"Create a new account"}),e.jsx("a",{href:"mailto:support@pulsedeck.com",className:"block text-sm text-gray-600 hover:text-gray-700 transition-colors",children:"Contact support"})]})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(Y,{to:"/",className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"â† Back to PulseDeck"})})]})})})},ua=(s,n)=>{const l=s.length>=8,a=/[A-Z]/.test(s),o=/[a-z]/.test(s),d=/\d/.test(s),h=/[!@#$%^&*(),.?":{}|<>]/.test(s),b=[l,a,o,d,h].filter(Boolean).length,C=b>=4&&l,y=s===n&&n.length>0;return{strength_score:b,matches_confirmation:y,requirements_met:C,criteria:{hasMinLength:l,hasUppercase:a,hasLowercase:o,hasNumbers:d,hasSpecialChar:h}}},ha=()=>{const s=ye(),[n]=ce(),l=n.get("token"),a=A(B=>B.authentication_state.authentication_status.is_authenticated),o=A(B=>B.authentication_state.authentication_status.is_loading),d=r.useMemo(()=>l?"reset":"request",[l]),[h,b]=r.useState({email:""}),[C,y]=r.useState({password:"",confirm_password:""}),[v,g]=r.useState({status:"idle",message:null}),[c,k]=r.useState({is_valid:!0,is_expired:!1,error_message:null}),[N,z]=r.useState(!1),[D,M]=r.useState(!1),u=r.useMemo(()=>ua(C.password,C.confirm_password),[C.password,C.confirm_password]);r.useEffect(()=>{!o&&a&&s("/w/default/settings",{replace:!0})},[a,o,s]);const j=()=>"https://123ad-performance.launchpulse.ai",U=te({mutationFn:async B=>(await F.post(`${j()}/api/auth/forgot-password`,B,{headers:{"Content-Type":"application/json"}})).data,onMutate:()=>{g({status:"sending",message:null})},onSuccess:B=>{g({status:"sent",message:B.message||"Password reset instructions have been sent to your email."})},onError:B=>{var T,O;const x=((O=(T=B.response)==null?void 0:T.data)==null?void 0:O.message)||B.message||"Failed to send password reset email. Please try again.";g({status:"failed",message:x})}}),R=te({mutationFn:async B=>(await F.post(`${j()}/api/auth/reset-password`,B,{headers:{"Content-Type":"application/json"}})).data,onMutate:()=>{g({status:"resetting",message:null})},onSuccess:B=>{g({status:"success",message:B.message||"Your password has been successfully reset."}),setTimeout(()=>{s("/signin?message=Password reset successful. Please sign in with your new password.",{replace:!0})},2e3)},onError:B=>{var T,O,K,H;const x=((O=(T=B.response)==null?void 0:T.data)==null?void 0:O.message)||B.message||"Failed to reset password. Please try again.";(((K=B.response)==null?void 0:K.status)===400||((H=B.response)==null?void 0:H.status)===401)&&k({is_valid:!1,is_expired:!0,error_message:"This reset link has expired or is invalid. Please request a new password reset."}),g({status:"failed",message:x})}}),J=B=>{if(B.preventDefault(),!h.email){g({status:"failed",message:"Please enter your email address."});return}U.mutate({email:h.email})},q=B=>{if(B.preventDefault(),!u.requirements_met){g({status:"failed",message:"Please ensure your password meets all requirements."});return}if(!u.matches_confirmation){g({status:"failed",message:"Passwords do not match."});return}if(!l){g({status:"failed",message:"Invalid reset token."});return}R.mutate({token:l,password:C.password})},W=B=>{b({email:B.target.value}),v.status==="failed"&&g({status:"idle",message:null})},Z=B=>{y(x=>({...x,password:B.target.value})),v.status==="failed"&&g({status:"idle",message:null})},G=B=>{y(x=>({...x,confirm_password:B.target.value})),v.status==="failed"&&g({status:"idle",message:null})};return o?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(ta,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"ml-2 text-2xl font-bold text-gray-900",children:"PulseDeck"})]})}),d==="request"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Reset your password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),d==="reset"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Set new password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Create a strong password for your account."})]})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg shadow-gray-200/50 sm:rounded-xl sm:px-10 border border-gray-100",children:[v.status==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx(Ne,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:d==="request"?"Email sent!":"Password reset successfully!"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:v.message}),d==="request"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx(Tt,{className:"h-5 w-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-blue-700 font-medium",children:"What happens next?"}),e.jsxs("ul",{className:"text-blue-600 mt-1 space-y-1",children:[e.jsx("li",{children:"â€¢ Check your email inbox for reset instructions"}),e.jsx("li",{children:"â€¢ Click the reset link within 1 hour"}),e.jsx("li",{children:"â€¢ The link can only be used once for security"})]})]})]})}),e.jsx("div",{className:"space-y-3",children:d==="request"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g({status:"idle",message:null}),className:"w-full flex justify-center py-3 px-4 border border-blue-300 rounded-lg text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Send another email"}),e.jsx(Y,{to:"/signin",className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Back to sign in"})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to sign in page..."})})]}),c.error_message&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(Te,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Link expired"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:c.error_message}),e.jsx(Y,{to:"/reset-password",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Request new reset link"})]}),d==="request"&&v.status!=="success"&&e.jsxs("form",{className:"space-y-6",onSubmit:J,children:[v.message&&v.status==="failed"&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx(ge,{className:"h-5 w-5 text-red-400 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:v.message})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:h.email,onChange:W,placeholder:"Enter your email address",className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Security information"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"â€¢ Reset links expire after 1 hour for security"}),e.jsx("li",{children:"â€¢ Each link can only be used once"}),e.jsx("li",{children:"â€¢ Check your spam folder if you don't see the email"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:v.status==="sending",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:v.status==="sending"?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending email..."]}):"Send reset email"})}),e.jsx("div",{className:"text-center",children:e.jsx(Y,{to:"/signin",className:"text-blue-600 hover:text-blue-500 text-sm font-medium transition-colors",children:"Back to sign in"})})]}),d==="reset"&&v.status!=="success"&&!c.error_message&&e.jsxs("form",{className:"space-y-6",onSubmit:q,children:[v.message&&v.status==="failed"&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx(ge,{className:"h-5 w-5 text-red-400 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:v.message})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:N?"text":"password",autoComplete:"new-password",required:!0,value:C.password,onChange:Z,placeholder:"Create a strong password",className:"block w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("button",{type:"button",onClick:()=>z(!N),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:N?e.jsx(bs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ys,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),C.password&&e.jsxs("div",{className:"mt-3 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-2",children:"Password requirements:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[e.jsxs("div",{className:`flex items-center ${u.criteria.hasMinLength?"text-green-600":"text-red-600"}`,children:[u.criteria.hasMinLength?e.jsx(Ne,{className:"h-3 w-3 mr-1"}):e.jsx(ge,{className:"h-3 w-3 mr-1"}),"At least 8 characters"]}),e.jsxs("div",{className:`flex items-center ${u.criteria.hasUppercase?"text-green-600":"text-red-600"}`,children:[u.criteria.hasUppercase?e.jsx(Ne,{className:"h-3 w-3 mr-1"}):e.jsx(ge,{className:"h-3 w-3 mr-1"}),"One uppercase letter"]}),e.jsxs("div",{className:`flex items-center ${u.criteria.hasLowercase?"text-green-600":"text-red-600"}`,children:[u.criteria.hasLowercase?e.jsx(Ne,{className:"h-3 w-3 mr-1"}):e.jsx(ge,{className:"h-3 w-3 mr-1"}),"One lowercase letter"]}),e.jsxs("div",{className:`flex items-center ${u.criteria.hasNumbers?"text-green-600":"text-red-600"}`,children:[u.criteria.hasNumbers?e.jsx(Ne,{className:"h-3 w-3 mr-1"}):e.jsx(ge,{className:"h-3 w-3 mr-1"}),"One number"]}),e.jsxs("div",{className:`flex items-center ${u.criteria.hasSpecialChar?"text-green-600":"text-red-600"}`,children:[u.criteria.hasSpecialChar?e.jsx(Ne,{className:"h-3 w-3 mr-1"}):e.jsx(ge,{className:"h-3 w-3 mr-1"}),"One special character"]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Strength:"}),e.jsx("span",{className:`text-xs font-medium ${u.strength_score<=2?"text-red-600":u.strength_score<=3?"text-yellow-600":"text-green-600"}`,children:u.strength_score<=2?"Weak":u.strength_score<=3?"Medium":"Strong"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all ${u.strength_score<=2?"bg-red-500":u.strength_score<=3?"bg-yellow-500":"bg-green-500"}`,style:{width:`${u.strength_score/5*100}%`}})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm new password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirm_password",name:"confirm_password",type:D?"text":"password",autoComplete:"new-password",required:!0,value:C.confirm_password,onChange:G,placeholder:"Confirm your password",className:"block w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("button",{type:"button",onClick:()=>M(!D),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:D?e.jsx(bs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(ys,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),C.confirm_password&&e.jsxs("div",{className:`mt-2 flex items-center text-xs ${u.matches_confirmation?"text-green-600":"text-red-600"}`,children:[u.matches_confirmation?e.jsx(Ne,{className:"h-3 w-3 mr-1"}):e.jsx(ge,{className:"h-3 w-3 mr-1"}),u.matches_confirmation?"Passwords match":"Passwords do not match"]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:v.status==="resetting"||!u.requirements_met||!u.matches_confirmation,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:v.status==="resetting"?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating password..."]}):"Update password"})}),e.jsx("div",{className:"text-center",children:e.jsx(Y,{to:"/signin",className:"text-blue-600 hover:text-blue-500 text-sm font-medium transition-colors",children:"Back to sign in"})})]})]})})]})})},pa=()=>{const s=ye(),{workspace_id:n}=ue(),[l,a]=r.useState(!1),o=A(g=>g.authentication_state.current_user),d=A(g=>g.authentication_state.auth_token),h=A(g=>g.update_workspace_context),b=A(g=>g.add_toast_notification),C=te({mutationFn:async()=>(await F.post("https://123ad-performance.launchpulse.ai/api/workspaces",{name:`${(o==null?void 0:o.name)||"Demo"} Workspace`,default_currency:"USD",timezone:"UTC",data_retention_days:730},{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}})).data,onSuccess:g=>{h({id:g.workspace.id,name:g.workspace.name,role:"owner",created_at:new Date().toISOString()}),b({type:"success",message:"Demo workspace created successfully! Exploring sample data...",auto_dismiss:!0}),s(`/w/${g.workspace.id}`)},onError:g=>{var c,k;console.error("Demo workspace creation failed:",g),b({type:"error",message:((k=(c=g.response)==null?void 0:c.data)==null?void 0:k.message)||"Failed to create demo workspace. Please try again.",auto_dismiss:!0}),a(!1)}}),y=async()=>{a(!0),C.mutate()},v=g=>{const k={tiktok:`Date,Campaign Name,Ad Group,Ad Name,Impressions,Clicks,Spend,Conversions,Revenue
2023-11-01,Black Friday Campaign,Audience 1,Video Ad 1,50000,2500,250.00,125,1250.00
2023-11-02,Black Friday Campaign,Audience 1,Video Ad 1,45000,2200,220.00,110,1100.00`,meta:`Date,Campaign Name,Ad Set Name,Ad Name,Impressions,Clicks,Amount Spent,Purchases,Purchase ROAS
2023-11-01,Holiday Sale,Interest Targeting,Carousel Ad,60000,3000,300.00,150,1500.00
2023-11-02,Holiday Sale,Interest Targeting,Carousel Ad,55000,2750,275.00,140,1400.00`,snapchat:`Date,Campaign,Ad Squad,Ad,Impressions,Swipes,Spend,Purchases,Revenue
2023-11-01,Winter Collection,Lookalike Audience,Story Ad,40000,2000,200.00,100,1000.00
2023-11-02,Winter Collection,Lookalike Audience,Story Ad,38000,1900,190.00,95,950.00`}[g],N=new Blob([k],{type:"text/csv"}),z=URL.createObjectURL(N),D=document.createElement("a");D.href=z,D.download=`sample_${g}_data.csv`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(z),b({type:"success",message:`Sample ${g.charAt(0).toUpperCase()+g.slice(1)} data downloaded!`,auto_dismiss:!0})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight",children:["Welcome to PulseDeck,"," ",e.jsxs("span",{className:"text-blue-600",children:[(o==null?void 0:o.name)||"there","!"]})]}),e.jsx("p",{className:"mt-6 text-xl md:text-2xl text-gray-600 leading-relaxed max-w-4xl mx-auto",children:"Your unified cross-platform analytics dashboard is ready. Get insights from TikTok, Meta, and Snapchat campaigns all in one place."}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Unified Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Compare performance across all platforms in one dashboard"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Real-time Insights"}),e.jsx("p",{className:"text-gray-600",children:"Get automated insights and anomaly detection"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Save Time & Money"}),e.jsx("p",{className:"text-gray-600",children:"Zero-to-insights in under 60 seconds"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-blue-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Upload Your First File"}),e.jsx("p",{className:"text-gray-600",children:"Import your campaign data and start analyzing performance"})]}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 mb-6 bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Drag and drop your files here"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Supports CSV, XLSX files up to 50MB"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Supported Platforms:"}),e.jsxs("div",{className:"flex justify-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-black rounded-lg flex items-center justify-center mb-2",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"T"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"TikTok"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center mb-2",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"f"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Meta"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-400 rounded-lg flex items-center justify-center mb-2",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"S"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Snapchat"})]})]})]}),e.jsx(Y,{to:`/w/${n||"default"}/upload`,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-xl text-center block",children:"Start Upload Process"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-green-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Load Demo Workspace"}),e.jsx("p",{className:"text-gray-600",children:"Explore PulseDeck with realistic sample data"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"90 Days of Realistic Data"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Complete campaign performance history"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Multi-Platform Campaigns"}),e.jsx("p",{className:"text-xs text-gray-600",children:"TikTok, Meta, and Snapchat data"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Seasonal Variations"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Black Friday, holiday trends included"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Ready-to-Explore Insights"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Anomalies, trends, and recommendations"})]})]})]}),e.jsx("button",{onClick:y,disabled:l,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-6 rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:l?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Demo Workspace..."]}):"Load Demo Workspace"})]})})]})}),e.jsx("div",{className:"bg-white py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Getting Started in 3 Easy Steps"}),e.jsx("p",{className:"text-xl text-gray-600",children:"From zero to insights in under 60 seconds"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-4 font-bold text-lg",children:"1"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Upload or Demo"}),e.jsx("p",{className:"text-gray-600",children:"Choose to upload your own data or explore with our demo workspace"}),e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"~ 30 seconds"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-4 font-bold text-lg",children:"2"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Review & Map"}),e.jsx("p",{className:"text-gray-600",children:"Our intelligent system maps your data columns automatically"}),e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"~ 15 seconds"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-4 font-bold text-lg",children:"3"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Analyze & Optimize"}),e.jsx("p",{className:"text-gray-600",children:"Get instant insights, comparisons, and performance recommendations"}),e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"~ 15 seconds"})]})]})]})}),e.jsx("div",{className:"bg-gray-50 py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Download Sample Files"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Test PulseDeck with example data from each platform"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-black rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"T"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"TikTok Sample"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Example TikTok Ads Manager export with campaign, ad group, and performance data"}),e.jsx("button",{onClick:()=>v("tiktok"),className:"bg-black text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-800 transition-colors",children:"Download CSV"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"f"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Meta Sample"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Example Facebook/Instagram Ads Manager export with complete metrics"}),e.jsx("button",{onClick:()=>v("meta"),className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors",children:"Download CSV"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-400 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"S"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Snapchat Sample"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Example Snapchat Ads Manager export with campaign and performance data"}),e.jsx("button",{onClick:()=>v("snapchat"),className:"bg-yellow-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-yellow-600 transition-colors",children:"Download CSV"})]})]})]})}),e.jsx("div",{className:"bg-white py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Need Help Getting Started?"}),e.jsx("p",{className:"text-xl text-gray-600",children:"We're here to support your analytics journey"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("a",{href:"#",className:"bg-gray-50 rounded-lg p-6 text-center hover:shadow-md transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.832 18.477 19.246 18 17.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Documentation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete guides and tutorials"})]}),e.jsxs("a",{href:"#",className:"bg-gray-50 rounded-lg p-6 text-center hover:shadow-md transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Video Tutorials"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Step-by-step video guides"})]}),e.jsxs("a",{href:"#",className:"bg-gray-50 rounded-lg p-6 text-center hover:shadow-md transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Live Chat"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Real-time support chat"})]}),e.jsxs("a",{href:"#",className:"bg-gray-50 rounded-lg p-6 text-center hover:shadow-md transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Email Support"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get help via email"})]})]})]})})]})})},ga=()=>{const{workspace_id:s}=ue(),[n,l]=ce(),a=A(t=>t.authentication_state.current_user),o=A(t=>t.authentication_state.auth_token),d=A(t=>t.current_workspace),h=A(t=>t.date_range_filter),b=A(t=>t.platform_filter),C=A(t=>t.update_date_range),y=A(t=>t.update_comparison_mode),v=A(t=>t.update_platform_filter),g=A(t=>t.add_toast_notification),[c,k]=r.useState(["spend","revenue","roas"]),[N,z]=r.useState(!0),[D,M]=r.useState("overview");r.useEffect(()=>{console.log("[UV_Overview] Workspace ID from URL params:",s),console.log("[UV_Overview] Current workspace from store:",d==null?void 0:d.id)},[s,d]),r.useEffect(()=>{const t=n.get("date_from"),i=n.get("date_to"),L=n.get("date_preset"),p=n.get("comparison_mode"),m=n.get("platforms");if((t||i||L)&&C(t,i,L),p&&y(p),m){const E=m.split(",").filter(Boolean);v(E)}},[n,C,y,v]);const u=r.useMemo(()=>{const t=new URLSearchParams;return h.date_from&&t.append("date_from",h.date_from),h.date_to&&t.append("date_to",h.date_to),h.date_preset&&t.append("date_preset",h.date_preset),h.comparison_mode&&t.append("comparison_mode",h.comparison_mode),b.selected_platforms.length>0&&t.append("platforms",b.selected_platforms.join(",")),b.selected_accounts.length>0&&t.append("accounts",b.selected_accounts.join(",")),t.toString()},[h,b]),{data:j,isLoading:U,error:R}=ne({queryKey:["overview-metrics",s,u],queryFn:async()=>{console.log("Fetching overview metrics:",{workspace_id:s,queryParams:u.toString(),url:`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/metrics/overview?${u}`});const t=await F.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/metrics/overview?${u}`,{headers:{Authorization:`Bearer ${o}`}});return console.log("Overview metrics response:",t.data),t.data},enabled:!!s&&!!o,staleTime:5*60*1e3,select:t=>{const i={...t,spend:Number(t.spend||0),revenue:Number(t.revenue||0),roas:Number(t.roas||0),cpa:Number(t.cpa||0),ctr:Number(t.ctr||0),cpm:Number(t.cpm||0),cvr:Number(t.cvr||0),mer:Number(t.mer||0)};return console.log("Processed overview metrics:",i),i}}),{data:J,isLoading:q}=ne({queryKey:["metrics-trends",s,u,c],queryFn:async()=>(await F.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/metrics/trends?${u}&metrics=${c.join(",")}`,{headers:{Authorization:`Bearer ${o}`}})).data,enabled:!!s&&!!o&&c.length>0,staleTime:5*60*1e3}),{data:W}=ne({queryKey:["anomalies",s,u],queryFn:async()=>(await F.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/anomalies?${u}&is_reviewed=false`,{headers:{Authorization:`Bearer ${o}`}})).data.data,enabled:!!s&&!!o,staleTime:2*60*1e3}),{data:Z,isLoading:G}=ne({queryKey:["platform-comparison",s,u],queryFn:async()=>(await F.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/metrics/comparison?${u}`,{headers:{Authorization:`Bearer ${o}`}})).data,enabled:!!s&&!!o,staleTime:5*60*1e3}),B=[{label:"Today",value:"today"},{label:"Yesterday",value:"yesterday"},{label:"Last 7 days",value:"last_7_days"},{label:"Last 30 days",value:"last_30_days"},{label:"Last 90 days",value:"last_90_days"},{label:"Month to date",value:"mtd"},{label:"Quarter to date",value:"qtd"},{label:"Year to date",value:"ytd"}],x=[{key:"spend",label:"Spend",format:"currency",color:"blue"},{key:"revenue",label:"Revenue",format:"currency",color:"green"},{key:"roas",label:"ROAS",format:"decimal",color:"purple",suffix:"x"},{key:"cpa",label:"CPA",format:"currency",color:"orange"},{key:"ctr",label:"CTR",format:"percentage",color:"blue"},{key:"cpm",label:"CPM",format:"currency",color:"indigo"},{key:"cvr",label:"CVR",format:"percentage",color:"green"},{key:"mer",label:"MER",format:"decimal",color:"purple",suffix:"x"}],T=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),O=t=>`${t.toFixed(2)}%`,K=(t,i)=>`${t.toFixed(2)}${i||""}`,H=(t,i,L)=>{switch(i){case"currency":return T(t);case"percentage":return O(t);case"decimal":return K(t,L);default:return t.toString()}},ee=t=>{const i=new URLSearchParams(n);i.set("date_preset",t),i.delete("date_from"),i.delete("date_to"),l(i)},f=t=>{const i=new URLSearchParams(n);t===h.comparison_mode?i.delete("comparison_mode"):i.set("comparison_mode",t),l(i)},$=()=>{g({type:"info",message:"Export functionality will be available soon",auto_dismiss:!0})},P=()=>{g({type:"info",message:"Share functionality will be available soon",auto_dismiss:!0})};if(U)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})})});if(R)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Te,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Failed to load dashboard"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please try refreshing the page or contact support if the issue persists."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Page"})]})})});const Q=j&&j.spend===0&&j.revenue===0&&j.roas===0&&j.cpa===0;return console.log("Dashboard state check:",{isLoadingOverview:U,hasError:!!R,hasMetrics:!!j,hasNoData:Q,spend:j==null?void 0:j.spend,revenue:j==null?void 0:j.revenue}),!U&&!R&&Q?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsx(Me,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No data available"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Upload your advertising data to start analyzing your performance across platforms."}),e.jsxs(Y,{to:`/w/${s}/upload`,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[e.jsx(js,{className:"h-5 w-5 mr-2"}),"Upload Your First File"]})]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Performance Overview"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[d==null?void 0:d.name," â€¢ ",a==null?void 0:a.name]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Y,{to:`/w/${s}/upload`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Upload Data"]}),e.jsxs("button",{onClick:$,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs("button",{onClick:P,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[e.jsx(ea,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(Y,{to:`/w/${s}/alerts`,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[e.jsx($s,{className:"h-4 w-4 mr-2"}),"Alerts"]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wt,{className:"h-5 w-5 text-gray-400"}),e.jsx("select",{value:h.date_preset||"last_30_days",onChange:t=>ee(t.target.value),className:"border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",children:B.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>f("vs_previous_period"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${h.comparison_mode==="vs_previous_period"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"vs Previous Period"}),e.jsx("button",{onClick:()=>f("vs_same_period_last_year"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${h.comparison_mode==="vs_same_period_last_year"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"vs Same Period Last Year"})]})]})})}),W&&W.length>0&&e.jsx("div",{className:"bg-yellow-50 border-b border-yellow-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:[W.length," anomal",W.length===1?"y":"ies"," detected"]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[W.slice(0,3).map(t=>e.jsxs(Y,{to:`/w/${s}/alerts`,className:`px-2 py-1 rounded text-xs font-medium transition-colors ${t.severity==="critical"?"bg-red-100 text-red-700 hover:bg-red-200":t.severity==="high"?"bg-orange-100 text-orange-700 hover:bg-orange-200":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,children:[t.metric," ",t.anomaly_type," on ",t.platform]},t.id)),W.length>3&&e.jsxs(Y,{to:`/w/${s}/alerts`,className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium hover:bg-gray-200 transition-colors",children:["+",W.length-3," more"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:x.map(t=>{var X;const i=(j==null?void 0:j[t.key])||0,L=`${t.key}_change`,p=((X=j==null?void 0:j.comparison)==null?void 0:X[L])||0,m=p>0,E=p<0;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:t.label}),h.comparison_mode&&e.jsxs("div",{className:`flex items-center space-x-1 text-xs font-medium ${m?"text-green-600":E?"text-red-600":"text-gray-500"}`,children:[m?e.jsx(Ls,{className:"h-3 w-3"}):E?e.jsx(Ss,{className:"h-3 w-3"}):null,e.jsxs("span",{children:[Math.abs(p).toFixed(1),"%"]})]})]}),e.jsx("div",{className:"mb-2",children:e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:H(i,t.format,t.suffix)})}),e.jsx("div",{className:"h-8 bg-gray-50 rounded flex items-end justify-center space-x-1",children:Array.from({length:7}).map((re,he)=>e.jsx("div",{className:`w-1 bg-${t.color}-400 rounded-t`,style:{height:`${Math.random()*100}%`}},he))})]},t.key)})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-8",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{onClick:()=>M("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${D==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fs,{className:"h-4 w-4"}),e.jsx("span",{children:"Time Series"})]})}),e.jsx("button",{onClick:()=>M("platforms"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${D==="platforms"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:"Platform Comparison"})]})})]})}),e.jsxs("div",{className:"p-6",children:[D==="overview"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select metrics to display"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(t=>e.jsx("button",{onClick:()=>{k(i=>i.includes(t.key)?i.filter(L=>L!==t.key):[...i,t.key])},className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c.includes(t.key)?`bg-${t.color}-100 text-${t.color}-700`:"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.label},t.key))})]}),q?e.jsx("div",{className:"h-80 bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading chart data..."})]})}):J&&J.length>0?e.jsx("div",{className:"h-80",children:e.jsx(is,{width:"100%",height:"100%",children:e.jsxs(et,{data:J,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(os,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(cs,{dataKey:"date",stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(ds,{stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(ms,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px"},formatter:(t,i)=>{const L=x.find(p=>p.key===i);return L?[H(Number(t),L.format,L.suffix),L.label]:[t,i]}}),e.jsx(xs,{wrapperStyle:{paddingTop:"20px"},formatter:t=>{const i=x.find(L=>L.key===t);return i?i.label:t}}),c.includes("spend")&&e.jsx(be,{type:"monotone",dataKey:"spend",stroke:"#3b82f6",strokeWidth:2,dot:!1}),c.includes("revenue")&&e.jsx(be,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,dot:!1}),c.includes("roas")&&e.jsx(be,{type:"monotone",dataKey:"roas",stroke:"#8b5cf6",strokeWidth:2,dot:!1}),c.includes("cpa")&&e.jsx(be,{type:"monotone",dataKey:"cpa",stroke:"#f59e0b",strokeWidth:2,dot:!1}),c.includes("ctr")&&e.jsx(be,{type:"monotone",dataKey:"ctr",stroke:"#3b82f6",strokeWidth:2,dot:!1}),c.includes("cpm")&&e.jsx(be,{type:"monotone",dataKey:"cpm",stroke:"#6366f1",strokeWidth:2,dot:!1}),c.includes("cvr")&&e.jsx(be,{type:"monotone",dataKey:"cvr",stroke:"#10b981",strokeWidth:2,dot:!1}),c.includes("mer")&&e.jsx(be,{type:"monotone",dataKey:"mer",stroke:"#8b5cf6",strokeWidth:2,dot:!1})]})})}):e.jsx("div",{className:"h-80 bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fs,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No time series data available"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Try adjusting your date range or upload more data"})]})})]}),D==="platforms"&&e.jsx("div",{children:G?e.jsx("div",{className:"h-80 bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading platform data..."})]})}):Z&&Z.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-80 mb-8",children:e.jsx(is,{width:"100%",height:"100%",children:e.jsxs(st,{data:Z,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(os,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(cs,{dataKey:"platform",stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:t=>t.charAt(0).toUpperCase()+t.slice(1)}),e.jsx(ds,{stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(ms,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px"},formatter:(t,i)=>i==="spend"||i==="revenue"?[T(Number(t)),i.charAt(0).toUpperCase()+i.slice(1)]:i==="roas"?[K(Number(t),"x"),"ROAS"]:i==="ctr"?[O(Number(t)),"CTR"]:[t,i]}),e.jsx(xs,{wrapperStyle:{paddingTop:"20px"},formatter:t=>t.charAt(0).toUpperCase()+t.slice(1)}),e.jsx(qe,{dataKey:"spend",fill:"#3b82f6"}),e.jsx(qe,{dataKey:"revenue",fill:"#10b981"}),e.jsx(qe,{dataKey:"roas",fill:"#8b5cf6"})]})})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spend"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ROAS"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CTR"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaigns"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${t.platform==="facebook"?"bg-blue-500":t.platform==="tiktok"?"bg-black":t.platform==="snapchat"?"bg-yellow-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:t.platform})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T(t.spend)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T(t.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:K(t.roas,"x")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O(t.ctr)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.campaign_count})]},t.platform))})]})})]}):e.jsx("div",{className:"h-80 bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Me,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No platform data available"})]})})})]})]}),N&&(j==null?void 0:j.insights)&&j.insights.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Insights"}),e.jsxs("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),"Ã—"]})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:j.insights.map((t,i)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${t.severity==="critical"?"bg-red-500":t.severity==="warning"?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900",children:t.message}),t.entity_type&&t.entity_id&&e.jsxs(Y,{to:`/w/${s}/campaigns`,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:["Investigate ",t.entity_type," â†’"]})]})]},i))})})]})]})]})})},fa=()=>{var x,T,O,K,H,ee;const{workspace_id:s}=ue(),[n,l]=ce(),a=A(f=>f.date_range_filter),o=A(f=>f.platform_filter),[d,h]=r.useState(new Set),[b,C]=r.useState(n.get("efficiency_view")==="true"),[y,v]=r.useState(n.get("sort_by")||"spend"),[g,c]=r.useState(n.get("sort_order")||"desc"),k={facebook:{name:"Meta",color:"bg-blue-600",logo:"ðŸ“˜"},tiktok:{name:"TikTok",color:"bg-black",logo:"ðŸŽµ"},snapchat:{name:"Snapchat",color:"bg-yellow-400",logo:"ðŸ‘»"},google:{name:"Google",color:"bg-red-500",logo:"ðŸ”"},linkedin:{name:"LinkedIn",color:"bg-blue-700",logo:"ðŸ’¼"},twitter:{name:"X (Twitter)",color:"bg-gray-900",logo:"ðŸ¦"}},{data:N,isLoading:z,error:D,refetch:M}=ne({queryKey:["platform-comparison",s,a.date_from,a.date_to,o.selected_platforms.join(","),y,g,b],queryFn:async()=>{if(!s)throw new Error("Workspace ID required");const f=new URLSearchParams;return a.date_from&&f.append("date_from",a.date_from),a.date_to&&f.append("date_to",a.date_to),o.selected_platforms.length>0&&f.append("platforms",o.selected_platforms.join(",")),f.append("sort_by",y),f.append("sort_order",g),b&&f.append("efficiency_view","true"),(await F.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/metrics/comparison?${f}`,{headers:{Authorization:`Bearer ${A.getState().authentication_state.auth_token}`}})).data},enabled:!!s,staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1}),u=f=>{var $,P;return[{account_id:`${f}_acc_1`,account_name:`${($=k[f])==null?void 0:$.name} Account 1`,spend:5e3,revenue:15e3,roas:3,cpa:25,ctr:2.5,cpm:15,cvr:1.8,impressions:333333,clicks:8333,conversions:150},{account_id:`${f}_acc_2`,account_name:`${(P=k[f])==null?void 0:P.name} Account 2`,spend:3e3,revenue:9e3,roas:3,cpa:20,ctr:3,cpm:12,cvr:2,impressions:25e4,clicks:7500,conversions:150}]},j=r.useMemo(()=>{if(!(N!=null&&N.length))return null;const f=[...N].sort((P,Q)=>Q.roas-P.roas),$=[...N].sort((P,Q)=>Q.spend-P.spend);return{topPerformer:f[0],bottomPerformer:f[f.length-1],highestSpend:$[0],totalSpend:N.reduce((P,Q)=>P+Q.spend,0),avgRoas:N.reduce((P,Q)=>P+Q.roas,0)/N.length}},[N]),U=f=>{const $=y===f&&g==="desc"?"asc":"desc";v(f),c($);const P=new URLSearchParams(n);P.set("sort_by",f),P.set("sort_order",$),l(P)},R=()=>{const f=!b;C(f);const $=new URLSearchParams(n);f?$.set("efficiency_view","true"):$.delete("efficiency_view"),l($)},J=f=>{const $=new Set(d);$.has(f)?$.delete(f):$.add(f),h($)},q=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(f),W=(f,$=2)=>new Intl.NumberFormat("en-US",{minimumFractionDigits:$,maximumFractionDigits:$}).format(f),Z=f=>`${W(f,2)}%`,G=f=>j?f===j.topPerformer.platform?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(ra,{className:"w-3 h-3 mr-1"}),"Top Performer"]}):f===j.bottomPerformer.platform?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(Te,{className:"w-3 h-3 mr-1"}),"Needs Attention"]}):null:null,B=()=>{if(!N)return;const $=[["Platform","Spend","Revenue","ROAS","CPA","CTR","CPM","CVR","Impressions","Clicks","Conversions"].join(","),...N.map(i=>{var L;return[((L=k[i.platform])==null?void 0:L.name)||i.platform,i.spend,i.revenue,i.roas,i.cpa,i.ctr,i.cpm,i.cvr,i.impressions,i.clicks,i.conversions].join(",")})].join(`
`),P=new Blob([$],{type:"text/csv"}),Q=window.URL.createObjectURL(P),t=document.createElement("a");t.href=Q,t.download=`platform-comparison-${new Date().toISOString().split("T")[0]}.csv`,t.click(),window.URL.revokeObjectURL(Q)};return z?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded mb-6"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(f=>e.jsx("div",{className:"h-20 bg-gray-200 rounded"},f))})]})})})}):D?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(Te,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Platform Comparison"}),e.jsx("p",{className:"text-red-700 mb-4",children:D instanceof Error?D.message:"An unexpected error occurred"}),e.jsx("button",{onClick:()=>M(),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Channel Performance Comparison"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Compare performance across advertising platforms to optimize budget allocation"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:B,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(Ms,{className:"w-5 h-5 mr-2"}),"Export CSV"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(kt,{className:"w-5 h-5 mr-2"}),"Export Chart"]})]})]})}),j&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Top Performer"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:(x=k[j.topPerformer.platform])==null?void 0:x.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[W(j.topPerformer.roas,2),"x ROAS"]})]}),e.jsx("div",{className:"text-4xl",children:(T=k[j.topPerformer.platform])==null?void 0:T.logo})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Spend"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:q(j.totalSpend)}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Across ",(N==null?void 0:N.length)||0," platforms"]})]}),e.jsx(Me,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Average ROAS"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[W(j.avgRoas,2),"x"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Portfolio performance"})]}),e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-bold",children:"Ã˜"})})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:R,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Efficiency View (per 1K impressions)"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Ht,{className:"w-4 h-4 mr-1"}),"Normalize metrics for fair comparison across spending levels"]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleTimeString()]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platform"}),["spend","revenue","roas","cpa","ctr","cpm","cvr"].map(f=>e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>U(f),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:f.toUpperCase()}),y===f?g==="desc"?e.jsx(Ss,{className:"w-4 h-4"}):e.jsx(Ls,{className:"w-4 h-4"}):e.jsx(ft,{className:"w-4 h-4 opacity-50"})]})},f)),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N==null?void 0:N.map(f=>{var $,P,Q;return e.jsxs(Fe.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>J(f.platform),className:"mr-3 p-1 hover:bg-gray-200 rounded transition-colors",children:d.has(f.platform)?e.jsx(Et,{className:"w-4 h-4 text-gray-500"}):e.jsx(Lt,{className:"w-4 h-4 text-gray-500"})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${(($=k[f.platform])==null?void 0:$.color)||"bg-gray-500"} flex items-center justify-center text-white text-xl mr-3`,children:((P=k[f.platform])==null?void 0:P.logo)||"ðŸ“Š"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((Q=k[f.platform])==null?void 0:Q.name)||f.platform}),e.jsxs("div",{className:"text-sm text-gray-500",children:[f.account_count," accounts â€¢ ",f.campaign_count," campaigns"]})]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q(b?f.spend/f.impressions*1e3:f.spend)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q(b?f.revenue/f.impressions*1e3:f.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("span",{className:f.roas>=2?"text-green-600":f.roas>=1.5?"text-yellow-600":"text-red-600",children:[W(f.roas,2),"x"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q(b?f.cpa/f.impressions*1e3:f.cpa)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Z(f.ctr)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q(f.cpm)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Z(f.cvr)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G(f.platform)})]}),d.has(f.platform)&&e.jsx(e.Fragment,{children:u(f.platform).map(t=>e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"ml-12 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mr-3"}),e.jsx("div",{className:"text-sm text-gray-700",children:t.account_name})]})}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:q(t.spend)}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:q(t.revenue)}),e.jsxs("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:[W(t.roas,2),"x"]}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:q(t.cpa)}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:Z(t.ctr)}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:q(t.cpm)}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:Z(t.cvr)}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap",children:e.jsx(Y,{to:`/w/${s}/campaigns?accounts=${t.account_id}`,className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"View Campaigns â†’"})})]},t.account_id))})]},f.platform)})})]})})}),j&&e.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Budget Allocation Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Recommendations"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Increase budget"})," for ",(O=k[j.topPerformer.platform])==null?void 0:O.name,"(ROAS: ",W(j.topPerformer.roas,2),"x)"]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Review and optimize"})," ",(K=k[j.bottomPerformer.platform])==null?void 0:K.name,"campaigns (ROAS: ",W(j.bottomPerformer.roas,2),"x)"]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Maintain current allocation"})," for platforms performing above ",W(j.avgRoas,2),"x ROAS"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Y,{to:`/w/${s}/campaigns?platforms=${j.topPerformer.platform}`,className:"block w-full text-left px-4 py-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors text-sm",children:["Analyze ",(H=k[j.topPerformer.platform])==null?void 0:H.name," top campaigns"]}),e.jsxs(Y,{to:`/w/${s}/campaigns?platforms=${j.bottomPerformer.platform}`,className:"block w-full text-left px-4 py-2 bg-yellow-50 text-yellow-700 rounded-lg hover:bg-yellow-100 transition-colors text-sm",children:["Troubleshoot ",(ee=k[j.bottomPerformer.platform])==null?void 0:ee.name," performance"]}),e.jsx(Y,{to:`/w/${s}/alerts`,className:"block w-full text-left px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors text-sm",children:"Set up performance alerts"})]})]})]})]}),!(N!=null&&N.length)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center border border-gray-100",children:[e.jsx(Me,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Platform Data Available"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Upload advertising data from multiple platforms to see performance comparisons and insights."}),e.jsx(Y,{to:`/w/${s}/upload`,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Upload Data"})]})]})})})},ws=()=>{var E,X,re,he,je,ve,w,V;const{workspace_id:s,campaign_id:n}=ue(),[l,a]=ce(),o=Pe(),d=ye(),h=A(S=>S.authentication_state.auth_token),b=A(S=>S.platform_filter),C=A(S=>S.add_toast_notification),[y,v]=r.useState(l.get("search_query")||""),[g,c]=r.useState(new Set),[k,N]=r.useState(new Set),[z,D]=r.useState(!1),M=parseInt(l.get("page")||"1"),u=parseInt(l.get("per_page")||"50"),j=l.get("sort_by")||"spend",U=l.get("sort_order")||"desc",R=l.get("status_filter")||"",J=l.get("platforms")||"",q=l.get("accounts")||"",W=J?J.split(","):b.selected_platforms,Z=q?q.split(","):b.selected_accounts,G=async()=>{if(!s||!h)throw new Error("Missing workspace or auth token");const S=new URLSearchParams({page:M.toString(),per_page:u.toString(),sort_by:j,sort_order:U});return y&&S.append("search_query",y),R&&S.append("status_filter",R),W.length>0&&S.append("platforms",W.join(",")),Z.length>0&&S.append("accounts",Z.join(",")),(await F.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/campaigns?${S}`,{headers:{Authorization:`Bearer ${h}`}})).data},B=async S=>{if(!s||!h)throw new Error("Missing workspace or auth token");return(await F.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/campaigns/${S}`,{headers:{Authorization:`Bearer ${h}`}})).data},x=ne({queryKey:["campaigns",s,M,u,j,U,y,R,W,Z],queryFn:G,enabled:!!s&&!!h&&!n,staleTime:3e4,refetchOnWindowFocus:!1}),T=ne({queryKey:["campaign-details",s,n],queryFn:()=>B(n),enabled:!!s&&!!h&&!!n,staleTime:3e4,refetchOnWindowFocus:!1}),O=r.useCallback(S=>{const ae=new URLSearchParams(l);Object.entries(S).forEach(([se,oe])=>{oe===null||oe===""?ae.delete(se):ae.set(se,oe)}),a(ae)},[l,a]),K=r.useCallback(S=>{v(S),O({search_query:S,page:"1"})},[O]),H=r.useCallback(S=>{O({sort_by:S,sort_order:j===S&&U==="desc"?"asc":"desc",page:"1"})},[j,U,O]),ee=r.useCallback(S=>{O({page:S.toString()})},[O]),f=r.useCallback(S=>{c(ae=>{const se=new Set(ae);return se.has(S)?se.delete(S):se.add(S),se})},[]),$=r.useCallback(S=>{N(ae=>{const se=new Set(ae);return se.has(S)?se.delete(S):se.add(S),se})},[]),P=r.useCallback(()=>{if(!x.data)return;const S=x.data.data.map(se=>se.id),ae=S.every(se=>k.has(se));N(ae?new Set:new Set(S))},[x.data,k]),Q=te({mutationFn:async({campaignIds:S,status:ae})=>{const se=S.map(oe=>F.put(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/campaigns/${oe}`,{status:ae},{headers:{Authorization:`Bearer ${h}`}}));return Promise.all(se)},onSuccess:()=>{o.invalidateQueries({queryKey:["campaigns",s]}),C({type:"success",message:"Campaigns updated successfully",auto_dismiss:!0}),N(new Set)},onError:()=>{C({type:"error",message:"Failed to update campaigns",auto_dismiss:!0})}}),t=S=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(S),i=S=>`${S.toFixed(2)}%`,L=S=>{switch(S){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},p=(S,ae)=>S>ae?e.jsx(Ys,{className:"w-4 h-4 text-green-500"}):S<ae?e.jsx(Gs,{className:"w-4 h-4 text-red-500"}):e.jsx(Qs,{className:"w-4 h-4 text-gray-400"}),m=({campaign:S,level:ae})=>{const se=g.has(S.id),oe=k.has(S.id),De=pe=>{pe.target.closest('input[type="checkbox"]')||d(`/w/${s}/campaigns/${S.id}`)};return e.jsx(e.Fragment,{children:e.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 cursor-pointer ${oe?"bg-blue-50":""}`,onClick:De,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center",style:{paddingLeft:`${ae*20}px`},children:[e.jsx("input",{type:"checkbox",checked:oe,onChange:pe=>{pe.stopPropagation(),$(S.id)},className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),f(S.id)},className:"ml-2 p-1 text-gray-400 hover:text-gray-600",children:se?e.jsx(Hs,{className:"w-4 h-4"}):e.jsx(Oe,{className:"w-4 h-4"})}),e.jsxs("div",{className:"ml-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:S.campaign_name||`Campaign ${S.campaign_id}`}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["ID: ",S.campaign_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(S.status)}`,children:S.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t(Number(S.spend))}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(S.impressions).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(S.clicks).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Number(S.conversions).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t(Number(S.revenue))}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[i(Number(S.ctr)),p(Number(S.ctr),2.5)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t(Number(S.cpm))}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Number(S.roas).toFixed(2),"x"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:pe=>{pe.stopPropagation()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ks,{className:"w-5 h-5"})})})]})})};return n?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsx("div",{className:"flex items-center",children:e.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-4",children:[e.jsx("li",{children:e.jsx(Y,{to:`/w/${s}`,className:"text-gray-400 hover:text-gray-500",children:"Overview"})}),e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:"flex-shrink-0 h-5 w-5 text-gray-400"}),e.jsx(Y,{to:`/w/${s}/campaigns`,className:"ml-4 text-gray-400 hover:text-gray-500",children:"Campaigns"})]})}),e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:"flex-shrink-0 h-5 w-5 text-gray-400"}),e.jsx("span",{className:"ml-4 text-gray-900 font-medium",children:((X=(E=T.data)==null?void 0:E.campaign)==null?void 0:X.campaign_name)||"Campaign Details"})]})})]})})})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:T.isLoading?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]}):T.error?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-600 mb-4",children:"Failed to load campaign details"}),e.jsx("button",{onClick:()=>T.refetch(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Try Again"})]}):e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:((he=(re=T.data)==null?void 0:re.campaign)==null?void 0:he.campaign_name)||"Campaign Details"}),e.jsx("p",{className:"text-gray-600",children:"Campaign details view would be implemented here with ad sets and ads hierarchy."})]})})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),e.jsxs("span",{className:"ml-3 text-sm text-gray-500",children:[((je=x.data)==null?void 0:je.pagination.total)||0," campaigns"]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:k.size>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[k.size," selected"]}),e.jsxs("button",{onClick:()=>Q.mutate({campaignIds:Array.from(k),status:"active"}),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Us,{className:"w-4 h-4 mr-1"}),"Activate"]}),e.jsxs("button",{onClick:()=>Q.mutate({campaignIds:Array.from(k),status:"paused"}),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4 mr-1"}),"Pause"]}),e.jsxs("button",{className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Ge,{className:"w-4 h-4 mr-1"}),"Export"]})]})})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-lg",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(_s,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:y,onChange:S=>K(S.target.value),placeholder:"Search campaigns, IDs, creative names...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("button",{onClick:()=>D(!z),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Filters",(R||W.length>0||Z.length>0)&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[R,...W,...Z].filter(Boolean).length})]})]})}),z&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:R,onChange:S=>O({status_filter:S.target.value,page:"1"}),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platforms"}),e.jsx("div",{className:"space-y-2",children:["facebook","tiktok","snapchat","google"].map(S=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:W.includes(S),onChange:ae=>{const se=ae.target.checked?[...W,S]:W.filter(oe=>oe!==S);O({platforms:se.join(","),page:"1"})},className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 capitalize",children:S})]},S))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Performance"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",placeholder:"Min ROAS",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),e.jsx("input",{type:"number",placeholder:"Min Spend",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{a(new URLSearchParams),v("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Clear All"}),e.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Apply Filters"})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:x.isLoading?e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"animate-pulse p-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(10)].map((S,ae)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},ae))})]})}):x.error?e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:"Failed to load campaigns"}),e.jsx("button",{onClick:()=>x.refetch(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Try Again"})]}):(ve=x.data)!=null&&ve.data.length?e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[e.jsx("input",{type:"checkbox",checked:((w=x.data)==null?void 0:w.data.length)>0&&x.data.data.every(S=>k.has(S.id)),onChange:P,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2",children:"Campaign"})]}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("spend"),children:e.jsxs("div",{className:"flex items-center",children:["Spend",e.jsx(fe,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("impressions"),children:e.jsxs("div",{className:"flex items-center",children:["Impressions",e.jsx(fe,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("clicks"),children:e.jsxs("div",{className:"flex items-center",children:["Clicks",e.jsx(fe,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("conversions"),children:e.jsxs("div",{className:"flex items-center",children:["Conversions",e.jsx(fe,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("revenue"),children:e.jsxs("div",{className:"flex items-center",children:["Revenue",e.jsx(fe,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("ctr"),children:e.jsxs("div",{className:"flex items-center",children:["CTR",e.jsx(fe,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("cpm"),children:e.jsxs("div",{className:"flex items-center",children:["CPM",e.jsx(fe,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("roas"),children:e.jsxs("div",{className:"flex items-center",children:["ROAS",e.jsx(fe,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(V=x.data)==null?void 0:V.data.map(S=>e.jsx(m,{campaign:S,level:0},S.id))})]})}),x.data&&x.data.pagination.total_pages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>ee(M-1),disabled:M===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>ee(M+1),disabled:M===x.data.pagination.total_pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(M-1)*u+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(M*u,x.data.pagination.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:x.data.pagination.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>ee(M-1),disabled:M===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(Math.min(5,x.data.pagination.total_pages))].map((S,ae)=>{const se=M-2+ae;return se<1||se>x.data.pagination.total_pages?null:e.jsx("button",{onClick:()=>ee(se),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${se===M?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:se},se)}),e.jsx("button",{onClick:()=>ee(M+1),disabled:M===x.data.pagination.total_pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})]}):e.jsxs("div",{className:"bg-white shadow rounded-lg p-12 text-center",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"No campaigns found"}),e.jsxs(Y,{to:`/w/${s}/upload`,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(Vs,{className:"w-4 h-4 mr-2"}),"Upload Campaign Data"]})]})})]})})},ba=async(s,n,l)=>{const a=new URLSearchParams;return Object.entries(n).forEach(([d,h])=>{h!=null&&h!==""&&a.append(d,h.toString())}),(await F.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/creatives?${a}`,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}})).data},ke=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),Re=s=>s===null?"N/A":`${s.toFixed(2)}%`,$e=s=>new Intl.NumberFormat("en-US").format(s),We=s=>s===null?"text-gray-500":s>=3?"text-green-600":s>=2?"text-yellow-600":"text-red-600",Be=s=>{const n=s.avg_roas||0;return n>=3?"winner":n<1.5?"loser":"average"},ya=()=>{const{workspace_id:s}=ue(),[n,l]=ce(),[a,o]=r.useState(null),[d,h]=r.useState(!1),[b,C]=r.useState(""),[y,v]=r.useState(new Set),[g,c]=r.useState(!1),[k,N]=r.useState(!1),z=A(i=>i.authentication_state.auth_token),D=A(i=>i.date_range_filter),M=A(i=>i.platform_filter),u=n.get("performance_filter")||"all",j=n.get("sort_by")||"total_spend",U=n.get("sort_order")||"desc",R=n.get("platforms")||"",J=n.get("creative_tags")||"",q=r.useMemo(()=>({performance_filter:u,sort_by:j,sort_order:U,platforms:R||M.selected_platforms.join(","),creative_tags:J,date_from:n.get("date_from")||D.date_from||void 0,date_to:n.get("date_to")||D.date_to||void 0,query:b,limit:50,offset:0}),[u,j,U,R,J,M.selected_platforms,D.date_from,D.date_to,b,n]),{data:W,isLoading:Z,error:G,refetch:B}=ne({queryKey:["creatives",s,q],queryFn:()=>ba(s,q,z),enabled:!!(s&&z),staleTime:6e4,refetchOnWindowFocus:!1}),x=(i,L)=>{const p=new URLSearchParams(n);L?p.set(i,L):p.delete(i),l(p)},T=i=>{x("performance_filter",i==="all"?"":i)},O=i=>{o(i),h(!0)},K=()=>{o(null),h(!1)},H=i=>{const L=new Set(y);L.has(i)?L.delete(i):L.add(i),v(L)},ee=()=>{y.size>=2&&N(!0)},f=()=>{N(!1)},$=()=>{v(new Set),c(!1)},P=r.useMemo(()=>Q.filter(i=>y.has(i.id)),[Q,y]),Q=r.useMemo(()=>W!=null&&W.data?u==="all"?W.data:W.data.filter(i=>{const L=Be(i);return u==="winners"?L==="winner":L==="loser"}):[],[W==null?void 0:W.data,u]),t=r.useMemo(()=>{if(!(W!=null&&W.data))return{winners:0,losers:0,total:0};const i=W.data.filter(p=>Be(p)==="winner").length,L=W.data.filter(p=>Be(p)==="loser").length;return{winners:i,losers:L,total:W.data.length}},[W==null?void 0:W.data]);return s?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Creative Performance"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Analyze and optimize your creative assets across all campaigns"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>c(!g),className:`inline-flex items-center px-4 py-2 border shadow-sm text-sm font-medium rounded-lg transition-colors ${g?"border-blue-600 text-blue-600 bg-blue-50 hover:bg-blue-100":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50"}`,children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),g?"Exit Compare Mode":"Compare Creatives"]}),e.jsx(Y,{to:`/w/${s}/campaigns`,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"View Campaigns"})]})]})})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>T("all"),className:`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${u==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["All Creatives (",t.total,")"]}),e.jsxs("button",{onClick:()=>T("winners"),className:`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${u==="winners"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Top Performers (",t.winners,")"]}),e.jsxs("button",{onClick:()=>T("losers"),className:`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${u==="losers"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Bottom Performers (",t.losers,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[g&&y.size>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-4 py-2 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[y.size," selected"]}),e.jsx("button",{onClick:$,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Clear"})]}),e.jsxs("button",{onClick:ee,disabled:y.size<2,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white transition-colors ${y.size>=2?"bg-blue-600 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed"}`,children:["Compare (",y.size,")"]})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Search creatives...",value:b,onChange:i=>C(i.target.value),className:"w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsxs("select",{value:`${j}-${U}`,onChange:i=>{const[L,p]=i.target.value.split("-");x("sort_by",L),x("sort_order",p)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"total_spend-desc",children:"Spend (High to Low)"}),e.jsx("option",{value:"total_spend-asc",children:"Spend (Low to High)"}),e.jsx("option",{value:"avg_roas-desc",children:"ROAS (High to Low)"}),e.jsx("option",{value:"avg_roas-asc",children:"ROAS (Low to High)"}),e.jsx("option",{value:"campaign_count-desc",children:"Campaigns (Most)"}),e.jsx("option",{value:"campaign_count-asc",children:"Campaigns (Least)"}),e.jsx("option",{value:"last_seen_date-desc",children:"Recently Used"}),e.jsx("option",{value:"creative_name-asc",children:"Name (A-Z)"})]})]})]})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Z?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading creatives..."})]}):G?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Error loading creatives"}),e.jsx("p",{className:"text-red-600 mb-4",children:G instanceof Error?G.message:"Failed to load creative performance data"}),e.jsx("button",{onClick:()=>B(),className:"inline-flex items-center px-4 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:"Try Again"})]}):Q.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-24 w-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No creatives found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:u==="all"?"Upload some campaign data to start analyzing creative performance.":`No ${u} found with the current filters.`}),u==="all"&&e.jsx(Y,{to:`/w/${s}/upload`,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"Upload Campaign Data"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Q.map(i=>{const L=Be(i),p=We(i.avg_roas);return e.jsxs("div",{onClick:m=>{g?(m.stopPropagation(),H(i.id)):O(i)},className:`bg-white rounded-xl shadow-lg border overflow-hidden hover:shadow-xl transition-all duration-200 cursor-pointer group relative ${y.has(i.id)?"border-blue-500 ring-2 ring-blue-500":"border-gray-200"}`,children:[g&&e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx("input",{type:"checkbox",checked:y.has(i.id),onChange:()=>H(i.id),className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",onClick:m=>m.stopPropagation()})}),e.jsxs("div",{className:"relative h-48 bg-gray-100",children:[i.creative_thumb_url?e.jsx("img",{src:i.creative_thumb_url,alt:i.creative_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("svg",{className:"h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L==="winner"?"bg-green-100 text-green-800":L==="loser"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:L==="winner"?"Winner":L==="loser"?"Loser":"Average"})}),i.ad_format&&e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:i.ad_format.replace("_"," ")})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 truncate",title:i.creative_name,children:i.creative_name}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:i.platforms.map(m=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",children:m.charAt(0).toUpperCase()+m.slice(1)},m))}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Spend"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:ke(i.total_spend)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"ROAS"}),e.jsx("span",{className:`text-sm font-medium ${p}`,children:i.avg_roas?`${i.avg_roas.toFixed(2)}x`:"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"CTR"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:Re(i.avg_ctr)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Campaigns"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:i.campaign_count})]})]}),i.creative_tags&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:i.creative_tags.split(",").slice(0,2).map((m,E)=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-50 text-blue-700",children:m.trim()},E))})})]})]},i.id)})})}),d&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Creative Details"}),e.jsx("button",{onClick:K,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Creative Preview"}),e.jsx("div",{className:"bg-gray-100 rounded-lg h-64 flex items-center justify-center mb-4",children:a.creative_thumb_url?e.jsx("img",{src:a.creative_thumb_url,alt:a.creative_name,className:"max-h-full max-w-full object-contain rounded-lg"}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"h-16 w-16 text-gray-400 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"text-gray-500",children:"No preview available"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Name:"}),e.jsx("p",{className:"text-gray-900",children:a.creative_name})]}),a.ad_format&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Format:"}),e.jsx("p",{className:"text-gray-900",children:a.ad_format.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Platforms:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.platforms.map(i=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",children:i.charAt(0).toUpperCase()+i.slice(1)},i))})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Spend"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:ke(a.total_spend)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Revenue"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:ke(a.total_revenue)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"ROAS"}),e.jsx("p",{className:`text-xl font-semibold ${We(a.avg_roas)}`,children:a.avg_roas?`${a.avg_roas.toFixed(2)}x`:"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"CPA"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:a.avg_cpa?ke(a.avg_cpa):"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"CTR"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:Re(a.avg_ctr)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Campaigns"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:a.campaign_count})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Impressions:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:$e(a.total_impressions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Clicks:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:$e(a.total_clicks)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Conversions:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:$e(a.total_conversions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"CVR:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:Re(a.avg_cvr)})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Usage"}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("p",{className:"text-blue-800",children:["This creative is being used in ",e.jsx("strong",{children:a.campaign_count})," campaigns from ",e.jsx("strong",{children:new Date(a.first_seen_date).toLocaleDateString()})," to ",e.jsx("strong",{children:new Date(a.last_seen_date).toLocaleDateString()})]}),e.jsxs(Y,{to:`/w/${s}/campaigns?creative_filter=${a.id}`,className:"inline-flex items-center mt-3 text-sm font-medium text-blue-600 hover:text-blue-500",children:["View campaigns using this creative",e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),a.creative_tags&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.creative_tags.split(",").map((i,L)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:i.trim()},L))})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end space-x-3 border-t border-gray-200",children:[e.jsx("button",{onClick:K,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Close"}),e.jsx(Y,{to:`/w/${s}/campaigns?creative_filter=${a.id}`,className:"px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"View Campaigns"})]})]})}),k&&P.length>=2&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Creative Comparison (",P.length," creatives)"]}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50",children:"Metric"}),P.map(i=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[200px]",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-gray-900 normal-case truncate",title:i.creative_name,children:i.creative_name}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:i.platforms.map(L=>L.charAt(0).toUpperCase()+L.slice(1)).join(", ")})]})},i.id))]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white",children:"Preview"}),P.map(i=>e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-32 w-full bg-gray-100 rounded-lg overflow-hidden",children:i.creative_thumb_url?e.jsx("img",{src:i.creative_thumb_url,alt:i.creative_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})})},i.id))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-gray-50",children:"Total Spend"}),P.map(i=>{const L=Math.max(...P.map(m=>m.total_spend)),p=i.total_spend===L;return e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${p?"font-bold text-blue-600":"text-gray-900"}`,children:ke(i.total_spend)},i.id)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white",children:"Revenue"}),P.map(i=>{const L=Math.max(...P.map(m=>m.total_revenue)),p=i.total_revenue===L;return e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${p?"font-bold text-green-600":"text-gray-900"}`,children:ke(i.total_revenue)},i.id)})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-gray-50",children:"ROAS"}),P.map(i=>{const L=Math.max(...P.map(m=>m.avg_roas||0)),p=i.avg_roas===L;return e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${p?"font-bold text-green-600":We(i.avg_roas)}`,children:i.avg_roas?`${i.avg_roas.toFixed(2)}x`:"N/A"},i.id)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white",children:"CPA"}),P.map(i=>{const L=Math.min(...P.map(m=>m.avg_cpa||1/0)),p=i.avg_cpa===L;return e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${p?"font-bold text-green-600":"text-gray-900"}`,children:i.avg_cpa?ke(i.avg_cpa):"N/A"},i.id)})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-gray-50",children:"CTR"}),P.map(i=>{const L=Math.max(...P.map(m=>m.avg_ctr||0)),p=i.avg_ctr===L;return e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${p?"font-bold text-green-600":"text-gray-900"}`,children:Re(i.avg_ctr)},i.id)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white",children:"CVR"}),P.map(i=>{const L=Math.max(...P.map(m=>m.avg_cvr||0)),p=i.avg_cvr===L;return e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${p?"font-bold text-green-600":"text-gray-900"}`,children:Re(i.avg_cvr)},i.id)})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-gray-50",children:"Impressions"}),P.map(i=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$e(i.total_impressions)},i.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white",children:"Clicks"}),P.map(i=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$e(i.total_clicks)},i.id))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-gray-50",children:"Conversions"}),P.map(i=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$e(i.total_conversions)},i.id))]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white",children:"Campaigns"}),P.map(i=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.campaign_count},i.id))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-gray-50",children:"Ad Format"}),P.map(i=>{var L;return e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((L=i.ad_format)==null?void 0:L.replace("_"," "))||"N/A"},i.id)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white",children:"First Seen"}),P.map(i=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(i.first_seen_date).toLocaleDateString()},i.id))]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-gray-50",children:"Last Seen"}),P.map(i=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(i.last_seen_date).toLocaleDateString()},i.id))]})]})]})})}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-between items-center border-t border-gray-200",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Best performers are highlighted in ",e.jsx("span",{className:"font-bold text-green-600",children:"green"})]}),e.jsx("button",{onClick:f,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Close"})]})]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Workspace not found"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Please select a valid workspace."})]})})})},ja=()=>{const{workspace_id:s}=ue(),[n,l]=ce(),a=Pe(),o=A(x=>x.authentication_state.auth_token),d=A(x=>x.upload_state),[h,b]=r.useState(null),[C,y]=r.useState(!1),v={status_filter:n.get("status_filter"),platform_filter:n.get("platform_filter"),search_query:n.get("search_query")},g=parseInt(n.get("page")||"1"),c=10,k=()=>"https://123ad-performance.launchpulse.ai",{data:N,isLoading:z,error:D,refetch:M}=ne({queryKey:["upload_history",s,v,g],queryFn:async()=>{const x=new URLSearchParams;return v.status_filter&&x.append("status_filter",v.status_filter),v.platform_filter&&x.append("platform_filter",v.platform_filter),v.search_query&&x.append("search_query",v.search_query),x.append("page",g.toString()),x.append("limit",c.toString()),(await F.get(`${k()}/api/workspaces/${s}/uploads?${x.toString()}`,{headers:{Authorization:`Bearer ${o}`}})).data},enabled:!!s&&!!o,staleTime:3e4,refetchInterval:5e3}),u=te({mutationFn:async x=>{await F.delete(`${k()}/api/workspaces/${s}/uploads/${x}`,{headers:{Authorization:`Bearer ${o}`}})},onSuccess:()=>{a.invalidateQueries({queryKey:["upload_history"]}),b(null),y(!1)}}),j=te({mutationFn:async x=>{await F.post(`${k()}/api/workspaces/${s}/uploads/${x}/reprocess`,{},{headers:{Authorization:`Bearer ${o}`}})},onSuccess:()=>{a.invalidateQueries({queryKey:["upload_history"]})}}),U=(x,T)=>{const O=new URLSearchParams(n);T?O.set(x,T):O.delete(x),O.delete("page"),l(O)},R=x=>{const T=new URLSearchParams(n);T.set("page",x.toString()),l(T)},J=({status:x,progress:T})=>{const K=(H=>{switch(H){case"queued":return{color:"bg-gray-100 text-gray-800",label:"Queued"};case"processing":return{color:"bg-blue-100 text-blue-800",label:"Processing"};case"completed":return{color:"bg-green-100 text-green-800",label:"Completed"};case"failed":return{color:"bg-red-100 text-red-800",label:"Failed"};default:return{color:"bg-gray-100 text-gray-800",label:H}}})(x);return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K.color}`,children:K.label}),x==="processing"&&T!==void 0&&e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${T}%`}})})]})},q=x=>{if(x===0)return"0 Bytes";const T=1024,O=["Bytes","KB","MB","GB"],K=Math.floor(Math.log(x)/Math.log(T));return parseFloat((x/Math.pow(T,K)).toFixed(2))+" "+O[K]},W=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Z=x=>{window.open(x,"_blank")},B=(()=>{if(!(N!=null&&N.data.length))return null;const x=N.data.length,T=N.data.filter(ee=>ee.status==="completed").length,O=N.data.filter(ee=>ee.status==="failed").length,K=N.data.filter(ee=>ee.status==="processing").length,H=x>0?T/x*100:0;return{total:x,completed:T,failed:O,processing:K,successRate:Math.round(H)}})();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage your data uploads and track processing status"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(Y,{to:`/w/${s}/upload`,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Upload New File"})})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[B&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Uploads"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B.total})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B.completed})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B.failed})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[B.successRate,"%"]})]})]})})]}),d.active_uploads.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 mb-8 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Uploads"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:d.active_uploads.map(x=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.filename}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:x.platform})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(J,{status:x.status,progress:x.progress}),e.jsxs("span",{className:"text-sm text-gray-500",children:[x.progress,"%"]})]})]})},x.id))})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 mb-8 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Files"}),e.jsx("input",{type:"text",placeholder:"Search by filename...",value:v.search_query||"",onChange:x=>U("search_query",x.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:v.status_filter||"",onChange:x=>U("status_filter",x.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"queued",children:"Queued"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform"}),e.jsxs("select",{value:v.platform_filter||"",onChange:x=>U("platform_filter",x.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Platforms"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"tiktok",children:"TikTok"}),e.jsx("option",{value:"snapchat",children:"Snapchat"}),e.jsx("option",{value:"google",children:"Google"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"twitter",children:"Twitter"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upload History"})}),z?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading uploads..."})]}):D?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"text-red-600 mb-2",children:e.jsx("svg",{className:"w-8 h-8 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Failed to load uploads"}),e.jsx("button",{onClick:()=>M(),className:"mt-2 text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Try again"})]}):N!=null&&N.data.length?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.data.map(x=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.original_filename}),e.jsx("p",{className:"text-sm text-gray-500",children:q(x.file_size)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"capitalize text-sm text-gray-900",children:x.platform})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(J,{status:x.status,progress:x.progress})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x.rows_total>0?e.jsxs("div",{children:[e.jsxs("p",{children:[x.rows_processed.toLocaleString()," / ",x.rows_total.toLocaleString()," rows"]}),x.rows_error>0&&e.jsxs("p",{className:"text-red-600 text-xs",children:[x.rows_error.toLocaleString()," errors"]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:W(x.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[x.status==="failed"&&e.jsx("button",{onClick:()=>j.mutate(x.id),disabled:j.isPending,className:"text-blue-600 hover:text-blue-500 disabled:opacity-50",title:"Reprocess Upload",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),x.error_log_url&&e.jsx("button",{onClick:()=>Z(x.error_log_url),className:"text-orange-600 hover:text-orange-500",title:"Download Error Log",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("button",{onClick:()=>{b(x),y(!0)},className:"text-red-600 hover:text-red-500",title:"Delete Upload",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},x.id))})]})}),N.pagination.total_pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(g-1)*c+1," to ",Math.min(g*c,N.pagination.total)," of ",N.pagination.total," uploads"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>R(g-1),disabled:g<=1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),Array.from({length:Math.min(5,N.pagination.total_pages)},(x,T)=>{const O=T+1;return e.jsx("button",{onClick:()=>R(O),className:`px-3 py-1 border rounded-md text-sm ${O===g?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:O},O)}),e.jsx("button",{onClick:()=>R(g+1),disabled:g>=N.pagination.total_pages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No uploads found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:Object.values(v).some(Boolean)?"No uploads match your current filters":"Get started by uploading your first file"}),e.jsx(Y,{to:`/w/${s}/upload`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Upload File"})]})]})]}),C&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Upload"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:['Are you sure you want to delete "',h.original_filename,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{y(!1),b(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>u.mutate(h.id),disabled:u.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:u.isPending?"Deleting...":"Delete"})]})]})})]})})},va=()=>{const{workspace_id:s}=ue(),[n]=ce(),l=ye(),a=Pe(),o=n.get("upload_id"),d=A(f=>f.authentication_state.auth_token),h=A(f=>f.current_workspace),b=A(f=>f.add_toast_notification),[C,y]=r.useState([]),[v,g]=r.useState([]),[c,k]=r.useState({}),[N,z]=r.useState({is_valid:!1,missing_required_fields:[],type_mismatches:[],warnings:[]}),[D,M]=r.useState({is_saving:!1,template_name:"",is_default:!1,is_shared:!1}),[u,j]=r.useState(""),[U,R]=r.useState(!1),J="https://123ad-performance.launchpulse.ai";r.useEffect(()=>{(!o||!s)&&l(`/w/${s}/uploads`)},[o,s,l]),r.useEffect(()=>{g([{field_name:"date",field_type:"string",required:!0,description:"Date in YYYY-MM-DD format"},{field_name:"spend",field_type:"number",required:!1,description:"Total spend amount"},{field_name:"impressions",field_type:"number",required:!1,description:"Number of impressions"},{field_name:"clicks",field_type:"number",required:!1,description:"Number of clicks"},{field_name:"conversions",field_type:"number",required:!1,description:"Number of conversions"},{field_name:"revenue",field_type:"number",required:!1,description:"Revenue generated"},{field_name:"campaign_id",field_type:"string",required:!1,description:"Campaign identifier"},{field_name:"adset_id",field_type:"string",required:!1,description:"Ad set identifier"},{field_name:"ad_id",field_type:"string",required:!1,description:"Ad identifier"},{field_name:"ctr",field_type:"number",required:!1,description:"Click-through rate"},{field_name:"cpm",field_type:"number",required:!1,description:"Cost per mille"},{field_name:"cpc",field_type:"number",required:!1,description:"Cost per click"},{field_name:"cpa",field_type:"number",required:!1,description:"Cost per acquisition"},{field_name:"cvr",field_type:"number",required:!1,description:"Conversion rate"},{field_name:"roas",field_type:"number",required:!1,description:"Return on ad spend"}])},[]);const{data:q,isLoading:W}=ne({queryKey:["upload",s,o],queryFn:async()=>(await F.get(`${J}/api/workspaces/${s}/uploads/${o}`,{headers:{Authorization:`Bearer ${d}`}})).data,enabled:!!(d&&s&&o),staleTime:6e4,retry:1}),{data:Z=[],isLoading:G}=ne({queryKey:["mapping-templates",s,q==null?void 0:q.platform],queryFn:async()=>{const f=await F.get(`${J}/api/workspaces/${s}/mapping-templates`,{headers:{Authorization:`Bearer ${d}`},params:{platform:q==null?void 0:q.platform}});return f.data.data||f.data},enabled:!!(d&&s&&(q!=null&&q.platform)),staleTime:3e5,retry:1});r.useEffect(()=>{q&&(y([{column_name:"Date",data_type:"string",sample_values:["2023-12-01","2023-12-02","2023-12-03"],confidence_score:.95},{column_name:"Campaign Name",data_type:"string",sample_values:["Black Friday Sale","Holiday Promo","Winter Collection"],confidence_score:.8},{column_name:"Amount Spent",data_type:"number",sample_values:["150.25","230.50","89.75"],confidence_score:.9},{column_name:"Impressions",data_type:"number",sample_values:["12543","18392","9876"],confidence_score:.95},{column_name:"Clicks",data_type:"number",sample_values:["234","456","178"],confidence_score:.9},{column_name:"Purchases",data_type:"number",sample_values:["12","23","8"],confidence_score:.85},{column_name:"Revenue",data_type:"number",sample_values:["450.00","890.50","234.75"],confidence_score:.88}]),k({Date:"date","Amount Spent":"spend",Impressions:"impressions",Clicks:"clicks",Purchases:"conversions",Revenue:"revenue"}))},[q]);const B=r.useCallback(()=>{const f=v.filter(L=>L.required).map(L=>L.field_name),$=Object.values(c),P=f.filter(L=>!$.includes(L)),Q=Object.entries(c).map(([L,p])=>{const m=C.find(X=>X.column_name===L),E=v.find(X=>X.field_name===p);return m&&E&&!(E.field_type==="string"||E.field_type==="number"&&m.data_type==="number")?{column:L,expected_type:E.field_type,detected_type:m.data_type}:null}).filter(Boolean),t=[];$.length<C.length&&t.push(`${C.length-$.length} columns remain unmapped`);const i={is_valid:P.length===0&&Q.length===0,missing_required_fields:P,type_mismatches:Q,warnings:t};z(i)},[c,C,v]);r.useEffect(()=>{B()},[B]);const x=(f,$)=>{k(P=>{const Q={...P};return $===""?delete Q[f]:(Object.keys(Q).forEach(t=>{Q[t]===$&&delete Q[t]}),Q[f]=$),Q})},T=f=>{const $=Z.find(P=>P.id===f);$&&(k($.mapping),j(f),b({type:"info",message:`Loaded template: ${$.name}`,auto_dismiss:!0}))},O=te({mutationFn:async f=>(await F.post(`${J}/api/workspaces/${s}/mapping-templates`,f,{headers:{Authorization:`Bearer ${d}`}})).data,onSuccess:()=>{a.invalidateQueries({queryKey:["mapping-templates"]}),b({type:"success",message:"Mapping template saved successfully",auto_dismiss:!0}),R(!1),M({is_saving:!1,template_name:"",is_default:!1,is_shared:!1})},onError:f=>{var $,P;b({type:"error",message:((P=($=f.response)==null?void 0:$.data)==null?void 0:P.message)||"Failed to save template",auto_dismiss:!0})}}),K=()=>{if(!D.template_name.trim()){b({type:"error",message:"Template name is required",auto_dismiss:!0});return}O.mutate({name:D.template_name,platform:q==null?void 0:q.platform,mapping:c,is_default:D.is_default,is_shared:D.is_shared,created_by:h==null?void 0:h.id})},H=te({mutationFn:async()=>(await F.put(`${J}/api/workspaces/${s}/uploads/${o}`,{mapping_template_id:u||null,mapping:c},{headers:{Authorization:`Bearer ${d}`}})).data,onSuccess:()=>{b({type:"success",message:"Mapping applied successfully. Processing upload...",auto_dismiss:!0}),l(`/w/${s}/uploads`)},onError:f=>{var $,P;b({type:"error",message:((P=($=f.response)==null?void 0:$.data)==null?void 0:P.message)||"Failed to apply mapping",auto_dismiss:!0})}}),ee=()=>{if(!N.is_valid){b({type:"error",message:"Please fix validation errors before continuing",auto_dismiss:!0});return}H.mutate()};return W?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading upload details..."})]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6",children:[e.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-4",children:[e.jsx("li",{children:e.jsx("div",{className:"flex items-center",children:e.jsxs("a",{href:`/w/${s}/uploads`,className:"text-gray-400 hover:text-gray-500",children:[e.jsx("svg",{className:"flex-shrink-0 h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Uploads"})]})})}),e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"flex-shrink-0 h-5 w-5 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"ml-4 text-sm font-medium text-gray-900",children:"Column Mapping"})]})})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Data Column Mapping"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Map your file columns to PulseDeck's standard fields for accurate data processing"}),q&&e.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("span",{className:"font-medium",children:"File:"})," ",q.original_filename,e.jsx("span",{className:"ml-4 font-medium",children:"Platform:"})," ",q.platform,e.jsx("span",{className:"ml-4 font-medium",children:"Size:"})," ",(q.file_size/1024/1024).toFixed(2)," MB"]})})]})})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"lg:col-span-5",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Detected Columns"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[C.length," columns found in your file"]})]}),e.jsx("div",{className:"p-6 space-y-4 max-h-96 overflow-y-auto",children:C.map((f,$)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:f.column_name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:f.data_type}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${f.confidence_score>=.9?"bg-green-400":f.confidence_score>=.7?"bg-yellow-400":"bg-red-400"}`}),e.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(f.confidence_score*100),"%"]})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Sample Values:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:f.sample_values.slice(0,3).map((P,Q)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-50 text-blue-700 rounded",children:P},Q))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Map to field:"}),e.jsxs("select",{value:c[f.column_name]||"",onChange:P=>x(f.column_name,P.target.value),className:"w-full text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select field..."}),v.map(P=>e.jsxs("option",{value:P.field_name,disabled:Object.values(c).includes(P.field_name)&&c[f.column_name]!==P.field_name,children:[P.field_name," ",P.required?"*":""," (",P.field_type,")"]},P.field_name))]})]})]},$))})]})}),e.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Mapping Templates"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Load existing template"}),e.jsxs("select",{value:u,onChange:f=>{j(f.target.value),f.target.value&&T(f.target.value)},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:G,children:[e.jsx("option",{value:"",children:"Select template..."}),Z.map(f=>e.jsxs("option",{value:f.id,children:[f.name," ",f.is_default?"(Default)":""]},f.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Save current mapping"}),e.jsx("button",{onClick:()=>R(!U),className:"w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors",children:"Save as Template"})]})]}),U&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name"}),e.jsx("input",{type:"text",value:D.template_name,onChange:f=>M($=>({...$,template_name:f.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter template name..."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:D.is_default,onChange:f=>M($=>({...$,is_default:f.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Set as default"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:D.is_shared,onChange:f=>M($=>({...$,is_shared:f.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Share with team"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:K,disabled:O.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:O.isPending?"Saving...":"Save Template"}),e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Target Schema Fields"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"PulseDeck's standard fields for analytics"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:v.map(f=>{const $=Object.keys(c).find(P=>c[P]===f.field_name);return e.jsxs("div",{className:`p-4 rounded-lg border-2 transition-colors ${$?"border-green-200 bg-green-50":f.required?"border-red-200 bg-red-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:[f.field_name,f.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:f.field_type})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:f.description}),$&&e.jsxs("div",{className:"flex items-center text-sm text-green-700",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Mapped from: ",$]})]},f.field_name)})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Mapping Validation"})}),e.jsx("div",{className:"p-6",children:N.is_valid?e.jsxs("div",{className:"flex items-center text-green-700 bg-green-50 p-4 rounded-lg",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Mapping is valid and ready for processing"]}):e.jsxs("div",{className:"space-y-4",children:[N.missing_required_fields.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Missing Required Fields:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-red-700",children:N.missing_required_fields.map((f,$)=>e.jsx("li",{children:f},$))})]}),N.type_mismatches.length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-2",children:"Type Mismatches:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-orange-700",children:N.type_mismatches.map((f,$)=>e.jsxs("li",{children:[f.column,": Expected ",f.expected_type,", found ",f.detected_type]},$))})]}),N.warnings.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Warnings:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-yellow-700",children:N.warnings.map((f,$)=>e.jsx("li",{children:f},$))})]})]})})]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>l(`/w/${s}/upload?step=2`),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Back to Upload"}),e.jsx("button",{onClick:ee,disabled:!N.is_valid||H.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:H.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Continue Processing"})]})]})]})})},wa=[{id:"facebook",name:"Meta (Facebook)",icon:"ðŸ“˜",description:"Facebook Ads Manager exports"},{id:"tiktok",name:"TikTok",icon:"ðŸŽµ",description:"TikTok Ads Manager exports"},{id:"snapchat",name:"Snapchat",icon:"ðŸ‘»",description:"Snapchat Ads Manager exports"}],Na=50*1024*1024,ka=[".csv",".xlsx"],_a=()=>{const{workspace_id:s}=ue(),[n,l]=ce(),a=r.useRef(null),o=A(t=>t.authentication_state.auth_token),d=A(t=>t.add_active_upload),h=A(t=>t.update_upload_progress),b=A(t=>t.complete_upload),C=A(t=>t.add_toast_notification),[y,v]=r.useState(1),[g,c]=r.useState([]),[k,N]=r.useState(""),[z,D]=r.useState({date_from:null,date_to:null}),[M,u]=r.useState(null),[j,U]=r.useState(null),[R,J]=r.useState({current_step:"",progress_percentage:0,estimated_completion:null,rows_processed:0,rows_total:0}),[q,W]=r.useState(!1);r.useEffect(()=>{const t=n.get("step");if(t){const i=parseInt(t);i>=1&&i<=5&&v(i)}},[n]);const Z=()=>"https://123ad-performance.launchpulse.ai",{data:G=[]}=ne({queryKey:["mapping-templates",s,k],queryFn:async()=>k?(await F.get(`${Z()}/api/workspaces/${s}/mapping-templates`,{headers:{Authorization:`Bearer ${o}`},params:{platform:k,limit:50}})).data.data||[]:[],enabled:!!k&&!!o&&!!s,staleTime:5*60*1e3}),B=r.useCallback(async t=>{try{const i=await F.get(`${Z()}/api/workspaces/${s}/uploads/${t}`,{headers:{Authorization:`Bearer ${o}`}});U(i.data),J({current_step:i.data.status,progress_percentage:i.data.progress,estimated_completion:null,rows_processed:i.data.rows_processed,rows_total:i.data.rows_total})}catch(i){console.error("Failed to fetch upload job:",i)}},[s,o]);r.useEffect(()=>{const t=n.get("upload_id");t&&!j&&B(t)},[n,B,j]);const x=te({mutationFn:async()=>{if(!g.length||!k)throw new Error("Missing required data");const t=new FormData;return t.append("file",g[0].file),t.append("platform",k),M!=null&&M.id&&t.append("mapping_template_id",M.id),z.date_from&&t.append("date_from",z.date_from),z.date_to&&t.append("date_to",z.date_to),(await F.post(`${Z()}/api/workspaces/${s}/uploads`,t,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}})).data},onSuccess:t=>{U(t),J({current_step:t.status,progress_percentage:t.progress,estimated_completion:null,rows_processed:t.rows_processed,rows_total:t.rows_total}),d({id:t.id,filename:t.original_filename,status:t.status,progress:t.progress,platform:t.platform}),l(i=>(i.set("upload_id",t.id),i.set("step","4"),i)),v(4),C({type:"success",message:"Upload started successfully",auto_dismiss:!0})},onError:t=>{var i,L;C({type:"error",message:((L=(i=t.response)==null?void 0:i.data)==null?void 0:L.message)||"Upload failed",auto_dismiss:!0})}}),{data:T}=ne({queryKey:["upload-progress",j==null?void 0:j.id],queryFn:async()=>j!=null&&j.id?(await F.get(`${Z()}/api/workspaces/${s}/uploads/${j.id}`,{headers:{Authorization:`Bearer ${o}`}})).data:null,enabled:!!(j!=null&&j.id)&&!!o,refetchInterval:t=>{var i,L,p,m;return((L=(i=t==null?void 0:t.state)==null?void 0:i.data)==null?void 0:L.status)==="completed"||((m=(p=t==null?void 0:t.state)==null?void 0:p.data)==null?void 0:m.status)==="failed"?!1:2e3}});r.useEffect(()=>{T&&(U(T),J({current_step:T.status,progress_percentage:T.progress,estimated_completion:null,rows_processed:T.rows_processed,rows_total:T.rows_total}),h(T.id,T.progress,T.status),(T.status==="completed"||T.status==="failed")&&(b(T.id,T.status),v(5),l(t=>(t.set("step","5"),t))))},[T,b,l,h]);const O=t=>{var L;if(t.size>Na)return{isValid:!1,error:"File size exceeds 50MB limit"};const i="."+((L=t.name.split(".").pop())==null?void 0:L.toLowerCase());return ka.includes(i)?{isValid:!0,error:null}:{isValid:!1,error:"Only CSV and XLSX files are allowed"}},K=r.useCallback(t=>{const i=Array.from(t);if(i.length===0){C({type:"error",message:"No files selected",auto_dismiss:!0});return}const L=i.map(m=>{const E=O(m);return{file:m,validation_status:E.isValid?"valid":"invalid",error_message:E.error,size:m.size,type:m.type}});c(L);const p=L.filter(m=>m.validation_status==="invalid");p.length>0&&C({type:"warning",message:`${p.length} file(s) failed validation`,auto_dismiss:!0})},[C]),H=r.useCallback(t=>{t.preventDefault(),W(!0)},[]),ee=r.useCallback(t=>{t.preventDefault(),W(!1)},[]),f=r.useCallback(t=>{t.preventDefault(),W(!1);const i=t.dataTransfer.files;i&&i.length>0?K(i):C({type:"error",message:"No files were dropped",auto_dismiss:!0})},[K,C]),$=t=>{v(t),l(i=>(i.set("step",t.toString()),i))},P=t=>{switch(t){case 2:return g.length>0&&g[0].validation_status==="valid";case 3:return!!k;case 4:return!!k&&g.length>0;default:return!0}},Q=t=>{if(t===0)return"0 Bytes";const i=1024,L=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(t)/Math.log(i));return parseFloat((t/Math.pow(i,p)).toFixed(2))+" "+L[p]};return r.useEffect(()=>{typeof window<"u"&&(window.__testHelpers={...window.__testHelpers,selectTestFile:(t="test-data.csv",i=`campaign_name,impressions,clicks
Test Campaign,1000,50
Another Campaign,2000,100`)=>{const L=new Blob([i],{type:"text/csv"}),p=new File([L],t,{type:"text/csv"});return K([p]),!0},selectPlatform:t=>t?(N(t),!0):!1,proceedToStep:t=>P(t)?($(t),!0):!1,startUpload:async()=>{if(P(4))try{return await x.mutateAsync(),!0}catch(t){return console.error("Test helper upload error:",t),!1}return!1},getCurrentStep:()=>y,hasValidFiles:()=>g.length>0&&g[0].validation_status==="valid",getSelectedPlatform:()=>k,canContinue:()=>P(y+1),getUploadState:()=>({step:y,hasFiles:g.length>0,platform:k,uploadJob:j,progress:R})})},[K,y,g,k,j,R,P,$,x]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("nav",{className:"text-sm text-gray-500 mb-4",children:[e.jsx(Y,{to:`/w/${s}`,className:"hover:text-blue-600 transition-colors",children:"Dashboard"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(Y,{to:`/w/${s}/uploads`,className:"hover:text-blue-600 transition-colors",children:"Uploads"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900",children:"Upload Wizard"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Data"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Follow the steps below to upload and process your advertising data"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("nav",{"aria-label":"Progress",children:e.jsx("ol",{className:"flex items-center",children:[{id:1,name:"Select Files",desc:"Choose your data files"},{id:2,name:"Choose Platform",desc:"Select data source"},{id:3,name:"Configure",desc:"Set options and mapping"},{id:4,name:"Processing",desc:"Upload and process data"},{id:5,name:"Complete",desc:"Review results"}].map((t,i)=>e.jsxs("li",{className:`relative ${i!==4?"pr-8 sm:pr-20":""}`,children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:i!==4&&e.jsx("div",{className:`h-0.5 w-full ${y>t.id?"bg-blue-600":"bg-gray-200"}`})}),e.jsx("button",{onClick:()=>P(t.id)&&$(t.id),disabled:!P(t.id),className:`relative w-8 h-8 flex items-center justify-center rounded-full border-2 ${y===t.id||y>t.id?"border-blue-600 bg-blue-600 text-white":"border-gray-300 bg-white text-gray-500"} ${P(t.id)?"hover:border-blue-400 cursor-pointer":"cursor-not-allowed"}`,children:y>t.id?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("span",{className:"text-sm font-medium",children:t.id})}),e.jsxs("div",{className:"ml-10 sm:ml-4 mt-2 sm:mt-0 sm:absolute sm:top-0 sm:left-10",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.desc})]})]},t.id))})})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[y===1&&e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Select Your Data Files"}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${q?"border-blue-500 bg-blue-50":g.length>0?"border-green-500 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:H,onDragLeave:ee,onDrop:f,"data-testid":"file-drop-zone","data-has-files":g.length>0,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 48 48",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Drop your files here"}),e.jsx("p",{className:"text-gray-600",children:"or click to browse"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:()=>{var t;return(t=a.current)==null?void 0:t.click()},className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Choose files to upload","data-testid":"file-upload-button",id:"file-upload-trigger-button",children:"Choose Files"}),e.jsx("input",{ref:a,type:"file",multiple:!0,accept:".csv,.xlsx",onChange:t=>{t.target.files&&t.target.files.length>0&&K(t.target.files)},className:"absolute inset-0 opacity-0 cursor-pointer","aria-label":"File upload input","data-testid":"file-upload-input",id:"file-upload-input",name:"file",title:"Upload file","data-automation-id":"file-input","data-step":"1",style:{width:"100%",height:"100%",zIndex:10}})]})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Supports CSV and XLSX files up to 50MB"})]}),g.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Selected Files"}),e.jsx("div",{className:"space-y-3",children:g.map((t,i)=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${t.validation_status==="valid"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${t.validation_status==="valid"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:t.validation_status==="valid"?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.file.name}),e.jsx("p",{className:"text-sm text-gray-600",children:Q(t.size)}),t.error_message&&e.jsx("p",{className:"text-sm text-red-600",children:t.error_message})]})]}),e.jsx("button",{onClick:()=>c(L=>L.filter((p,m)=>m!==i)),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},i))})]}),e.jsx("div",{className:"flex justify-end mt-8",children:e.jsx("button",{type:"button",onClick:()=>$(2),disabled:!P(2),"aria-label":"Continue to platform selection","aria-disabled":!P(2),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",id:"continue-to-platform-button","data-testid":"continue-button",children:"Continue"})})]}),y===2&&e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Choose Data Platform"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Select the advertising platform where your data originated from"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:wa.map(t=>e.jsxs("label",{className:"relative cursor-pointer",children:[e.jsx("input",{type:"radio",name:"platform",value:t.id,checked:k===t.id,onChange:i=>N(i.target.value),className:"sr-only"}),e.jsxs("div",{className:`p-6 rounded-xl border-2 transition-all hover:shadow-md ${k===t.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:t.icon}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]}),k===t.id&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]})]},t.id))}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("button",{type:"button",onClick:()=>$(1),"aria-label":"Go back to file selection",className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Back"}),e.jsx("button",{type:"button",onClick:()=>$(3),disabled:!P(3),"aria-label":"Continue to configuration","aria-disabled":!P(3),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Continue"})]})]}),y===3&&e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Configure Upload"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Date Range (Optional)"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Specify the date range for data validation and filtering"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_from",className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",id:"date_from",value:z.date_from||"",onChange:t=>D(i=>({...i,date_from:t.target.value||null})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_to",className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",id:"date_to",value:z.date_to||"",onChange:t=>D(i=>({...i,date_to:t.target.value||null})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Mapping Template (Optional)"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose a pre-configured mapping template for faster processing"}),G.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"mapping_template",checked:!M,onChange:()=>u(null),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Auto-detect columns (recommended)"})]}),G.map(t=>e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"radio",name:"mapping_template",checked:(M==null?void 0:M.id)===t.id,onChange:()=>u(t),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 mt-1"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.name}),t.is_default&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Default"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Platform: ",t.platform]})]})]},t.id))]}):e.jsxs("div",{className:"text-sm text-gray-500",children:["No mapping templates available for ",k,". Auto-detection will be used."]})]})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("button",{type:"button",onClick:()=>$(2),"aria-label":"Go back to platform selection",className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Back"}),e.jsx("button",{type:"button",onClick:()=>x.mutate(),disabled:x.isPending,"aria-label":"Start upload process","aria-disabled":x.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x.isPending?"Starting Upload...":"Start Upload"})]})]}),y===4&&e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Processing Upload"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[R.progress_percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${R.progress_percentage}%`}})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Status"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:R.current_step.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Rows Processed"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[R.rows_processed.toLocaleString()," / ",R.rows_total.toLocaleString()]})]})]})}),j&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-700 mb-4",children:"Upload Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Filename:"}),e.jsx("span",{className:"text-blue-900 font-medium",children:j.original_filename})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Platform:"}),e.jsx("span",{className:"text-blue-900 font-medium capitalize",children:j.platform})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"File Size:"}),e.jsx("span",{className:"text-blue-900 font-medium",children:Q(j.file_size)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Started:"}),e.jsx("span",{className:"text-blue-900 font-medium",children:new Date(j.created_at).toLocaleString()})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Processing Stages"}),e.jsx("div",{className:"space-y-3",children:[{stage:"queued",label:"Queued",desc:"Upload queued for processing"},{stage:"processing",label:"Processing",desc:"Parsing and validating data"},{stage:"completed",label:"Completed",desc:"Data successfully processed"}].map(t=>{const i=R.current_step===t.stage,L=["processing","completed"].includes(R.current_step)&&(["queued"].includes(t.stage)||t.stage==="processing"&&R.current_step==="completed");return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${L?"bg-green-100 text-green-600":i?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"}`,children:L?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):i?e.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-pulse"}):e.jsx("div",{className:"w-2 h-2 bg-current rounded-full"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:`text-sm font-medium ${L||i?"text-gray-900":"text-gray-500"}`,children:t.label}),e.jsx("p",{className:"text-xs text-gray-500",children:t.desc})]})]},t.stage)})})]})]})]}),y===5&&j&&e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"text-center mb-8",children:j.status==="completed"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Upload Completed!"}),e.jsx("p",{className:"text-gray-600",children:"Your data has been successfully processed and is now available in your dashboard."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Upload Failed"}),e.jsx("p",{className:"text-gray-600",children:"There was an issue processing your data. Please check the details below."})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Processing Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.rows_total.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Rows"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:j.rows_success.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600",children:"Successful"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:j.rows_error.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600",children:"Errors"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[j.progress,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Processed"})]})]})]}),j.status==="failed"&&j.error_text&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Error Details"}),e.jsx("p",{className:"text-red-700",children:j.error_text}),j.error_log_url&&e.jsxs("a",{href:j.error_log_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center mt-4 text-sm text-red-600 hover:text-red-500",children:["Download Error Log",e.jsx("svg",{className:"ml-1 w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:j.status==="completed"?e.jsxs(e.Fragment,{children:[e.jsx(Y,{to:`/w/${s}`,className:"inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"View Dashboard"}),e.jsx(Y,{to:`/w/${s}/campaigns`,className:"inline-flex items-center justify-center px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"View Campaigns"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{v(1),c([]),N(""),U(null),l({})},className:"inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Try Again"}),e.jsx(Y,{to:`/w/${s}/uploads`,className:"inline-flex items-center justify-center px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"View All Uploads"})]})})]})]})]})})})},Ca=()=>{const{workspace_id:s}=ue(),[n,l]=ce(),a=Pe(),o=A(w=>w.authentication_state.auth_token),d=A(w=>w.authentication_state.current_user),h=A(w=>w.add_toast_notification),[b,C]=r.useState("rules"),[y,v]=r.useState(null),[g,c]=r.useState(!1),[k,N]=r.useState(null),z=n.get("rule_status"),D=n.get("trigger_status"),M=n.get("alert_type"),u=n.get("date_from"),[j,U]=r.useState({name:"",metric:"spend",condition:"greater_than",threshold:null,threshold_percentage:null,time_window:"daily",platform_filter:null,account_filter:null,campaign_filter:null,severity:"warning",is_active:!0,notification_email:!0,notification_in_app:!0,cooldown_minutes:60}),[R,J]=r.useState(1),[q,W]=r.useState(1),Z=()=>"https://123ad-performance.launchpulse.ai",G=async(w=1)=>{const V=new URLSearchParams({limit:"10",offset:((w-1)*10).toString()});return z==="active"&&V.set("is_active","true"),z==="inactive"&&V.set("is_active","false"),M&&V.set("severity",M),(await F.get(`${Z()}/api/workspaces/${s}/alert-rules?${V}`,{headers:{Authorization:`Bearer ${o}`}})).data},B=async(w=1)=>{const V=new URLSearchParams({limit:"10",offset:((w-1)*10).toString()});return D==="resolved"&&V.set("is_resolved","true"),D==="unresolved"&&V.set("is_resolved","false"),(await F.get(`${Z()}/api/workspaces/${s}/alert-triggers?${V}`,{headers:{Authorization:`Bearer ${o}`}})).data},x=async w=>(await F.post(`${Z()}/api/workspaces/${s}/alert-rules`,{...w,workspace_id:s,created_by:d==null?void 0:d.id},{headers:{Authorization:`Bearer ${o}`}})).data,T=async(w,V)=>(await F.put(`${Z()}/api/workspaces/${s}/alert-rules/${w}`,V,{headers:{Authorization:`Bearer ${o}`}})).data,O=async w=>{await F.delete(`${Z()}/api/workspaces/${s}/alert-rules/${w}`,{headers:{Authorization:`Bearer ${o}`}})},K=async w=>(await F.put(`${Z()}/api/workspaces/${s}/alert-triggers/${w}`,{is_resolved:!0,resolved_by:d==null?void 0:d.id,resolved_at:new Date().toISOString()},{headers:{Authorization:`Bearer ${o}`}})).data,{data:H,isLoading:ee,error:f}=ne({queryKey:["alert-rules",s,R,z,M],queryFn:()=>G(R),enabled:!!s&&!!o&&b==="rules",staleTime:3e4}),{data:$,isLoading:P,error:Q}=ne({queryKey:["alert-triggers",s,q,D],queryFn:()=>B(q),enabled:!!s&&!!o&&b==="triggers",staleTime:3e4}),t=te({mutationFn:x,onSuccess:()=>{a.invalidateQueries({queryKey:["alert-rules"]}),h({type:"success",message:"Alert rule created successfully",auto_dismiss:!0}),C("rules"),m()},onError:w=>{var V,S;h({type:"error",message:((S=(V=w.response)==null?void 0:V.data)==null?void 0:S.message)||"Failed to create alert rule",auto_dismiss:!0})}}),i=te({mutationFn:({ruleId:w,ruleData:V})=>T(w,V),onSuccess:()=>{a.invalidateQueries({queryKey:["alert-rules"]}),h({type:"success",message:"Alert rule updated successfully",auto_dismiss:!0}),v(null),c(!1),m()},onError:w=>{var V,S;h({type:"error",message:((S=(V=w.response)==null?void 0:V.data)==null?void 0:S.message)||"Failed to update alert rule",auto_dismiss:!0})}}),L=te({mutationFn:O,onSuccess:()=>{a.invalidateQueries({queryKey:["alert-rules"]}),h({type:"success",message:"Alert rule deleted successfully",auto_dismiss:!0}),N(null)},onError:w=>{var V,S;h({type:"error",message:((S=(V=w.response)==null?void 0:V.data)==null?void 0:S.message)||"Failed to delete alert rule",auto_dismiss:!0})}}),p=te({mutationFn:K,onSuccess:()=>{a.invalidateQueries({queryKey:["alert-triggers"]}),h({type:"success",message:"Alert resolved successfully",auto_dismiss:!0})},onError:w=>{var V,S;h({type:"error",message:((S=(V=w.response)==null?void 0:V.data)==null?void 0:S.message)||"Failed to resolve alert",auto_dismiss:!0})}}),m=()=>{U({name:"",metric:"spend",condition:"greater_than",threshold:null,threshold_percentage:null,time_window:"daily",platform_filter:null,account_filter:null,campaign_filter:null,severity:"warning",is_active:!0,notification_email:!0,notification_in_app:!0,cooldown_minutes:60})},E=(w,V)=>{const S=new URLSearchParams(n);V?S.set(w,V):S.delete(w),l(S)},X=w=>{w.preventDefault(),g&&y?i.mutate({ruleId:y.id,ruleData:j}):t.mutate(j)},re=w=>{v(w),c(!0),U({name:w.name,metric:w.metric,condition:w.condition,threshold:w.threshold,threshold_percentage:w.threshold_percentage,time_window:w.time_window,platform_filter:w.platform_filter,account_filter:w.account_filter,campaign_filter:w.campaign_filter,severity:w.severity,is_active:w.is_active,notification_email:w.notification_email,notification_in_app:w.notification_in_app,cooldown_minutes:w.cooldown_minutes}),C("create")},he=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),je=w=>{switch(w){case"critical":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800";case"info":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},ve=w=>w?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Alert Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Configure alert rules and monitor triggered alerts for proactive performance monitoring"})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsx("button",{onClick:()=>{m(),c(!1),v(null),C("create")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Create Alert Rule"})})]})})})}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>C("rules"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="rules"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Alert Rules",H&&e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-600 py-0.5 px-2 rounded-full text-xs",children:H.pagination.total})]}),e.jsxs("button",{onClick:()=>C("triggers"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="triggers"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Alert History",$&&e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-600 py-0.5 px-2 rounded-full text-xs",children:$.pagination.total})]}),e.jsx("button",{onClick:()=>C("create"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="create"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:g?"Edit Rule":"Create Rule"})]})}),b==="rules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rule Status"}),e.jsxs("select",{value:z||"",onChange:w=>E("rule_status",w.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Severity"}),e.jsxs("select",{value:M||"",onChange:w=>E("alert_type",w.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Severities"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"info",children:"Info"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date From"}),e.jsx("input",{type:"date",value:u||"",onChange:w=>E("date_from",w.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Alert Rules"})}),ee?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading alert rules..."})]}):f?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Error loading alert rules. Please try again."})}):H!=null&&H.data.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rule Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric & Condition"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Severity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Triggered"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.data.map(w=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Cooldown: ",w.cooldown_minutes,"min"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[w.metric.toUpperCase()," ",w.condition.replace("_"," ")]}),e.jsx("div",{className:"text-sm text-gray-500",children:w.threshold!==null?`Threshold: ${w.threshold}`:`Percentage: ${w.threshold_percentage}%`})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${je(w.severity)}`,children:w.severity})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ve(w.is_active)}`,children:w.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.last_triggered_at?he(w.last_triggered_at):"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 justify-end",children:[e.jsx("button",{onClick:()=>re(w),className:"text-blue-600 hover:text-blue-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>{i.mutate({ruleId:w.id,ruleData:{is_active:!w.is_active}})},className:`transition-colors ${w.is_active?"text-yellow-600 hover:text-yellow-700":"text-green-600 hover:text-green-700"}`,children:w.is_active?"Disable":"Enable"}),e.jsx("button",{onClick:()=>N(w.id),className:"text-red-600 hover:text-red-700 transition-colors",children:"Delete"})]})})]},w.id))})]})}):e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No alert rules found. Create your first alert rule to get started."})}),H&&H.pagination.total_pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(R-1)*10+1," to ",Math.min(R*10,H.pagination.total)," of ",H.pagination.total," rules"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>J(w=>Math.max(1,w-1)),disabled:R===1,className:"px-3 py-2 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsx("button",{onClick:()=>J(w=>Math.min(H.pagination.total_pages,w+1)),disabled:R===H.pagination.total_pages,className:"px-3 py-2 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]}),b==="triggers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resolution Status"}),e.jsxs("select",{value:D||"",onChange:w=>E("trigger_status",w.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"unresolved",children:"Unresolved"}),e.jsx("option",{value:"resolved",children:"Resolved"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Alert History"})}),P?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading alert history..."})]}):Q?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Error loading alert history. Please try again."})}):$!=null&&$.data.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Triggered At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Affected Entity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.data.map(w=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:he(w.triggered_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.affected_entity_name||w.affected_entity_id}),e.jsx("div",{className:"text-sm text-gray-500",children:w.affected_entity_type})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:w.platform})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:["Value: ",w.metric_value]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Threshold: ",w.threshold_value]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w.is_resolved?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.is_resolved?"Resolved":"Unresolved"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:!w.is_resolved&&e.jsx("button",{onClick:()=>p.mutate(w.id),disabled:p.isPending,className:"text-green-600 hover:text-green-700 transition-colors disabled:opacity-50",children:p.isPending?"Resolving...":"Resolve"})})]},w.id))})]})}):e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No triggered alerts found."})}),$&&$.pagination.total_pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(q-1)*10+1," to ",Math.min(q*10,$.pagination.total)," of ",$.pagination.total," triggers"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>W(w=>Math.max(1,w-1)),disabled:q===1,className:"px-3 py-2 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsx("button",{onClick:()=>W(w=>Math.min($.pagination.total_pages,w+1)),disabled:q===$.pagination.total_pages,className:"px-3 py-2 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]}),b==="create"&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:g?"Edit Alert Rule":"Create New Alert Rule"}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Configure alert conditions and notification settings"})]}),e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rule Name *"}),e.jsx("input",{type:"text",value:j.name,onChange:w=>U(V=>({...V,name:w.target.value})),required:!0,placeholder:"e.g., High ROAS Drop Alert",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Severity *"}),e.jsxs("select",{value:j.severity,onChange:w=>U(V=>({...V,severity:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Metric *"}),e.jsxs("select",{value:j.metric,onChange:w=>U(V=>({...V,metric:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"spend",children:"Spend"}),e.jsx("option",{value:"impressions",children:"Impressions"}),e.jsx("option",{value:"clicks",children:"Clicks"}),e.jsx("option",{value:"conversions",children:"Conversions"}),e.jsx("option",{value:"revenue",children:"Revenue"}),e.jsx("option",{value:"ctr",children:"CTR"}),e.jsx("option",{value:"cpm",children:"CPM"}),e.jsx("option",{value:"cpc",children:"CPC"}),e.jsx("option",{value:"cpa",children:"CPA"}),e.jsx("option",{value:"cvr",children:"CVR"}),e.jsx("option",{value:"roas",children:"ROAS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Condition *"}),e.jsxs("select",{value:j.condition,onChange:w=>U(V=>({...V,condition:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"greater_than",children:"Greater Than"}),e.jsx("option",{value:"less_than",children:"Less Than"}),e.jsx("option",{value:"percentage_increase",children:"Percentage Increase"}),e.jsx("option",{value:"percentage_decrease",children:"Percentage Decrease"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Window *"}),e.jsxs("select",{value:j.time_window,onChange:w=>U(V=>({...V,time_window:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[j.condition==="greater_than"||j.condition==="less_than"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Threshold Value"}),e.jsx("input",{type:"number",step:"0.01",value:j.threshold||"",onChange:w=>U(V=>({...V,threshold:w.target.value?parseFloat(w.target.value):null,threshold_percentage:null})),placeholder:"e.g., 1000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Percentage Change (%)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:j.threshold_percentage||"",onChange:w=>U(V=>({...V,threshold_percentage:w.target.value?parseFloat(w.target.value):null,threshold:null})),placeholder:"e.g., 20",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cooldown (minutes) *"}),e.jsx("input",{type:"number",min:"1",value:j.cooldown_minutes,onChange:w=>U(V=>({...V,cooldown_minutes:parseInt(w.target.value)||60})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notification Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"notification_email",checked:j.notification_email,onChange:w=>U(V=>({...V,notification_email:w.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"notification_email",className:"ml-2 text-sm text-gray-700",children:"Send email notifications"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"notification_in_app",checked:j.notification_in_app,onChange:w=>U(V=>({...V,notification_in_app:w.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"notification_in_app",className:"ml-2 text-sm text-gray-700",children:"Send in-app notifications"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:j.is_active,onChange:w=>U(V=>({...V,is_active:w.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Activate rule immediately"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"submit",disabled:t.isPending||i.isPending,className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:t.isPending||i.isPending?"Saving...":g?"Update Rule":"Create Rule"}),e.jsx("button",{type:"button",onClick:()=>{m(),c(!1),v(null),C("rules")},className:"bg-gray-300 text-gray-700 px-6 py-2 rounded-lg font-medium hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Alert Rule"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this alert rule? This action cannot be undone."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>{L.mutate(k)},disabled:L.isPending,className:"bg-red-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-700 disabled:opacity-50 transition-colors",children:L.isPending?"Deleting...":"Delete"}),e.jsx("button",{onClick:()=>N(null),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})})]})})},Sa=()=>{var re,he,je,ve,w,V,S,ae,se,oe,De,pe,Xe,Je,es,ss,ts,as,rs;const{workspace_id:s}=ue(),[n,l]=ce(),a=Pe(),o=A(_=>_.authentication_state.current_user),d=A(_=>_.authentication_state.auth_token),h=A(_=>_.current_workspace),[b,C]=r.useState(n.get("section")||"workspace"),[y,v]=r.useState({workspace:!1,personal:!1,team:!1}),[g,c]=r.useState({workspace:{},personal:{},team_invitation:{email:"",role:"member"}}),[k,N]=r.useState(!1),[z,D]=r.useState(""),M=()=>"https://123ad-performance.launchpulse.ai",u=(h==null?void 0:h.role)||"member",j=u==="owner"||u==="admin",U=u==="owner"||u==="admin",R=u==="owner",J=async()=>(await F.get(`${M()}/api/workspaces/${s}`,{headers:{Authorization:`Bearer ${d}`}})).data,q=async()=>(await F.get(`${M()}/api/users/${o==null?void 0:o.id}/preferences`,{headers:{Authorization:`Bearer ${d}`}})).data,W=async()=>(await F.get(`${M()}/api/workspaces/${s}/members`,{headers:{Authorization:`Bearer ${d}`}})).data,Z=async()=>(await F.get(`${M()}/api/workspaces/${s}/invitations`,{headers:{Authorization:`Bearer ${d}`}})).data,G=ne({queryKey:["workspace-settings",s],queryFn:J,enabled:!!s&&!!d&&j,staleTime:5*60*1e3}),B=ne({queryKey:["user-preferences",o==null?void 0:o.id],queryFn:q,enabled:!!(o!=null&&o.id)&&!!d,staleTime:5*60*1e3}),x=ne({queryKey:["team-members",s],queryFn:W,enabled:!!s&&!!d&&U,staleTime:2*60*1e3}),T=ne({queryKey:["pending-invitations",s],queryFn:Z,enabled:!!s&&!!d&&U,staleTime:2*60*1e3}),O=te({mutationFn:async _=>(await F.put(`${M()}/api/workspaces/${s}`,_,{headers:{Authorization:`Bearer ${d}`}})).data,onSuccess:()=>{a.invalidateQueries({queryKey:["workspace-settings",s]}),v(_=>({..._,workspace:!1})),c(_=>({..._,workspace:{}}))}}),K=te({mutationFn:async _=>(await F.put(`${M()}/api/users/${o==null?void 0:o.id}/preferences`,_,{headers:{Authorization:`Bearer ${d}`}})).data,onSuccess:()=>{a.invalidateQueries({queryKey:["user-preferences",o==null?void 0:o.id]}),v(_=>({..._,personal:!1})),c(_=>({..._,personal:{}}))}}),H=te({mutationFn:async _=>(await F.post(`${M()}/api/workspaces/${s}/invitations`,_,{headers:{Authorization:`Bearer ${d}`}})).data,onSuccess:()=>{a.invalidateQueries({queryKey:["pending-invitations",s]}),c(_=>({..._,team_invitation:{email:"",role:"member"}}))}}),ee=te({mutationFn:async({member_id:_,role:I})=>(await F.put(`${M()}/api/workspaces/${s}/members/${_}`,{role:I},{headers:{Authorization:`Bearer ${d}`}})).data,onSuccess:()=>{a.invalidateQueries({queryKey:["team-members",s]})}}),f=te({mutationFn:async _=>{await F.delete(`${M()}/api/workspaces/${s}/members/${_}`,{headers:{Authorization:`Bearer ${d}`}})},onSuccess:()=>{a.invalidateQueries({queryKey:["team-members",s]})}}),$=te({mutationFn:async()=>{await F.delete(`${M()}/api/workspaces/${s}`,{headers:{Authorization:`Bearer ${d}`}})},onSuccess:()=>{window.location.href="/w/default"}}),P=_=>{C(_),l({section:_})},Q=_=>{if(_.preventDefault(),!G.data)return;const I={...G.data,...g.workspace};O.mutate(I)},t=_=>{if(_.preventDefault(),!B.data)return;const I={...B.data,...g.personal};K.mutate(I)},i=_=>{_.preventDefault(),H.mutate(g.team_invitation)},L=(_,I)=>{ee.mutate({member_id:_,role:I})},p=_=>{confirm("Are you sure you want to remove this team member?")&&f.mutate(_)},m=()=>{var _;z===((_=G.data)==null?void 0:_.name)&&$.mutate()};r.useEffect(()=>{y.workspace&&G.data&&c(_=>({..._,workspace:{...G.data}}))},[y.workspace,G.data]),r.useEffect(()=>{y.personal&&B.data&&c(_=>({..._,personal:{...B.data}}))},[y.personal,B.data]);const E=[{value:"USD",label:"USD ($)"},{value:"EUR",label:"EUR (â‚¬)"},{value:"GBP",label:"GBP (Â£)"}],X=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time"},{value:"America/Chicago",label:"Central Time"},{value:"America/Denver",label:"Mountain Time"},{value:"America/Los_Angeles",label:"Pacific Time"},{value:"Europe/London",label:"London"},{value:"Europe/Paris",label:"Paris"},{value:"Asia/Tokyo",label:"Tokyo"}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your workspace configuration and personal preferences"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("nav",{className:"space-y-1",children:[j&&e.jsx("button",{onClick:()=>P("workspace"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${b==="workspace"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Workspace"}),U&&e.jsx("button",{onClick:()=>P("team"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${b==="team"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Team"}),e.jsx("button",{onClick:()=>P("personal"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${b==="personal"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Personal"}),u==="owner"&&e.jsx("button",{onClick:()=>P("billing"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${b==="billing"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Billing"})]})}),e.jsxs("div",{className:"lg:col-span-9 mt-6 lg:mt-0",children:[b==="workspace"&&j&&e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Workspace Settings"}),y.workspace?e.jsx("div",{className:"space-x-2",children:e.jsx("button",{onClick:()=>v(_=>({..._,workspace:!1})),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-500",children:"Cancel"})}):e.jsx("button",{onClick:()=>v(_=>({..._,workspace:!0})),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Edit"})]})}),e.jsxs("div",{className:"px-6 py-6",children:[G.isLoading?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):y.workspace?e.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Workspace Name"}),e.jsx("input",{type:"text",value:g.workspace.name||"",onChange:_=>c(I=>({...I,workspace:{...I.workspace,name:_.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Currency"}),e.jsx("select",{value:g.workspace.default_currency||"USD",onChange:_=>c(I=>({...I,workspace:{...I.workspace,default_currency:_.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:E.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Revenue per Conversion"}),e.jsx("input",{type:"number",step:"0.01",value:g.workspace.default_revenue_per_conversion||"",onChange:_=>c(I=>({...I,workspace:{...I.workspace,default_revenue_per_conversion:_.target.value?parseFloat(_.target.value):null}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Used for calculating ROAS when revenue data is not available"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Timezone"}),e.jsx("select",{value:g.workspace.timezone||"UTC",onChange:_=>c(I=>({...I,workspace:{...I.workspace,timezone:_.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:X.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data Retention (Days)"}),e.jsxs("select",{value:g.workspace.data_retention_days||730,onChange:_=>c(I=>({...I,workspace:{...I.workspace,data_retention_days:parseInt(_.target.value)}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:90,children:"90 days"}),e.jsx("option",{value:180,children:"180 days"}),e.jsx("option",{value:365,children:"1 year"}),e.jsx("option",{value:730,children:"2 years"}),e.jsx("option",{value:1095,children:"3 years"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"How long to keep historical data before automatic deletion"})]}),e.jsx("div",{className:"flex justify-end space-x-3",children:e.jsx("button",{type:"submit",disabled:O.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:O.isPending?"Saving...":"Save Changes"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Workspace Name"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:(re=G.data)==null?void 0:re.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Default Currency"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:(he=G.data)==null?void 0:he.default_currency})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Default Revenue per Conversion"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:(je=G.data)!=null&&je.default_revenue_per_conversion?`${G.data.default_currency} ${G.data.default_revenue_per_conversion}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Timezone"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:(ve=G.data)==null?void 0:ve.timezone})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Data Retention"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[(w=G.data)==null?void 0:w.data_retention_days," days"]})]})]}),O.isError&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsx("p",{className:"text-sm",children:"Failed to update workspace settings. Please try again."})})]}),R&&e.jsx("div",{className:"px-6 py-6 border-t border-gray-200",children:e.jsxs("div",{className:"rounded-md bg-red-50 p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Once you delete a workspace, there is no going back. All data will be permanently lost."}),k?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-red-700",children:['Type the workspace name "',(V=G.data)==null?void 0:V.name,'" to confirm deletion:']}),e.jsx("input",{type:"text",value:z,onChange:_=>D(_.target.value),className:"block w-full px-3 py-2 border border-red-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:(S=G.data)==null?void 0:S.name}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:m,disabled:z!==((ae=G.data)==null?void 0:ae.name)||$.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:opacity-50",children:$.isPending?"Deleting...":"Delete Workspace"}),e.jsx("button",{onClick:()=>{N(!1),D("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>N(!0),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete Workspace"})]})})]}),b==="team"&&U&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Team Members"})}),e.jsx("div",{className:"px-6 py-6",children:x.isLoading?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(_=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]})]},_))}):e.jsx("div",{className:"space-y-4",children:(se=x.data)==null?void 0:se.map(_=>e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-800",children:_.user.name.split(" ").map(I=>I[0]).join("").substring(0,2)})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:_.user.name}),e.jsx("p",{className:"text-sm text-gray-500",children:_.user.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:_.membership.role,onChange:I=>L(_.membership.id,I.target.value),disabled:_.user.id===(o==null?void 0:o.id),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"owner",children:"Owner"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"member",children:"Member"})]}),_.user.id!==(o==null?void 0:o.id)&&e.jsx("button",{onClick:()=>p(_.membership.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]},_.membership.id))})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Invite Team Member"})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx("input",{type:"email",required:!0,value:g.team_invitation.email,onChange:_=>c(I=>({...I,team_invitation:{...I.team_invitation,email:_.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"colleague@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),e.jsxs("select",{value:g.team_invitation.role,onChange:_=>c(I=>({...I,team_invitation:{...I.team_invitation,role:_.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"member",children:"Member"})]})]}),e.jsx("button",{type:"submit",disabled:H.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:H.isPending?"Sending...":"Send Invitation"})]}),H.isError&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsx("p",{className:"text-sm",children:"Failed to send invitation. Please check the email address and try again."})})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Pending Invitations"})}),e.jsx("div",{className:"px-6 py-6",children:T.isLoading?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2].map(_=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},_))}):((oe=T.data)==null?void 0:oe.length)===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No pending invitations"}):e.jsx("div",{className:"space-y-4",children:(De=T.data)==null?void 0:De.map(_=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:_.email}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Role: ",_.role," â€¢ Expires: ",new Date(_.expires_at).toLocaleDateString()]})]}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending"})]},_.id))})})]})]}),b==="personal"&&e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Personal Preferences"}),y.personal?e.jsx("button",{onClick:()=>v(_=>({..._,personal:!1})),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-500",children:"Cancel"}):e.jsx("button",{onClick:()=>v(_=>({..._,personal:!0})),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Edit"})]})}),e.jsxs("div",{className:"px-6 py-6",children:[B.isLoading?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):y.personal?e.jsxs("form",{onSubmit:t,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.personal.email_notifications??!0,onChange:_=>c(I=>({...I,personal:{...I.personal,email_notifications:_.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-3 text-sm text-gray-700",children:"Email notifications"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.personal.in_app_notifications??!0,onChange:_=>c(I=>({...I,personal:{...I.personal,in_app_notifications:_.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-3 text-sm text-gray-700",children:"In-app notifications"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email frequency"}),e.jsxs("select",{value:g.personal.email_frequency||"immediate",onChange:_=>c(I=>({...I,personal:{...I.personal,email_frequency:_.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"immediate",children:"Immediate"}),e.jsx("option",{value:"daily",children:"Daily digest"}),e.jsx("option",{value:"weekly",children:"Weekly digest"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Display Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.personal.reduced_motion??!1,onChange:_=>c(I=>({...I,personal:{...I.personal,reduced_motion:_.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-3 text-sm text-gray-700",children:"Reduce motion (accessibility)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date format"}),e.jsxs("select",{value:g.personal.date_format||"YYYY-MM-DD",onChange:_=>c(I=>({...I,personal:{...I.personal,date_format:_.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"}),e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Number format"}),e.jsxs("select",{value:g.personal.number_format||"US",onChange:_=>c(I=>({...I,personal:{...I.personal,number_format:_.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"US",children:"US (1,234.56)"}),e.jsx("option",{value:"EU",children:"EU (1.234,56)"}),e.jsx("option",{value:"UK",children:"UK (1,234.56)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default dashboard view"}),e.jsxs("select",{value:g.personal.default_dashboard_view||"overview",onChange:_=>c(I=>({...I,personal:{...I.personal,default_dashboard_view:_.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"overview",children:"Overview"}),e.jsx("option",{value:"campaigns",children:"Campaigns"}),e.jsx("option",{value:"creatives",children:"Creatives"}),e.jsx("option",{value:"analytics",children:"Analytics"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Theme"}),e.jsxs("select",{value:g.personal.theme_preference||"dark",onChange:_=>c(I=>({...I,personal:{...I.personal,theme_preference:_.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"auto",children:"Auto"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:K.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:K.isPending?"Saving...":"Save Preferences"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Email notifications: ",(pe=B.data)!=null&&pe.email_notifications?"Enabled":"Disabled"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["In-app notifications: ",(Xe=B.data)!=null&&Xe.in_app_notifications?"Enabled":"Disabled"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Email frequency: ",(Je=B.data)==null?void 0:Je.email_frequency]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Display Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Reduced motion: ",(es=B.data)!=null&&es.reduced_motion?"Enabled":"Disabled"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Date format: ",(ss=B.data)==null?void 0:ss.date_format]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Number format: ",(ts=B.data)==null?void 0:ts.number_format]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Default dashboard: ",(as=B.data)==null?void 0:as.default_dashboard_view]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Theme: ",(rs=B.data)==null?void 0:rs.theme_preference]})]})]})]}),K.isError&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsx("p",{className:"text-sm",children:"Failed to update preferences. Please try again."})})]})]}),b==="billing"&&u==="owner"&&e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Billing"})}),e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Billing management coming soon"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Manage your subscription, payment methods, and billing history"})]})})]}),(b==="workspace"&&!j||b==="team"&&!U||b==="billing"&&u!=="owner")&&e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m0 0v2m0-2h2m-2 0H10m9-7a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Restricted"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to access this section. Contact your workspace owner for access."})]})})]})]})})]})})},Ce=()=>"https://123ad-performance.launchpulse.ai",La=async(s,n,l)=>{const a=new URLSearchParams;return l&&a.append("member_filter",l),(await F.get(`${Ce()}/api/workspaces/${s}/members?${a.toString()}`,{headers:{Authorization:`Bearer ${n}`}})).data},$a=async(s,n)=>(await F.get(`${Ce()}/api/workspaces/${s}/invitations`,{headers:{Authorization:`Bearer ${n}`}})).data,Ma=async(s,n)=>(await F.get(`${Ce()}/api/workspaces/${s}/audit-logs?limit=50&sort_by=created_at&sort_order=desc`,{headers:{Authorization:`Bearer ${n}`}})).data,Pa=async(s,n,l,a)=>(await F.post(`${Ce()}/api/workspaces/${s}/invitations`,{email:l,role:a},{headers:{Authorization:`Bearer ${n}`}})).data,Aa=async(s,n,l,a)=>(await F.put(`${Ce()}/api/workspaces/${s}/members/${n}`,{role:a},{headers:{Authorization:`Bearer ${l}`}})).data,Ra=async(s,n,l)=>{await F.delete(`${Ce()}/api/workspaces/${s}/members/${n}`,{headers:{Authorization:`Bearer ${l}`}})},Ea=async(s,n,l)=>(await F.post(`${Ce()}/api/workspaces/${s}/exports`,{export_type:"team_members",format:l},{headers:{Authorization:`Bearer ${n}`}})).data,Fa=()=>{const{workspace_id:s}=ue(),[n,l]=ce(),a=A(m=>m.authentication_state.auth_token),o=A(m=>m.current_workspace),d=A(m=>m.add_toast_notification),[h,b]=r.useState({email:"",role:"member",is_submitting:!1,validation_errors:{}}),[C,y]=r.useState(n.get("member_filter")),[v,g]=r.useState(null),[c,k]=r.useState("members"),[N,z]=r.useState(""),D=(o==null?void 0:o.role)||"member",M=D==="owner"||D==="admin",{data:u=[],isLoading:j,refetch:U}=ne({queryKey:["teamMembers",s,C],queryFn:()=>La(s,a,C||void 0),enabled:!!s&&!!a,staleTime:6e4}),{data:R=[],isLoading:J,refetch:q}=ne({queryKey:["pendingInvitations",s],queryFn:()=>$a(s,a),enabled:!!s&&!!a,staleTime:3e4}),{data:W,isLoading:Z}=ne({queryKey:["auditLogs",s],queryFn:()=>Ma(s,a),enabled:!!s&&!!a&&c==="audit",staleTime:3e4}),G=(W==null?void 0:W.data)||[],B=te({mutationFn:({email:m,role:E})=>Pa(s,a,m,E),onSuccess:()=>{d({type:"success",message:"Team member invited successfully",auto_dismiss:!0}),b({email:"",role:"member",is_submitting:!1,validation_errors:{}}),q()},onError:m=>{var E,X;d({type:"error",message:((X=(E=m.response)==null?void 0:E.data)==null?void 0:X.message)||"Failed to send invitation",auto_dismiss:!0}),b(re=>({...re,is_submitting:!1}))}}),x=te({mutationFn:({memberId:m,role:E})=>Aa(s,m,a,E),onSuccess:()=>{d({type:"success",message:"Member role updated successfully",auto_dismiss:!0}),g(null),U()},onError:m=>{var E,X;d({type:"error",message:((X=(E=m.response)==null?void 0:E.data)==null?void 0:X.message)||"Failed to update member role",auto_dismiss:!0})}}),T=te({mutationFn:m=>Ra(s,m,a),onSuccess:()=>{d({type:"success",message:"Member removed successfully",auto_dismiss:!0}),U()},onError:m=>{var E,X;d({type:"error",message:((X=(E=m.response)==null?void 0:E.data)==null?void 0:X.message)||"Failed to remove member",auto_dismiss:!0})}}),O=te({mutationFn:m=>Ea(s,a,m),onSuccess:()=>{d({type:"success",message:"Team data export started",auto_dismiss:!0})},onError:m=>{var E,X;d({type:"error",message:((X=(E=m.response)==null?void 0:E.data)==null?void 0:X.message)||"Failed to export team data",auto_dismiss:!0})}}),K=()=>{const m={};return h.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)||(m.email="Please enter a valid email address"):m.email="Email is required",h.role||(m.role="Role selection is required"),b(E=>({...E,validation_errors:m})),Object.keys(m).length===0},H=async m=>{m.preventDefault(),K()&&(b(E=>({...E,is_submitting:!0})),B.mutate({email:h.email,role:h.role}))},ee=(m,E,X)=>{g({membership_id:m,current_role:E,new_role:X})},f=()=>{v&&x.mutate({memberId:v.membership_id,role:v.new_role})},$=(m,E)=>{window.confirm(`Are you sure you want to remove ${E} from the workspace?`)&&T.mutate(m)},P=m=>{y(m);const E=new URLSearchParams(n);m?E.set("member_filter",m):E.delete("member_filter"),l(E)},Q=m=>{O.mutate(m)},t=m=>{switch(m){case"owner":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";case"member":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},i=m=>{switch(m){case"active":return e.jsx(ie,{className:"size-4 text-green-500"});case"pending":return e.jsx(Ve,{className:"size-4 text-yellow-500"});case"inactive":return e.jsx(we,{className:"size-4 text-red-500"});default:return e.jsx(Ve,{className:"size-4 text-gray-500"})}},L=u.filter(m=>m.user.name.toLowerCase().includes(N.toLowerCase())||m.user.email.toLowerCase().includes(N.toLowerCase())),p=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ke,{className:"size-5 mr-2 text-blue-600"}),"Role Permissions Matrix"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permission"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Owner"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"View workspace data"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Upload data files"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Create and manage alerts"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(we,{className:"size-4 text-red-500 mx-auto"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Manage team members"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(we,{className:"size-4 text-red-500 mx-auto"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Workspace settings"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(we,{className:"size-4 text-red-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(we,{className:"size-4 text-red-500 mx-auto"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Delete workspace"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ie,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(we,{className:"size-4 text-red-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(we,{className:"size-4 text-red-500 mx-auto"})})]})]})]})})]});return M?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("nav",{className:"flex space-x-2 text-sm text-gray-500 mb-2",children:[e.jsx(Y,{to:`/w/${s}`,className:"hover:text-gray-700",children:"Dashboard"}),e.jsx("span",{children:"â†’"}),e.jsx(Y,{to:`/w/${s}/settings`,className:"hover:text-gray-700",children:"Settings"}),e.jsx("span",{children:"â†’"}),e.jsx("span",{className:"text-gray-900",children:"Team Management"})]}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ye,{className:"size-8 mr-3 text-blue-600"}),"Team Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage team members, roles, and permissions for your workspace"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>Q("csv"),disabled:O.isPending,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[e.jsx(Ge,{className:"size-4 mr-2"}),"Export CSV"]}),e.jsxs("button",{onClick:()=>Q("xlsx"),disabled:O.isPending,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[e.jsx(Ge,{className:"size-4 mr-2"}),"Export Excel"]})]})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>k("members"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${c==="members"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Ye,{className:"size-4 inline mr-2"}),"Team Members (",u.length,")"]}),e.jsxs("button",{onClick:()=>k("invitations"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${c==="invitations"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(ns,{className:"size-4 inline mr-2"}),"Pending Invitations (",R.length,")"]}),e.jsxs("button",{onClick:()=>k("audit"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${c==="audit"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(ls,{className:"size-4 inline mr-2"}),"Audit Log"]}),e.jsxs("button",{onClick:()=>k("activity"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${c==="activity"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Zs,{className:"size-4 inline mr-2"}),"Permissions"]})]})}),c==="members"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Xs,{className:"size-5 mr-2 text-blue-600"}),"Invite New Team Member"]}),e.jsxs("form",{onSubmit:H,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",value:h.email,onChange:m=>{b(E=>({...E,email:m.target.value,validation_errors:{...E.validation_errors,email:void 0}}))},placeholder:"colleague@company.com",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-colors ${h.validation_errors.email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-300"}`}),h.validation_errors.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.validation_errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("select",{id:"role",value:h.role,onChange:m=>{b(E=>({...E,role:m.target.value,validation_errors:{...E.validation_errors,role:void 0}}))},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-colors ${h.validation_errors.role?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-300"}`,children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"}),D==="owner"&&e.jsx("option",{value:"owner",children:"Owner"})]}),h.validation_errors.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.validation_errors.role})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:h.is_submitting||B.isPending,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h.is_submitting||B.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):"Send Invitation"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Team Members (",L.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_s,{className:"size-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search members...",value:N,onChange:m=>z(m.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-colors"})]}),e.jsxs("select",{value:C||"",onChange:m=>P(m.target.value||null),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-colors",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"owner",children:"Owners"}),e.jsx("option",{value:"admin",children:"Admins"}),e.jsx("option",{value:"member",children:"Members"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:j?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading team members..."})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-800",children:m.user.name.split(" ").map(E=>E[0]).join("").toUpperCase()})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.user.name}),e.jsx("div",{className:"text-sm text-gray-500",children:m.user.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t(m.membership.role)}`,children:m.membership.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[i(m.membership.status),e.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:m.membership.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.membership.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("div",{className:"flex items-center justify-end space-x-2",children:m.membership.role!=="owner"&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:m.membership.role,onChange:E=>ee(m.membership.id,m.membership.role,E.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x.isPending,children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"}),D==="owner"&&e.jsx("option",{value:"owner",children:"Owner"})]}),e.jsx("button",{onClick:()=>$(m.membership.id,m.user.name),className:"text-red-600 hover:text-red-900 transition-colors",disabled:T.isPending,children:e.jsx(Js,{className:"size-4"})})]})})})]},m.membership.id))})]})})]})]}),c==="invitations"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pending Invitations (",R.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:J?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading invitations..."})]}):R.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ns,{className:"size-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No pending invitations"})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t(m.role)}`,children:m.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:m.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.expires_at).toLocaleDateString()})]},m.id))})]})})]}),c==="audit"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Activity Audit Log"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track team member actions and changes for compliance and security"})]}),e.jsx("div",{className:"overflow-x-auto",children:Z?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading audit logs..."})]}):G.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ls,{className:"size-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No audit logs found"})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.created_at).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.user_id||"System"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m.action}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[m.entity_type," ",m.entity_id&&`(${m.entity_id})`]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:m.details?JSON.stringify(m.details):"-"})]},m.id))})]})})]}),c==="activity"&&p()]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Role Change"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to change this member's role from"," ",e.jsx("span",{className:"font-medium",children:v.current_role})," to"," ",e.jsx("span",{className:"font-medium",children:v.new_role}),"?"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:x.isPending,children:"Cancel"}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:x.isPending,children:x.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Confirm Change"})]})]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx(He,{className:"size-16 text-yellow-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You need Admin or Owner permissions to access team management."}),e.jsx(Y,{to:`/w/${s}/settings`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Settings"})]})})})},Ta=new Fs({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}}}),Ze=()=>e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading..."})]}),me=({children:s})=>{const n=A(a=>a.authentication_state.authentication_status.is_authenticated);return A(a=>a.authentication_state.authentication_status.is_loading)?e.jsx(Ze,{}):n?e.jsx(e.Fragment,{children:s}):e.jsx(ze,{to:"/signin",replace:!0})},Ie=({children:s})=>{const n=A(o=>o.authentication_state.authentication_status.is_authenticated),l=A(o=>o.authentication_state.authentication_status.is_loading),a=A(o=>o.current_workspace);if(l)return e.jsx(Ze,{});if(n){const o=a?`/w/${a.id}`:"/w/default";return e.jsx(ze,{to:o,replace:!0})}return e.jsx(e.Fragment,{children:s})},xe=({children:s})=>e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(dt,{}),e.jsxs("div",{className:"flex",children:[e.jsx(la,{}),e.jsx("main",{className:"flex-1 ml-0 lg:ml-60 pt-16",children:e.jsx("div",{className:"min-h-[calc(100vh-4rem)]",children:s})})]}),e.jsx(Ps,{}),e.jsx(ia,{})]}),Ee=({children:s})=>e.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[e.jsx("main",{className:"flex-1",children:s}),e.jsx(Ps,{})]}),Da=()=>{const s=A(o=>o.authentication_state.authentication_status.is_loading),n=A(o=>o.authentication_state.authentication_status.is_authenticated),l=A(o=>o.current_workspace),a=A(o=>o.initialize_auth);return r.useEffect(()=>{a()},[a]),s?e.jsx(Ze,{}):e.jsx(Ts,{client:Ta,children:e.jsx(Rs,{children:e.jsx("div",{className:"App",children:e.jsxs(Es,{children:[e.jsx(le,{path:"/",element:e.jsx(Ie,{children:e.jsx(Ee,{children:e.jsx(oa,{})})})}),e.jsx(le,{path:"/signup",element:e.jsx(Ie,{children:e.jsx(Ee,{children:e.jsx(da,{})})})}),e.jsx(le,{path:"/signin",element:e.jsx(Ie,{children:e.jsx(Ee,{children:e.jsx(ma,{})})})}),e.jsx(le,{path:"/verify-email",element:e.jsx(Ee,{children:e.jsx(xa,{})})}),e.jsx(le,{path:"/reset-password",element:e.jsx(Ee,{children:e.jsx(ha,{})})}),e.jsx(le,{path:"/w/:workspace_id",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(ga,{})})})}),e.jsx(le,{path:"/w/:workspace_id/channels",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(fa,{})})})}),e.jsx(le,{path:"/w/:workspace_id/campaigns",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(ws,{})})})}),e.jsx(le,{path:"/w/:workspace_id/campaigns/:campaign_id",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(ws,{})})})}),e.jsx(le,{path:"/w/:workspace_id/creatives",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(ya,{})})})}),e.jsx(le,{path:"/w/:workspace_id/uploads",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(ja,{})})})}),e.jsx(le,{path:"/w/:workspace_id/upload",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(_a,{})})})}),e.jsx(le,{path:"/w/:workspace_id/upload/mapping",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(va,{})})})}),e.jsx(le,{path:"/w/:workspace_id/alerts",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Ca,{})})})}),e.jsx(le,{path:"/w/:workspace_id/settings",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Sa,{})})})}),e.jsx(le,{path:"/w/:workspace_id/settings/team",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Fa,{})})})}),e.jsx(le,{path:"/w/default",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(pa,{})})})}),e.jsx(le,{path:"*",element:n?e.jsx(ze,{to:l?`/w/${l.id}`:"/w/default",replace:!0}):e.jsx(ze,{to:"/",replace:!0})})]})})})})},Ba=()=>e.jsx(e.Fragment,{children:e.jsx(Da,{})});Cs(document.getElementById("root")).render(e.jsx(Ba,{}));
