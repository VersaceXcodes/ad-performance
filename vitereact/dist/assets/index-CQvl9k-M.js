import{j as e}from"./ui-lFc-xgKL.js";import{a as bs,b as Be,r as l}from"./vendor-Gm9i_4Ku.js";import{L as W,u as ys,a as he,b as Ee,c as ce,B as js,R as vs,d as ie,N as Ke}from"./router-DofkIrkG.js";import{u as Pe,a as ae,b as te,Q as ws,c as Ns}from"./query-DdeJfY1c.js";import{a as D}from"./utils-ngrFHoWO.js";import{E as de,Z as Zt,C as nt,H as _s,X as Le,I as ks,T as it,a as Cs,b as le,c as Me,d as Ss,e as Ls,S as lt,U as ot,f as Ze,P as As,g as Es,D as ct,h as Xt,F as Ps,i as Rs,A as ve,j as Ms,k as $s,l as Ts,m as Bs,M as Fs,n as Mt,o as $t,p as Ds,q as Os,r as zs,s as ke}from"./icons-kOrm__yY.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Jt,Tt=bs;Jt=Tt.createRoot,Tt.hydrateRoot;const Bt=s=>{let t;const a=new Set,r=(b,N)=>{const g=typeof b=="function"?b(t):b;if(!Object.is(g,t)){const o=t;t=N??(typeof g!="object"||g===null)?g:Object.assign({},t,g),a.forEach(S=>S(t,o))}},n=()=>t,d={setState:r,getState:n,getInitialState:()=>y,subscribe:b=>(a.add(b),()=>a.delete(b))},y=t=s(r,n,d);return d},qs=s=>s?Bt(s):Bt,Us=s=>s;function Is(s,t=Us){const a=Be.useSyncExternalStore(s.subscribe,Be.useCallback(()=>t(s.getState()),[s,t]),Be.useCallback(()=>t(s.getInitialState()),[s,t]));return Be.useDebugValue(a),a}const Vs=s=>{const t=qs(s),a=r=>Is(t,r);return Object.assign(a,t),a},Ws=s=>Vs;function Hs(s,t){let a;try{a=s()}catch{return}return{getItem:n=>{var i;const c=y=>y===null?null:JSON.parse(y,void 0),d=(i=a.getItem(n))!=null?i:null;return d instanceof Promise?d.then(c):c(d)},setItem:(n,i)=>a.setItem(n,JSON.stringify(i,void 0)),removeItem:n=>a.removeItem(n)}}const dt=s=>t=>{try{const a=s(t);return a instanceof Promise?a:{then(r){return dt(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return dt(r)(a)}}}},Ys=(s,t)=>(a,r,n)=>{let i={storage:Hs(()=>localStorage),partialize:B=>B,version:0,merge:(B,$)=>({...$,...B}),...t},c=!1;const d=new Set,y=new Set;let b=i.storage;if(!b)return s((...B)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),a(...B)},r,n);const N=()=>{const B=i.partialize({...r()});return b.setItem(i.name,{state:B,version:i.version})},g=n.setState;n.setState=(B,$)=>(g(B,$),N());const o=s((...B)=>(a(...B),N()),r,n);n.getInitialState=()=>o;let S;const C=()=>{var B,$;if(!b)return;c=!1,d.forEach(u=>{var w;return u((w=r())!=null?w:o)});const P=(($=i.onRehydrateStorage)==null?void 0:$.call(i,(B=r())!=null?B:o))||void 0;return dt(b.getItem.bind(b))(i.name).then(u=>{if(u)if(typeof u.version=="number"&&u.version!==i.version){if(i.migrate){const w=i.migrate(u.state,u.version);return w instanceof Promise?w.then(U=>[!0,U]):[!0,w]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,u.state];return[!1,void 0]}).then(u=>{var w;const[U,O]=u;if(S=i.merge(O,(w=r())!=null?w:o),a(S,!0),U)return N()}).then(()=>{P==null||P(S,void 0),S=r(),c=!0,y.forEach(u=>u(S))}).catch(u=>{P==null||P(void 0,u)})};return n.persist={setOptions:B=>{i={...i,...B},B.storage&&(b=B.storage)},clearStorage:()=>{b==null||b.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>C(),hasHydrated:()=>c,onHydrate:B=>(d.add(B),()=>{d.delete(B)}),onFinishHydration:B=>(y.add(B),()=>{y.delete(B)})},i.skipHydration||C(),S||o},Ks=Ys,be=Object.create(null);be.open="0";be.close="1";be.ping="2";be.pong="3";be.message="4";be.upgrade="5";be.noop="6";const Ve=Object.create(null);Object.keys(be).forEach(s=>{Ve[be[s]]=s});const mt={type:"error",data:"parser error"},es=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ts=typeof ArrayBuffer=="function",ss=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,ft=({type:s,data:t},a,r)=>es&&t instanceof Blob?a?r(t):Ft(t,r):ts&&(t instanceof ArrayBuffer||ss(t))?a?r(t):Ft(new Blob([t]),r):r(be[s]+(t||"")),Ft=(s,t)=>{const a=new FileReader;return a.onload=function(){const r=a.result.split(",")[1];t("b"+(r||""))},a.readAsDataURL(s)};function Dt(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let Xe;function Qs(s,t){if(es&&s.data instanceof Blob)return s.data.arrayBuffer().then(Dt).then(t);if(ts&&(s.data instanceof ArrayBuffer||ss(s.data)))return t(Dt(s.data));ft(s,!1,a=>{Xe||(Xe=new TextEncoder),t(Xe.encode(a))})}const Ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Ot.length;s++)Fe[Ot.charCodeAt(s)]=s;const Gs=s=>{let t=s.length*.75,a=s.length,r,n=0,i,c,d,y;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const b=new ArrayBuffer(t),N=new Uint8Array(b);for(r=0;r<a;r+=4)i=Fe[s.charCodeAt(r)],c=Fe[s.charCodeAt(r+1)],d=Fe[s.charCodeAt(r+2)],y=Fe[s.charCodeAt(r+3)],N[n++]=i<<2|c>>4,N[n++]=(c&15)<<4|d>>2,N[n++]=(d&3)<<6|y&63;return b},Zs=typeof ArrayBuffer=="function",bt=(s,t)=>{if(typeof s!="string")return{type:"message",data:as(s,t)};const a=s.charAt(0);return a==="b"?{type:"message",data:Xs(s.substring(1),t)}:Ve[a]?s.length>1?{type:Ve[a],data:s.substring(1)}:{type:Ve[a]}:mt},Xs=(s,t)=>{if(Zs){const a=Gs(s);return as(a,t)}else return{base64:!0,data:s}},as=(s,t)=>{switch(t){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},rs="",Js=(s,t)=>{const a=s.length,r=new Array(a);let n=0;s.forEach((i,c)=>{ft(i,!1,d=>{r[c]=d,++n===a&&t(r.join(rs))})})},ea=(s,t)=>{const a=s.split(rs),r=[];for(let n=0;n<a.length;n++){const i=bt(a[n],t);if(r.push(i),i.type==="error")break}return r};function ta(){return new TransformStream({transform(s,t){Qs(s,a=>{const r=a.length;let n;if(r<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,r);else if(r<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}s.data&&typeof s.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(a)})}})}let Je;function ze(s){return s.reduce((t,a)=>t+a.length,0)}function qe(s,t){if(s[0].length===t)return s.shift();const a=new Uint8Array(t);let r=0;for(let n=0;n<t;n++)a[n]=s[0][r++],r===s[0].length&&(s.shift(),r=0);return s.length&&r<s[0].length&&(s[0]=s[0].slice(r)),a}function sa(s,t){Je||(Je=new TextDecoder);const a=[];let r=0,n=-1,i=!1;return new TransformStream({transform(c,d){for(a.push(c);;){if(r===0){if(ze(a)<1)break;const y=qe(a,1);i=(y[0]&128)===128,n=y[0]&127,n<126?r=3:n===126?r=1:r=2}else if(r===1){if(ze(a)<2)break;const y=qe(a,2);n=new DataView(y.buffer,y.byteOffset,y.length).getUint16(0),r=3}else if(r===2){if(ze(a)<8)break;const y=qe(a,8),b=new DataView(y.buffer,y.byteOffset,y.length),N=b.getUint32(0);if(N>Math.pow(2,21)-1){d.enqueue(mt);break}n=N*Math.pow(2,32)+b.getUint32(4),r=3}else{if(ze(a)<n)break;const y=qe(a,n);d.enqueue(bt(i?y:Je.decode(y),t)),r=0}if(n===0||n>s){d.enqueue(mt);break}}}})}const ns=4;function ne(s){if(s)return aa(s)}function aa(s){for(var t in ne.prototype)s[t]=ne.prototype[t];return s}ne.prototype.on=ne.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};ne.prototype.once=function(s,t){function a(){this.off(s,a),t.apply(this,arguments)}return a.fn=t,this.on(s,a),this};ne.prototype.off=ne.prototype.removeListener=ne.prototype.removeAllListeners=ne.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+s];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var r,n=0;n<a.length;n++)if(r=a[n],r===t||r.fn===t){a.splice(n,1);break}return a.length===0&&delete this._callbacks["$"+s],this};ne.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),a=this._callbacks["$"+s],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(a){a=a.slice(0);for(var r=0,n=a.length;r<n;++r)a[r].apply(this,t)}return this};ne.prototype.emitReserved=ne.prototype.emit;ne.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};ne.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Qe=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,a)=>a(t,0),ue=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ra="arraybuffer";function is(s,...t){return t.reduce((a,r)=>(s.hasOwnProperty(r)&&(a[r]=s[r]),a),{})}const na=ue.setTimeout,ia=ue.clearTimeout;function Ge(s,t){t.useNativeTimers?(s.setTimeoutFn=na.bind(ue),s.clearTimeoutFn=ia.bind(ue)):(s.setTimeoutFn=ue.setTimeout.bind(ue),s.clearTimeoutFn=ue.clearTimeout.bind(ue))}const la=1.33;function oa(s){return typeof s=="string"?ca(s):Math.ceil((s.byteLength||s.size)*la)}function ca(s){let t=0,a=0;for(let r=0,n=s.length;r<n;r++)t=s.charCodeAt(r),t<128?a+=1:t<2048?a+=2:t<55296||t>=57344?a+=3:(r++,a+=4);return a}function ls(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function da(s){let t="";for(let a in s)s.hasOwnProperty(a)&&(t.length&&(t+="&"),t+=encodeURIComponent(a)+"="+encodeURIComponent(s[a]));return t}function ma(s){let t={},a=s.split("&");for(let r=0,n=a.length;r<n;r++){let i=a[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class xa extends Error{constructor(t,a,r){super(t),this.description=a,this.context=r,this.type="TransportError"}}class yt extends ne{constructor(t){super(),this.writable=!1,Ge(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,a,r){return super.emitReserved("error",new xa(t,a,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const a=bt(t,this.socket.binaryType);this.onPacket(a)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,a={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(a)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const a=da(t);return a.length?"?"+a:""}}class ua extends yt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const a=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||a()})),this.writable||(r++,this.once("drain",function(){--r||a()}))}else a()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const a=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};ea(t,this.socket.binaryType).forEach(a),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Js(t,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",a=this.query||{};return this.opts.timestampRequests!==!1&&(a[this.opts.timestampParam]=ls()),!this.supportsBinary&&!a.sid&&(a.b64=1),this.createUri(t,a)}}let os=!1;try{os=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const ha=os;function pa(){}class ga extends ua{constructor(t){if(super(t),typeof location<"u"){const a=location.protocol==="https:";let r=location.port;r||(r=a?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,a){const r=this.request({method:"POST",data:t});r.on("success",a),r.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(a,r)=>{this.onError("xhr poll error",a,r)}),this.pollXhr=t}}class fe extends ne{constructor(t,a,r){super(),this.createRequest=t,Ge(this,r),this._opts=r,this._method=r.method||"GET",this._uri=a,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const a=is(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(a);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var n;r.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=fe.requestsCount++,fe.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=pa,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete fe.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}fe.requestsCount=0;fe.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",zt);else if(typeof addEventListener=="function"){const s="onpagehide"in ue?"pagehide":"unload";addEventListener(s,zt,!1)}}function zt(){for(let s in fe.requests)fe.requests.hasOwnProperty(s)&&fe.requests[s].abort()}const fa=function(){const s=cs({xdomain:!1});return s&&s.responseType!==null}();class ba extends ga{constructor(t){super(t);const a=t&&t.forceBase64;this.supportsBinary=fa&&!a}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new fe(cs,this.uri(),t)}}function cs(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||ha))return new XMLHttpRequest}catch{}if(!t)try{return new ue[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ds=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ya extends yt{get name(){return"websocket"}doOpen(){const t=this.uri(),a=this.opts.protocols,r=ds?{}:is(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,a,r)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const r=t[a],n=a===t.length-1;ft(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}n&&Qe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",a=this.query||{};return this.opts.timestampRequests&&(a[this.opts.timestampParam]=ls()),this.supportsBinary||(a.b64=1),this.createUri(t,a)}}const et=ue.WebSocket||ue.MozWebSocket;class ja extends ya{createSocket(t,a,r){return ds?new et(t,a,r):a?new et(t,a):new et(t)}doWrite(t,a){this.ws.send(a)}}class va extends yt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const a=sa(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(a).getReader(),n=ta();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const i=()=>{r.read().then(({done:d,value:y})=>{d||(this.onPacket(y),i())}).catch(d=>{})};i();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const r=t[a],n=a===t.length-1;this._writer.write(r).then(()=>{n&&Qe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const wa={websocket:ja,webtransport:va,polling:ba},Na=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_a=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function xt(s){if(s.length>8e3)throw"URI too long";const t=s,a=s.indexOf("["),r=s.indexOf("]");a!=-1&&r!=-1&&(s=s.substring(0,a)+s.substring(a,r).replace(/:/g,";")+s.substring(r,s.length));let n=Na.exec(s||""),i={},c=14;for(;c--;)i[_a[c]]=n[c]||"";return a!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=ka(i,i.path),i.queryKey=Ca(i,i.query),i}function ka(s,t){const a=/\/{2,9}/g,r=t.replace(a,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Ca(s,t){const a={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,n,i){n&&(a[n]=i)}),a}const ut=typeof addEventListener=="function"&&typeof removeEventListener=="function",We=[];ut&&addEventListener("offline",()=>{We.forEach(s=>s())},!1);class we extends ne{constructor(t,a){if(super(),this.binaryType=ra,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(a=t,t=null),t){const r=xt(t);a.hostname=r.host,a.secure=r.protocol==="https"||r.protocol==="wss",a.port=r.port,r.query&&(a.query=r.query)}else a.host&&(a.hostname=xt(a.host).host);Ge(this,a),this.secure=a.secure!=null?a.secure:typeof location<"u"&&location.protocol==="https:",a.hostname&&!a.port&&(a.port=this.secure?"443":"80"),this.hostname=a.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=a.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},a.transports.forEach(r=>{const n=r.prototype.name;this.transports.push(n),this._transportsByName[n]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},a),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ma(this.opts.query)),ut&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},We.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const a=Object.assign({},this.opts.query);a.EIO=ns,a.transport=t,this.id&&(a.sid=this.id);const r=Object.assign({},this.opts,{query:a,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&we.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const a=this.createTransport(t);a.open(),this.setTransport(a)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",a=>this._onClose("transport close",a))}onOpen(){this.readyState="open",we.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const a=new Error("server error");a.code=t.data,this._onError(a);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let a=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(a+=oa(n)),r>0&&a>this._maxPayload)return this.writeBuffer.slice(0,r);a+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Qe(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,a,r){return this._sendPacket("message",t,a,r),this}send(t,a,r){return this._sendPacket("message",t,a,r),this}_sendPacket(t,a,r,n){if(typeof a=="function"&&(n=a,a=void 0),typeof r=="function"&&(n=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:t,data:a,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},a=()=>{this.off("upgrade",a),this.off("upgradeError",a),t()},r=()=>{this.once("upgrade",a),this.once("upgradeError",a)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(we.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ut&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=We.indexOf(this._offlineEventListener);r!==-1&&We.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,a),this.writeBuffer=[],this._prevBufferLen=0}}}we.protocol=ns;class Sa extends we{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let a=this.createTransport(t),r=!1;we.priorWebsocketSuccess=!1;const n=()=>{r||(a.send([{type:"ping",data:"probe"}]),a.once("packet",g=>{if(!r)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",a),!a)return;we.priorWebsocketSuccess=a.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(N(),this.setTransport(a),a.send([{type:"upgrade"}]),this.emitReserved("upgrade",a),a=null,this.upgrading=!1,this.flush())})}else{const o=new Error("probe error");o.transport=a.name,this.emitReserved("upgradeError",o)}}))};function i(){r||(r=!0,N(),a.close(),a=null)}const c=g=>{const o=new Error("probe error: "+g);o.transport=a.name,i(),this.emitReserved("upgradeError",o)};function d(){c("transport closed")}function y(){c("socket closed")}function b(g){a&&g.name!==a.name&&i()}const N=()=>{a.removeListener("open",n),a.removeListener("error",c),a.removeListener("close",d),this.off("close",y),this.off("upgrading",b)};a.once("open",n),a.once("error",c),a.once("close",d),this.once("close",y),this.once("upgrading",b),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||a.open()},200):a.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const a=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&a.push(t[r]);return a}}let La=class extends Sa{constructor(t,a={}){const r=typeof t=="object"?t:a;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(n=>wa[n]).filter(n=>!!n)),super(t,r)}};function Aa(s,t="",a){let r=s;a=a||typeof location<"u"&&location,s==null&&(s=a.protocol+"//"+a.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=a.protocol+s:s=a.host+s),/^(https?|wss?):\/\//.test(s)||(typeof a<"u"?s=a.protocol+"//"+s:s="https://"+s),r=xt(s)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(a&&a.port===r.port?"":":"+r.port),r}const Ea=typeof ArrayBuffer=="function",Pa=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,ms=Object.prototype.toString,Ra=typeof Blob=="function"||typeof Blob<"u"&&ms.call(Blob)==="[object BlobConstructor]",Ma=typeof File=="function"||typeof File<"u"&&ms.call(File)==="[object FileConstructor]";function jt(s){return Ea&&(s instanceof ArrayBuffer||Pa(s))||Ra&&s instanceof Blob||Ma&&s instanceof File}function He(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let a=0,r=s.length;a<r;a++)if(He(s[a]))return!0;return!1}if(jt(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return He(s.toJSON(),!0);for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&He(s[a]))return!0;return!1}function $a(s){const t=[],a=s.data,r=s;return r.data=ht(a,t),r.attachments=t.length,{packet:r,buffers:t}}function ht(s,t){if(!s)return s;if(jt(s)){const a={_placeholder:!0,num:t.length};return t.push(s),a}else if(Array.isArray(s)){const a=new Array(s.length);for(let r=0;r<s.length;r++)a[r]=ht(s[r],t);return a}else if(typeof s=="object"&&!(s instanceof Date)){const a={};for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=ht(s[r],t));return a}return s}function Ta(s,t){return s.data=pt(s.data,t),delete s.attachments,s}function pt(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let a=0;a<s.length;a++)s[a]=pt(s[a],t);else if(typeof s=="object")for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&(s[a]=pt(s[a],t));return s}const Ba=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Fa=5;var J;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(J||(J={}));class Da{constructor(t){this.replacer=t}encode(t){return(t.type===J.EVENT||t.type===J.ACK)&&He(t)?this.encodeAsBinary({type:t.type===J.EVENT?J.BINARY_EVENT:J.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let a=""+t.type;return(t.type===J.BINARY_EVENT||t.type===J.BINARY_ACK)&&(a+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(a+=t.nsp+","),t.id!=null&&(a+=t.id),t.data!=null&&(a+=JSON.stringify(t.data,this.replacer)),a}encodeAsBinary(t){const a=$a(t),r=this.encodeAsString(a.packet),n=a.buffers;return n.unshift(r),n}}function qt(s){return Object.prototype.toString.call(s)==="[object Object]"}class vt extends ne{constructor(t){super(),this.reviver=t}add(t){let a;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");a=this.decodeString(t);const r=a.type===J.BINARY_EVENT;r||a.type===J.BINARY_ACK?(a.type=r?J.EVENT:J.ACK,this.reconstructor=new Oa(a),a.attachments===0&&super.emitReserved("decoded",a)):super.emitReserved("decoded",a)}else if(jt(t)||t.base64)if(this.reconstructor)a=this.reconstructor.takeBinaryData(t),a&&(this.reconstructor=null,super.emitReserved("decoded",a));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let a=0;const r={type:Number(t.charAt(0))};if(J[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===J.BINARY_EVENT||r.type===J.BINARY_ACK){const i=a+1;for(;t.charAt(++a)!=="-"&&a!=t.length;);const c=t.substring(i,a);if(c!=Number(c)||t.charAt(a)!=="-")throw new Error("Illegal attachments");r.attachments=Number(c)}if(t.charAt(a+1)==="/"){const i=a+1;for(;++a&&!(t.charAt(a)===","||a===t.length););r.nsp=t.substring(i,a)}else r.nsp="/";const n=t.charAt(a+1);if(n!==""&&Number(n)==n){const i=a+1;for(;++a;){const c=t.charAt(a);if(c==null||Number(c)!=c){--a;break}if(a===t.length)break}r.id=Number(t.substring(i,a+1))}if(t.charAt(++a)){const i=this.tryParse(t.substr(a));if(vt.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,a){switch(t){case J.CONNECT:return qt(a);case J.DISCONNECT:return a===void 0;case J.CONNECT_ERROR:return typeof a=="string"||qt(a);case J.EVENT:case J.BINARY_EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&Ba.indexOf(a[0])===-1);case J.ACK:case J.BINARY_ACK:return Array.isArray(a)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Oa{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const a=Ta(this.reconPack,this.buffers);return this.finishedReconstruction(),a}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const za=Object.freeze(Object.defineProperty({__proto__:null,Decoder:vt,Encoder:Da,get PacketType(){return J},protocol:Fa},Symbol.toStringTag,{value:"Module"}));function ge(s,t,a){return s.on(t,a),function(){s.off(t,a)}}const qa=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class xs extends ne{constructor(t,a,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=a,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ge(t,"open",this.onopen.bind(this)),ge(t,"packet",this.onpacket.bind(this)),ge(t,"error",this.onerror.bind(this)),ge(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...a){var r,n,i;if(qa.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(a.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(a),this;const c={type:J.EVENT,data:a};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof a[a.length-1]=="function"){const N=this.ids++,g=a.pop();this._registerAckCallback(N,g),c.id=N}const d=(n=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||n===void 0?void 0:n.writable,y=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!d||(y?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,a){var r;const n=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(n===void 0){this.acks[t]=a;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===t&&this.sendBuffer.splice(d,1);a.call(this,new Error("operation has timed out"))},n),c=(...d)=>{this.io.clearTimeoutFn(i),a.apply(this,d)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...a){return new Promise((r,n)=>{const i=(c,d)=>c?n(c):r(d);i.withError=!0,a.push(i),this.emit(t,...a)})}_addToQueue(t){let a;typeof t[t.length-1]=="function"&&(a=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...i)=>r!==this._queue[0]?void 0:(n!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),a&&a(n)):(this._queue.shift(),a&&a(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const a=this._queue[0];a.pending&&!t||(a.pending=!0,a.tryCount++,this.flags=a.flags,this.emit.apply(this,a.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:J.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,a){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,a),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case J.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case J.EVENT:case J.BINARY_EVENT:this.onevent(t);break;case J.ACK:case J.BINARY_ACK:this.onack(t);break;case J.DISCONNECT:this.ondisconnect();break;case J.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const a=t.data||[];t.id!=null&&a.push(this.ack(t.id)),this.connected?this.emitEvent(a):this.receiveBuffer.push(Object.freeze(a))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const a=this._anyListeners.slice();for(const r of a)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const a=this;let r=!1;return function(...n){r||(r=!0,a.packet({type:J.ACK,id:t,data:n}))}}onack(t){const a=this.acks[t.id];typeof a=="function"&&(delete this.acks[t.id],a.withError&&t.data.unshift(null),a.apply(this,t.data))}onconnect(t,a){this.id=t,this.recovered=a&&this._pid===a,this._pid=a,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:J.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const a=this._anyListeners;for(let r=0;r<a.length;r++)if(t===a[r])return a.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const a=this._anyOutgoingListeners;for(let r=0;r<a.length;r++)if(t===a[r])return a.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const a=this._anyOutgoingListeners.slice();for(const r of a)r.apply(this,t.data)}}}function Re(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Re.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),a=Math.floor(t*this.jitter*s);s=Math.floor(t*10)&1?s+a:s-a}return Math.min(s,this.max)|0};Re.prototype.reset=function(){this.attempts=0};Re.prototype.setMin=function(s){this.ms=s};Re.prototype.setMax=function(s){this.max=s};Re.prototype.setJitter=function(s){this.jitter=s};class gt extends ne{constructor(t,a){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(a=t,t=void 0),a=a||{},a.path=a.path||"/socket.io",this.opts=a,Ge(this,a),this.reconnection(a.reconnection!==!1),this.reconnectionAttempts(a.reconnectionAttempts||1/0),this.reconnectionDelay(a.reconnectionDelay||1e3),this.reconnectionDelayMax(a.reconnectionDelayMax||5e3),this.randomizationFactor((r=a.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Re({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(a.timeout==null?2e4:a.timeout),this._readyState="closed",this.uri=t;const n=a.parser||za;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=a.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var a;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(a=this.backoff)===null||a===void 0||a.setMin(t),this)}randomizationFactor(t){var a;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(a=this.backoff)===null||a===void 0||a.setJitter(t),this)}reconnectionDelayMax(t){var a;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(a=this.backoff)===null||a===void 0||a.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new La(this.uri,this.opts);const a=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=ge(a,"open",function(){r.onopen(),t&&t()}),i=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),t?t(d):this.maybeReconnectOnOpen()},c=ge(a,"error",i);if(this._timeout!==!1){const d=this._timeout,y=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),a.close()},d);this.opts.autoUnref&&y.unref(),this.subs.push(()=>{this.clearTimeoutFn(y)})}return this.subs.push(n),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ge(t,"ping",this.onping.bind(this)),ge(t,"data",this.ondata.bind(this)),ge(t,"error",this.onerror.bind(this)),ge(t,"close",this.onclose.bind(this)),ge(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(a){this.onclose("parse error",a)}}ondecoded(t){Qe(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,a){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new xs(this,t,a),this.nsps[t]=r),r}_destroy(t){const a=Object.keys(this.nsps);for(const r of a)if(this.nsps[r].active)return;this._close()}_packet(t){const a=this.encoder.encode(t);for(let r=0;r<a.length;r++)this.engine.write(a[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,a){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,a),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const a=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},a);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const $e={};function Ye(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const a=Aa(s,t.path||"/socket.io"),r=a.source,n=a.id,i=a.path,c=$e[n]&&i in $e[n].nsps,d=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let y;return d?y=new gt(r,t):($e[n]||($e[n]=new gt(r,t)),y=$e[n]),a.query&&!t.query&&(t.query=a.queryKey),y.socket(a.path,t)}Object.assign(Ye,{Manager:gt,Socket:xs,io:Ye,connect:Ye});const Ut=()=>Math.random().toString(36).substr(2,9),Ce=()=>"https://123ad-performance.launchpulse.ai",It=async(s,t=3,a=1e3)=>{var r;for(let n=0;n<t;n++)try{return await s()}catch(i){const c=n===t-1,d=((r=i.response)==null?void 0:r.status)>=500||i.code==="ECONNABORTED"||!i.response;if(c||!d)throw i;console.warn(`Request failed, retrying in ${a}ms... (attempt ${n+1}/${t})`),await new Promise(y=>setTimeout(y,a*(n+1)))}};D.defaults.timeout=3e4;D.defaults.headers.common["Content-Type"]="application/json";D.defaults.headers.common.Accept="application/json";D.defaults.withCredentials=!0;typeof window<"u"&&(window.navigator.userAgent.includes("HeadlessChrome")||window.navigator.userAgent.includes("PhantomJS")||window.navigator.userAgent.includes("Selenium")||window.navigator.userAgent.includes("Playwright")||window.navigator.userAgent.includes("Puppeteer"))&&(D.defaults.headers.common["X-Automation"]="true",D.defaults.headers.common["X-Test-Mode"]="browser-testing");D.interceptors.request.use(s=>{var a,r;const t=localStorage.getItem("pulsedeck-app-storage");if(t)try{const n=JSON.parse(t),i=(r=(a=n==null?void 0:n.state)==null?void 0:a.authentication_state)==null?void 0:r.auth_token;i&&(s.headers.Authorization=`Bearer ${i}`)}catch(n){console.warn("Failed to parse stored auth token:",n)}return s},s=>Promise.reject(s));D.interceptors.response.use(s=>s,s=>{var t,a,r,n,i;if(console.error("API Error:",{message:s.message,status:(t=s.response)==null?void 0:t.status,statusText:(a=s.response)==null?void 0:a.statusText,data:(r=s.response)==null?void 0:r.data,url:(n=s.config)==null?void 0:n.url,method:(i=s.config)==null?void 0:i.method}),s.response){const{status:c,data:d}=s.response;return c===401?(localStorage.removeItem("pulsedeck-app-storage"),Promise.reject(new Error("Session expired. Please sign in again."))):c===403?Promise.reject(new Error((d==null?void 0:d.message)||"Access denied")):c===429?Promise.reject(new Error("Too many requests. Please wait a moment and try again.")):c>=500?Promise.reject(new Error("Server error. Please try again later.")):c===502?Promise.reject(new Error("Bad Gateway - Server connection failed. Please try again.")):c===503?Promise.reject(new Error("Service Unavailable - Server is temporarily down. Please try again.")):c===504?Promise.reject(new Error("Gateway Timeout - Server took too long to respond. Please try again.")):Promise.reject(new Error((d==null?void 0:d.message)||`Request failed with status ${c}`))}else return s.request?s.code==="ECONNABORTED"?Promise.reject(new Error("Request timeout. Please try again.")):Promise.reject(new Error("Network error. Please check your connection and try again.")):Promise.reject(new Error(s.message||"An unexpected error occurred"))});const M=Ws()(Ks((s,t)=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!0},error_message:null},current_workspace:null,date_range_filter:{date_from:null,date_to:null,date_preset:"last_30_days",comparison_mode:null},platform_filter:{selected_platforms:[],selected_accounts:[]},notification_state:{alerts:[],toast_notifications:[]},upload_state:{active_uploads:[],recent_uploads:[]},socket:null,is_connected:!1,login_user:async(a,r)=>{s(n=>({authentication_state:{...n.authentication_state,authentication_status:{...n.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{await It(async()=>{const y=await D.get(`${Ce()}/api/status`,{timeout:5e3});if(!y.data||!y.data.success)throw new Error("API status check failed")},2,1e3);const n=await It(async()=>await D.post(`${Ce()}/api/auth/login`,{email:a,password:r},{headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:15e3,validateStatus:y=>y<500}),3,1e3),{user:i,token:c,workspace:d}=n.data;if(!i||!c)throw new Error("Invalid response from server");s(()=>({authentication_state:{current_user:i,auth_token:c,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null},current_workspace:d?{id:d.id,name:d.name,role:"owner",created_at:d.created_at}:null})),t().connect_websocket()}catch(n){console.error("Login error:",n);let i="Login failed";throw n.message.includes("Network error")||n.message.includes("timeout")?i="Connection failed. Please check your internet connection and try again.":n.message.includes("Service temporarily unavailable")?i="Service is temporarily unavailable. Please try again in a few moments.":n.message&&(i=n.message),s(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:i}})),new Error(i)}},register_user:async(a,r,n)=>{var i,c;s(d=>({authentication_state:{...d.authentication_state,authentication_status:{...d.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const d=await D.post(`${Ce()}/api/auth/register`,{email:a,password:r,name:n},{headers:{"Content-Type":"application/json"}}),{user:y,token:b,workspace:N}=d.data;s(()=>({authentication_state:{current_user:y,auth_token:b,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null},current_workspace:N?{id:N.id,name:N.name,role:"owner",created_at:N.created_at}:null})),t().connect_websocket()}catch(d){const y=((c=(i=d.response)==null?void 0:i.data)==null?void 0:c.message)||d.message||"Registration failed";throw s(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:y}})),new Error(y)}},initialize_auth:async()=>{const{authentication_state:a}=t(),r=a.auth_token;if(!r){s(n=>({authentication_state:{...n.authentication_state,authentication_status:{...n.authentication_state.authentication_status,is_loading:!1}}}));return}try{await D.get(`${Ce()}/api/status`,{timeout:5e3});const i=(await D.get(`${Ce()}/api/auth/me`,{headers:{Authorization:`Bearer ${r}`},timeout:1e4})).data;if(!i||!i.id)throw new Error("Invalid user data received");s(()=>({authentication_state:{current_user:i,auth_token:r,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),t().connect_websocket()}catch(n){console.warn("Auth initialization failed:",n),s(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null},current_workspace:null}))}},logout_user:()=>{t().disconnect_websocket(),s(()=>({authentication_state:{current_user:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null},current_workspace:null,notification_state:{alerts:[],toast_notifications:[]},upload_state:{active_uploads:[],recent_uploads:[]}}))},clear_auth_error:()=>{s(a=>({authentication_state:{...a.authentication_state,error_message:null}}))},update_user_profile:a=>{s(r=>({authentication_state:{...r.authentication_state,current_user:r.authentication_state.current_user?{...r.authentication_state.current_user,...a}:null}}))},switch_workspace:async a=>{var i,c;const{authentication_state:r}=t(),n=r.auth_token;if(!n)throw new Error("No authentication token available");try{const y=(await D.get(`${Ce()}/api/workspaces/${a}`,{headers:{Authorization:`Bearer ${n}`}})).data;s(()=>({current_workspace:{id:y.id,name:y.name,role:"member",created_at:y.created_at}})),t().disconnect_websocket(),t().connect_websocket()}catch(d){const y=((c=(i=d.response)==null?void 0:i.data)==null?void 0:c.message)||d.message||"Failed to switch workspace";throw new Error(y)}},update_workspace_context:a=>{s(()=>({current_workspace:a}))},clear_workspace:()=>{s(()=>({current_workspace:null}))},update_date_range:(a,r,n)=>{s(i=>({date_range_filter:{...i.date_range_filter,date_from:a,date_to:r,date_preset:n||(a&&r?"custom":i.date_range_filter.date_preset)}}))},update_comparison_mode:a=>{s(r=>({date_range_filter:{...r.date_range_filter,comparison_mode:a}}))},update_platform_filter:(a,r=[])=>{s(()=>({platform_filter:{selected_platforms:a,selected_accounts:r}}))},clear_filters:()=>{s(()=>({date_range_filter:{date_from:null,date_to:null,date_preset:"last_30_days",comparison_mode:null},platform_filter:{selected_platforms:[],selected_accounts:[]}}))},add_alert_notification:a=>{const r={...a,id:Ut()};s(n=>({notification_state:{...n.notification_state,alerts:[r,...n.notification_state.alerts]}}))},add_toast_notification:a=>{const r={...a,id:Ut()};s(n=>({notification_state:{...n.notification_state,toast_notifications:[r,...n.notification_state.toast_notifications]}})),a.auto_dismiss&&setTimeout(()=>{t().remove_toast_notification(r.id)},5e3)},mark_alert_as_read:a=>{s(r=>({notification_state:{...r.notification_state,alerts:r.notification_state.alerts.map(n=>n.id===a?{...n,is_read:!0}:n)}}))},remove_toast_notification:a=>{s(r=>({notification_state:{...r.notification_state,toast_notifications:r.notification_state.toast_notifications.filter(n=>n.id!==a)}}))},clear_all_notifications:()=>{s(()=>({notification_state:{alerts:[],toast_notifications:[]}}))},add_active_upload:a=>{s(r=>({upload_state:{...r.upload_state,active_uploads:[a,...r.upload_state.active_uploads]}}))},update_upload_progress:(a,r,n)=>{s(i=>({upload_state:{...i.upload_state,active_uploads:i.upload_state.active_uploads.map(c=>c.id===a?{...c,progress:r,status:n}:c)}}))},complete_upload:(a,r)=>{const{upload_state:n}=t(),i=n.active_uploads.find(c=>c.id===a);if(i){const c={id:i.id,filename:i.filename,status:r,completed_at:new Date().toISOString()};s(d=>({upload_state:{active_uploads:d.upload_state.active_uploads.filter(y=>y.id!==a),recent_uploads:[c,...d.upload_state.recent_uploads.slice(0,4)]}}))}},remove_active_upload:a=>{s(r=>({upload_state:{...r.upload_state,active_uploads:r.upload_state.active_uploads.filter(n=>n.id!==a)}}))},connect_websocket:()=>{const{authentication_state:a,current_workspace:r,socket:n}=t();if(!(!a.auth_token||n!=null&&n.connected))try{const i=Ye(Ce(),{auth:{token:a.auth_token,workspace_id:r==null?void 0:r.id},transports:["websocket"]});i.on("connect",()=>{s(()=>({is_connected:!0})),r!=null&&r.id&&i.emit("join_workspace",r.id)}),i.on("disconnect",()=>{s(()=>({is_connected:!1}))}),i.on("upload_progress",c=>{t().handle_upload_progress(c)}),i.on("notification",c=>{t().handle_notification(c)}),i.on("alert_triggered",c=>{t().add_alert_notification({type:"alert",message:c.message,created_at:c.triggered_at,is_read:!1})}),s({socket:i})}catch(i){console.error("WebSocket connection failed:",i)}},disconnect_websocket:()=>{const{socket:a}=t();a&&(a.disconnect(),s({socket:null,is_connected:!1}))},handle_upload_progress:a=>{const{id:r,progress:n,status:i}=a;i==="completed"||i==="failed"?t().complete_upload(r,i):t().update_upload_progress(r,n,i)},handle_notification:a=>{const{type:r,message:n,auto_dismiss:i=!0}=a;t().add_toast_notification({type:r,message:n,auto_dismiss:i})}}),{name:"pulsedeck-app-storage",partialize:s=>({authentication_state:{current_user:s.authentication_state.current_user,auth_token:s.authentication_state.auth_token,authentication_status:{is_authenticated:s.authentication_state.authentication_status.is_authenticated,is_loading:!1},error_message:null},current_workspace:s.current_workspace,date_range_filter:s.date_range_filter,platform_filter:s.platform_filter})})),Ua=()=>{const[s,t]=l.useState(!1),[a,r]=l.useState(!1),[n,i]=l.useState(!1),[c,d]=l.useState(!1),[y,b]=l.useState(!1),N=M(x=>x.authentication_state.current_user),g=M(x=>x.authentication_state.auth_token),o=M(x=>x.current_workspace),S=M(x=>x.date_range_filter),C=M(x=>x.platform_filter),B=M(x=>x.logout_user),$=M(x=>x.switch_workspace),P=M(x=>x.update_date_range),u=M(x=>x.update_comparison_mode),w=M(x=>x.update_platform_filter),U=Pe(),O="https://123ad-performance.launchpulse.ai",{data:X=[],isLoading:z}=ae({queryKey:["workspaces"],queryFn:async()=>(await D.get(`${O}/api/workspaces`,{headers:{Authorization:`Bearer ${g}`}})).data,enabled:!!g,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:E,refetch:G}=ae({queryKey:["notifications",o==null?void 0:o.id],queryFn:async()=>{if(!(o!=null&&o.id))throw new Error("No workspace selected");return(await D.get(`${O}/api/workspaces/${o.id}/notifications`,{headers:{Authorization:`Bearer ${g}`},params:{limit:5,sort_by:"created_at",sort_order:"desc"}})).data},enabled:!!g&&!!(o!=null&&o.id),staleTime:3e4,refetchOnWindowFocus:!1,retry:1}),Y=te({mutationFn:async x=>{await $(x)},onSuccess:()=>{r(!1),U.invalidateQueries({queryKey:["notifications"]})}}),L=te({mutationFn:async({notificationId:x})=>{if(!(o!=null&&o.id))throw new Error("No workspace selected");await D.put(`${O}/api/workspaces/${o.id}/notifications/${x}`,{is_read:!0,read_at:new Date().toISOString()},{headers:{Authorization:`Bearer ${g}`}})},onSuccess:()=>{G()}}),p=(E==null?void 0:E.data.filter(x=>!x.is_read).length)||0,R=(E==null?void 0:E.data)||[],I=[{label:"Today",value:"today"},{label:"Yesterday",value:"yesterday"},{label:"Last 7 days",value:"last_7_days"},{label:"Last 30 days",value:"last_30_days"},{label:"Last 90 days",value:"last_90_days"},{label:"Month to date",value:"mtd"},{label:"Quarter to date",value:"qtd"},{label:"Year to date",value:"ytd"}],H=[{id:"tiktok",name:"TikTok",color:"bg-black text-white"},{id:"facebook",name:"Meta",color:"bg-blue-600 text-white"},{id:"snapchat",name:"Snapchat",color:"bg-yellow-400 text-black"}],K=x=>{Y.mutate(x)},re=x=>{var T;(T=R.find(Z=>Z.id===x))!=null&&T.is_read||L.mutate({notificationId:x})},h=x=>{const T=new Date;let Z=null,_=null;switch(x){case"today":Z=_=T.toISOString().split("T")[0];break;case"yesterday":{const F=new Date(T);F.setDate(F.getDate()-1),Z=_=F.toISOString().split("T")[0];break}case"last_7_days":{const F=new Date(T);F.setDate(F.getDate()-7),Z=F.toISOString().split("T")[0],_=T.toISOString().split("T")[0];break}case"last_30_days":{const F=new Date(T);F.setDate(F.getDate()-30),Z=F.toISOString().split("T")[0],_=T.toISOString().split("T")[0];break}case"last_90_days":{const F=new Date(T);F.setDate(F.getDate()-90),Z=F.toISOString().split("T")[0],_=T.toISOString().split("T")[0];break}}P(Z,_,x),d(!1)},A=x=>{const T=C.selected_platforms,Z=T.includes(x)?T.filter(_=>_!==x):[...T,x];w(Z,C.selected_accounts)},q=()=>{B(),t(!1)};l.useEffect(()=>{const x=()=>{t(!1),r(!1),i(!1),d(!1),b(!1)};return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[]);const f=x=>x.split(" ").map(T=>T[0]).join("").toUpperCase().slice(0,2),m=()=>{if(S.date_preset&&S.date_preset!=="custom"){const x=I.find(T=>T.value===S.date_preset);return(x==null?void 0:x.label)||"Last 30 days"}return S.date_from&&S.date_to?`${S.date_from} - ${S.date_to}`:"Last 30 days"};return e.jsx(e.Fragment,{children:e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(W,{to:o?`/w/${o.id}`:"/",className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"PD"})}),e.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900 hidden sm:block",children:"PulseDeck"})]}),e.jsxs("div",{className:"relative",onClick:x=>x.stopPropagation(),children:[e.jsxs("button",{onClick:()=>r(!a),className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",disabled:z,children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium",children:(o==null?void 0:o.name.charAt(0).toUpperCase())||"W"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 hidden md:block",children:(o==null?void 0:o.name)||"Select Workspace"}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Switch Workspace"})}),z?e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"animate-pulse flex space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded flex-1"})]})}):X.map(x=>e.jsxs("button",{onClick:()=>K(x.workspace.id),className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-medium",children:x.workspace.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.workspace.name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:x.membership.role})]}),(o==null?void 0:o.id)===x.workspace.id&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},x.workspace.id)),e.jsx("div",{className:"border-t border-gray-200 mt-2 pt-2",children:e.jsxs(W,{to:"/w/new",className:"flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 transition-colors text-blue-600",onClick:()=>r(!1),children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{className:"text-sm font-medium",children:"Create New Workspace"})]})})]})]})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",onClick:x=>x.stopPropagation(),children:[e.jsxs("button",{onClick:()=>d(!c),className:"flex items-center space-x-2 px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-700",children:m()}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Date Range"})}),I.map(x=>e.jsx("button",{onClick:()=>h(x.value),className:`w-full text-left px-4 py-2 hover:bg-gray-50 transition-colors ${S.date_preset===x.value?"bg-blue-50 text-blue-700":"text-gray-700"}`,children:e.jsx("span",{className:"text-sm",children:x.label})},x.value)),e.jsxs("div",{className:"border-t border-gray-200 mt-2 pt-2 px-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"Compare to:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"comparison",checked:S.comparison_mode==="vs_previous_period",onChange:()=>u("vs_previous_period"),className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:"Previous period"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"comparison",checked:S.comparison_mode==="vs_same_period_last_year",onChange:()=>u("vs_same_period_last_year"),className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:"Same period last year"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"comparison",checked:!S.comparison_mode,onChange:()=>u(null),className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"ml-2 text-xs text-gray-700",children:"No comparison"})]})]})]})]})]}),e.jsxs("div",{className:"relative",onClick:x=>x.stopPropagation(),children:[e.jsxs("button",{onClick:()=>b(!y),className:"flex items-center space-x-2 px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex -space-x-1",children:C.selected_platforms.length>0?C.selected_platforms.slice(0,3).map(x=>{const T=H.find(Z=>Z.id===x);return e.jsx("div",{className:`w-5 h-5 rounded-full ${(T==null?void 0:T.color)||"bg-gray-400"} flex items-center justify-center text-xs font-medium border-2 border-white`,children:T==null?void 0:T.name.charAt(0)},x)}):e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),e.jsx("span",{className:"text-sm text-gray-700",children:C.selected_platforms.length>0?`${C.selected_platforms.length} platform${C.selected_platforms.length>1?"s":""}`:"All platforms"}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Platforms"})}),H.map(x=>e.jsxs("button",{onClick:()=>A(x.id),className:"w-full flex items-center space-x-3 px-4 py-3 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:`w-5 h-5 rounded-full ${x.color} flex items-center justify-center text-xs font-medium`,children:x.name.charAt(0)}),e.jsx("span",{className:"flex-1 text-left text-sm text-gray-700",children:x.name}),C.selected_platforms.includes(x.id)&&e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},x.id))]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",onClick:x=>x.stopPropagation(),children:[e.jsxs("button",{onClick:()=>i(!n),className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),p>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:p>9?"9+":p})]}),n&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Notifications"}),e.jsx(W,{to:o?`/w/${o.id}/alerts`:"/alerts",className:"text-xs text-blue-600 hover:text-blue-700",onClick:()=>i(!1),children:"View all"})]}),R.length===0?e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsx("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e.jsx("p",{className:"text-sm text-gray-500",children:"No notifications"})]}):R.map(x=>e.jsx("button",{onClick:()=>re(x.id),className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors border-l-4 ${x.is_read?"border-transparent":x.priority==="urgent"?"border-red-500":x.priority==="high"?"border-orange-500":"border-blue-500"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${x.is_read?"bg-gray-300":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-sm ${x.is_read?"text-gray-600":"text-gray-900 font-medium"}`,children:x.title}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:x.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:new Date(x.created_at).toLocaleDateString()})]})]})},x.id))]})]}),e.jsxs("div",{className:"relative",onClick:x=>x.stopPropagation(),children:[e.jsxs("button",{onClick:()=>t(!s),className:"flex items-center space-x-2 p-1 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:N?f(N.name):"U"})}),e.jsx("svg",{className:"w-4 h-4 text-gray-500 hidden sm:block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-10",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N==null?void 0:N.name}),e.jsx("p",{className:"text-xs text-gray-500",children:N==null?void 0:N.email}),o&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.name,"  ",o.role]})]}),e.jsxs("div",{className:"py-1",children:[e.jsxs(W,{to:o?`/w/${o.id}/settings`:"/settings",className:"flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 transition-colors text-gray-700",onClick:()=>t(!1),children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{className:"text-sm",children:"Profile Settings"})]}),e.jsxs(W,{to:o?`/w/${o.id}/settings`:"/settings",className:"flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 transition-colors text-gray-700",onClick:()=>t(!1),children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"text-sm",children:"Workspace Settings"})]}),e.jsxs("a",{href:"#",className:"flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 transition-colors text-gray-700",onClick:x=>{x.preventDefault(),t(!1)},children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm",children:"Help & Documentation"})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-1",children:e.jsxs("button",{onClick:q,className:"flex items-center space-x-3 px-4 py-2 hover:bg-gray-50 transition-colors text-red-600 w-full text-left",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{className:"text-sm",children:"Sign out"})]})})]})]})]})]}),e.jsxs("div",{className:"lg:hidden border-t border-gray-200 px-4 py-3 space-y-3",children:[e.jsx("div",{className:"relative",onClick:x=>x.stopPropagation(),children:e.jsxs("button",{onClick:()=>d(!c),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm text-gray-700",children:m()})]}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),e.jsx("div",{className:"relative",onClick:x=>x.stopPropagation(),children:e.jsxs("button",{onClick:()=>b(!y),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex -space-x-1",children:C.selected_platforms.length>0?C.selected_platforms.slice(0,3).map(x=>{const T=H.find(Z=>Z.id===x);return e.jsx("div",{className:`w-5 h-5 rounded-full ${(T==null?void 0:T.color)||"bg-gray-400"} flex items-center justify-center text-xs font-medium border-2 border-white`,children:T==null?void 0:T.name.charAt(0)},x)}):e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})}),e.jsx("span",{className:"text-sm text-gray-700",children:C.selected_platforms.length>0?`${C.selected_platforms.length} platform${C.selected_platforms.length>1?"s":""}`:"All platforms"})]}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]})]})})};function Ia({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const us=l.forwardRef(Ia);function Va({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const Vt=l.forwardRef(Va);function Wa({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const Ha=l.forwardRef(Wa);function Ya({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const hs=l.forwardRef(Ya);function Ka({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"}))}const Qa=l.forwardRef(Ka);function Ga({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Za=l.forwardRef(Ga);function Xa({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const ps=l.forwardRef(Xa);function Ja({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const er=l.forwardRef(Ja);function tr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const sr=l.forwardRef(tr);function ar({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const De=l.forwardRef(ar);function rr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Se=l.forwardRef(rr);function nr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const ir=l.forwardRef(nr);function lr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const or=l.forwardRef(lr);function cr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const dr=l.forwardRef(cr);function mr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const xr=l.forwardRef(mr);function ur({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const hr=l.forwardRef(ur);function pr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const gr=l.forwardRef(pr);function fr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const gs=l.forwardRef(fr);function br({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Oe=l.forwardRef(br);function yr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const Wt=l.forwardRef(yr);function jr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Ht=l.forwardRef(jr);function vr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const wr=l.forwardRef(vr);function Nr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const _r=l.forwardRef(Nr);function kr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const Cr=l.forwardRef(kr);function Sr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Lr=l.forwardRef(Sr);function Ar({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Yt=l.forwardRef(Ar);function Er({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const tt=l.forwardRef(Er);function Pr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const Rr=l.forwardRef(Pr);function Mr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const $r=l.forwardRef(Mr);function Tr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const Br=l.forwardRef(Tr);function Fr({title:s,titleId:t,...a},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ye=l.forwardRef(Fr),Dr=()=>{var P;const[s,t]=l.useState(!1),[a,r]=l.useState(!1),[n,i]=l.useState(!1),c=ys(),{workspace_id:d}=he(),y=M(u=>u.current_workspace),b=M(u=>u.authentication_state.auth_token),g=(()=>{const u=c.pathname;return u.includes("/channels")?"channels":u.includes("/campaigns")?"campaigns":u.includes("/creatives")?"creatives":u.includes("/uploads")||u.includes("/upload")?"uploads":u.includes("/alerts")?"alerts":u.includes("/settings")?"settings":"overview"})(),{data:o}=ae({queryKey:["alertCount",d],queryFn:async()=>{if(!d||!b)throw new Error("Missing workspace or auth token");return(await D.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${d}/alert-triggers`,{params:{is_resolved:"false",limit:1},headers:{Authorization:`Bearer ${b}`}})).data},enabled:!!d&&!!b,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),S=((P=o==null?void 0:o.pagination)==null?void 0:P.total)||0,C=[{name:"Overview",href:`/w/${d}`,icon:wr,active:g==="overview",description:"Dashboard and KPI overview"},{name:"Channels",href:`/w/${d}/channels`,icon:De,active:g==="channels",description:"Cross-platform comparison"},{name:"Campaigns",href:`/w/${d}/campaigns`,icon:Cr,active:g==="campaigns",description:"Campaign management"},{name:"Creatives",href:`/w/${d}/creatives`,icon:Lr,active:g==="creatives",description:"Creative performance"},{name:"Uploads",href:`/w/${d}/uploads`,icon:Ha,active:g==="uploads",description:"Data upload management"},{name:"Alerts",href:`/w/${d}/alerts`,icon:ps,active:g==="alerts",description:"Alert rules and notifications",badge:S>0?S:null},{name:"Settings",href:`/w/${d}/settings`,icon:gr,active:g==="settings",description:"Workspace and user settings"}],B=()=>{t(!s)},$=()=>{i(!n)};return l.useEffect(()=>{i(!1)},[c.pathname]),l.useEffect(()=>{const u=()=>{a&&r(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[a]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:$,className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors","aria-label":"Toggle navigation menu",children:n?e.jsx(ye,{className:"h-6 w-6"}):e.jsx(Za,{className:"h-6 w-6"})})}),n&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:$}),e.jsxs("div",{className:`hidden lg:flex lg:flex-col lg:fixed lg:inset-y-0 lg:z-50 bg-white border-r border-gray-200 transition-all duration-300 ${s?"lg:w-16":"lg:w-60"}`,children:[e.jsx("div",{className:"flex items-center px-4 py-4 border-b border-gray-200",children:e.jsxs(W,{to:`/w/${d}`,className:"flex items-center space-x-3 text-gray-900 hover:text-blue-600 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"P"})}),!s&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-bold",children:"PulseDeck"}),y&&e.jsx("span",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:y.name})]})]})}),e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:C.map(u=>{const w=u.icon;return e.jsxs(W,{to:u.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${u.active?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,title:s?u.description:void 0,children:[e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:`flex-shrink-0 h-5 w-5 ${u.active?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`}),u.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:u.badge>99?"99+":u.badge})]}),!s&&e.jsxs("div",{className:"ml-3 flex items-center justify-between w-full",children:[e.jsx("span",{children:u.name}),u.badge&&e.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full",children:u.badge>99?"99+":u.badge})]})]},u.name)})}),e.jsx("div",{className:"px-2 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>r(!a),className:`group flex items-center w-full px-2 py-2 text-sm font-medium rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors ${s?"justify-center":""}`,title:s?"Help & Support":void 0,children:[e.jsx(tt,{className:"flex-shrink-0 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),!s&&e.jsx("span",{className:"ml-3",children:"Help & Support"})]}),a&&!s&&e.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-1 bg-white border border-gray-200 rounded-md shadow-lg py-1",children:[e.jsx("a",{href:"https://docs.pulsedeck.com",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Documentation"}),e.jsx("a",{href:"mailto:support@pulsedeck.com",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Contact Support"}),e.jsx("a",{href:"https://feedback.pulsedeck.com",target:"_blank",rel:"noopener noreferrer",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"Feature Request"})]})]})}),e.jsx("div",{className:"px-2 pb-4",children:e.jsx("button",{onClick:B,className:"group flex items-center w-full px-2 py-2 text-sm font-medium rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors","aria-label":s?"Expand sidebar":"Collapse sidebar",children:s?e.jsx(dr,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-500"}):e.jsxs(e.Fragment,{children:[e.jsx(or,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-500"}),e.jsx("span",{className:"ml-3",children:"Collapse"})]})})})]}),e.jsxs("div",{className:`lg:hidden fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ${n?"translate-x-0":"-translate-x-full"}`,children:[e.jsx("div",{className:"flex items-center px-4 py-4 border-b border-gray-200",children:e.jsxs(W,{to:`/w/${d}`,className:"flex items-center space-x-3 text-gray-900",onClick:$,children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"P"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-bold",children:"PulseDeck"}),y&&e.jsx("span",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:y.name})]})]})}),e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:C.map(u=>{const w=u.icon;return e.jsxs(W,{to:u.href,onClick:$,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${u.active?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:`flex-shrink-0 h-5 w-5 ${u.active?"text-blue-500":"text-gray-400 group-hover:text-gray-500"}`}),u.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:u.badge>99?"99+":u.badge})]}),e.jsxs("div",{className:"ml-3 flex items-center justify-between w-full",children:[e.jsx("span",{children:u.name}),u.badge&&e.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full",children:u.badge>99?"99+":u.badge})]})]},u.name)})}),e.jsxs("div",{className:"px-2 py-4 border-t border-gray-200 space-y-1",children:[e.jsxs("a",{href:"https://docs.pulsedeck.com",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:[e.jsx(tt,{className:"flex-shrink-0 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),e.jsx("span",{className:"ml-3",children:"Documentation"})]}),e.jsxs("a",{href:"mailto:support@pulsedeck.com",className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors",children:[e.jsx(tt,{className:"flex-shrink-0 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),e.jsx("span",{className:"ml-3",children:"Contact Support"})]})]})]}),e.jsx("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-40",children:e.jsx("div",{className:"grid grid-cols-4 gap-1 px-2 py-2",children:C.slice(0,4).map(u=>{const w=u.icon;return e.jsxs(W,{to:u.href,className:`flex flex-col items-center p-2 text-xs font-medium rounded-md transition-colors ${u.active?"text-blue-700 bg-blue-50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:`h-5 w-5 ${u.active?"text-blue-500":"text-gray-400"}`}),u.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:u.badge>9?"9+":u.badge})]}),e.jsx("span",{className:"mt-1 truncate",children:u.name})]},u.name)})})}),e.jsx("div",{className:"sm:hidden h-16"})]})},fs=()=>{const s=M(b=>b.authentication_state.authentication_status.is_authenticated),t=M(b=>b.authentication_state.auth_token),[a,r]=l.useState({status:"unknown",last_check:"",response_time:0}),[n]=l.useState({version:"1.0.0",build:"development",release_date:"2024-01-15"}),{data:i}=ae({queryKey:["api-status-check"],queryFn:async()=>{var N;const b=performance.now();try{const g=await D.get("https://123ad-performance.launchpulse.ai/api/auth/me",{headers:t?{Authorization:`Bearer ${t}`}:{},timeout:1e4}),o=performance.now()-b;return{status:g.status===200?"operational":"degraded",response_time:Math.round(o),last_check:new Date().toISOString()}}catch(g){const o=performance.now()-b;return D.isAxiosError(g)&&((N=g.response)==null?void 0:N.status)===401&&!t?{status:"operational",response_time:Math.round(o),last_check:new Date().toISOString()}:{status:"degraded",response_time:Math.round(o),last_check:new Date().toISOString()}}},refetchInterval:5*60*1e3,staleTime:4*60*1e3,retry:1,refetchOnWindowFocus:!1});l.useEffect(()=>{i&&r(i)},[i]);const c=b=>{window.open(b,"_blank","noopener,noreferrer")},y=(()=>{switch(a.status){case"operational":return{color:"text-green-600",bgColor:"bg-green-100",dotColor:"bg-green-600",text:"Operational"};case"degraded":return{color:"text-yellow-600",bgColor:"bg-yellow-100",dotColor:"bg-yellow-600",text:"Degraded"};default:return{color:"text-gray-600",bgColor:"bg-gray-100",dotColor:"bg-gray-600",text:"Unknown"}}})();return e.jsx(e.Fragment,{children:e.jsx("footer",{className:"bg-white border-t border-gray-200 mt-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Support"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://docs.pulsedeck.com"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Help Center",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("mailto:support@pulsedeck.com"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Contact Support",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://feedback.pulsedeck.com"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Feature Requests",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://status.pulsedeck.com"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["System Status",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Legal"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://pulsedeck.com/privacy"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Privacy Policy",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://pulsedeck.com/terms"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Terms of Service",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://pulsedeck.com/cookies"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Cookie Policy",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://pulsedeck.com/gdpr"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["GDPR Information",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Application"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zt,{className:"h-4 w-4 mr-2 text-blue-600"}),e.jsxs("span",{children:["Version ",n.version]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(nt,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsxs("span",{children:["Released ",n.release_date]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-2 w-2 rounded-full mr-2 ${y.dotColor}`}),e.jsxs("span",{className:y.color,children:["API ",y.text]})]}),a.response_time>0&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Response: ",a.response_time,"ms"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wider",children:"Resources"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://docs.pulsedeck.com/api"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["API Documentation",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://community.pulsedeck.com"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Community Forum",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://github.com/pulsedeck"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Developer Resources",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>c("https://twitter.com/pulsedeck"),className:"text-gray-600 hover:text-gray-900 text-sm flex items-center group transition-colors",children:["Follow Updates",e.jsx(de,{className:"ml-1 h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})})]})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx("span",{children:" 2024 PulseDeck Analytics."}),e.jsx("span",{className:"hidden sm:inline",children:"All rights reserved."}),e.jsx(_s,{className:"h-4 w-4 text-red-500 ml-1"})]}),s&&e.jsxs("div",{className:"text-xs text-gray-500 space-x-3",children:[e.jsxs("span",{children:["Build: ",n.build]}),a.last_check&&e.jsxs("span",{children:["Last health check: ",new Date(a.last_check).toLocaleTimeString()]})]})]})})]})})})},Or=()=>{const s=M(o=>o.notification_state.toast_notifications),t=M(o=>o.notification_state.alerts),a=M(o=>o.upload_state.active_uploads),r=M(o=>o.current_workspace),n=M(o=>o.authentication_state.auth_token),i=M(o=>o.remove_toast_notification),c=M(o=>o.mark_alert_as_read),d=te({mutationFn:async({workspaceId:o,notificationId:S})=>(await D.put(`https://123ad-performance.launchpulse.ai/api/workspaces/${o}/notifications/${S}`,{is_read:!0,read_at:new Date().toISOString()},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).data});l.useEffect(()=>{s.forEach(o=>{if(o.auto_dismiss){const C=setTimeout(()=>{i(o.id)},5e3);return()=>clearTimeout(C)}})},[s,i]);const y=l.useCallback(o=>{i(o)},[i]),b=l.useCallback(async o=>{if(c(o),r!=null&&r.id)try{await d.mutateAsync({workspaceId:r.id,notificationId:o})}catch(S){console.error("Failed to mark notification as read:",S)}},[c,r,d]),N=(o,S)=>{const C="h-5 w-5";switch(o){case"success":return e.jsx(le,{className:`${C} text-green-500`});case"error":return e.jsx(Cs,{className:`${C} text-red-500`});case"warning":return e.jsx(it,{className:`${C} text-yellow-500`});case"alert":return e.jsx(it,{className:`${C} text-blue-500`});default:return e.jsx(ks,{className:`${C} text-blue-500`})}},g=(o,S)=>{switch(o){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"alert":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm w-full",children:s.map(o=>e.jsx("div",{className:`
              transform transition-all duration-300 ease-in-out
              bg-white rounded-lg shadow-lg border-l-4 p-4
              ${o.type==="success"?"border-l-green-500":""}
              ${o.type==="error"?"border-l-red-500":""}
              ${o.type==="warning"?"border-l-yellow-500":""}
              ${o.type==="info"?"border-l-blue-500":""}
              animate-slide-in-right
            `,role:"alert","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:N(o.type)}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm text-gray-600",children:o.message})}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:e.jsx("button",{onClick:()=>y(o.id),className:"rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Dismiss notification",children:e.jsx(Le,{className:"h-4 w-4"})})})]})},o.id))}),t.filter(o=>!o.is_read).length>0&&e.jsx("div",{className:"fixed top-16 left-0 right-0 z-40",children:t.filter(o=>!o.is_read).slice(0,3).map(o=>e.jsx("div",{className:`
                  ${g(o.type)} 
                  border-b px-4 py-3 sm:px-6 lg:px-8
                `,role:"alert","aria-live":"assertive",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:N(o.type)}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium",children:o.message})})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>b(o.id),className:"rounded-md inline-flex text-current hover:text-opacity-75 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current","aria-label":"Dismiss alert",children:e.jsx(Le,{className:"h-4 w-4"})})})]})},o.id))}),a.length>0&&e.jsx("div",{className:"fixed top-4 right-4 z-40 space-y-2 max-w-sm w-full",style:{marginTop:`${s.length*80+16}px`},children:a.map(o=>e.jsx("div",{className:"bg-white rounded-lg shadow-lg border p-4 animate-slide-in-right",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Processing ",o.platform," data"]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:o.filename}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:o.status}),e.jsxs("span",{children:[o.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300 ease-out",style:{width:`${o.progress}%`}})})]})]})]})},o.id))}),e.jsx("style",{children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
      `})]})},zr=()=>{const s=Ee(),t=M(b=>b.authentication_state.auth_token),[a,r]=l.useState(null),n=[{name:"Sarah Chen",company:"Growth Marketing Agency",testimonial:"PulseDeck reduced our reporting time from hours to minutes. The cross-platform insights are game-changing.",avatar_url:"https://picsum.photos/64/64?random=1"},{name:"Marcus Johnson",company:"E-commerce Startup",testimonial:"Finally, a tool that gives us unified analytics across TikTok, Meta, and Snapchat. ROI visibility has never been clearer.",avatar_url:"https://picsum.photos/64/64?random=2"},{name:"Emily Rodriguez",company:"Digital Agency",testimonial:"The automated insights save us so much time. We can focus on optimization instead of data compilation.",avatar_url:"https://picsum.photos/64/64?random=3"}],i=[{name:"TikTok",logo_url:"https://picsum.photos/80/80?random=tiktok",description:"TikTok Ads Manager"},{name:"Meta",logo_url:"https://picsum.photos/80/80?random=meta",description:"Facebook & Instagram Ads"},{name:"Snapchat",logo_url:"https://picsum.photos/80/80?random=snapchat",description:"Snapchat Ads Manager"}],c=te({mutationFn:async()=>(await D.post("https://123ad-performance.launchpulse.ai/api/workspaces",{name:"Demo Workspace",default_currency:"USD",timezone:"UTC",data_retention_days:730},{headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}})).data,onSuccess:b=>{r(null),s(`/w/${b.workspace.id}`)},onError:b=>{var g,o;const N=((o=(g=b.response)==null?void 0:g.data)==null?void 0:o.message)||b.message||"Failed to create demo workspace";r(N)}}),d=()=>{r(null),c.mutate()},y=()=>{r(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative bg-gradient-to-br from-blue-50 to-indigo-100 overflow-hidden",children:[e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"relative z-10 pb-8 bg-gradient-to-br from-blue-50 to-indigo-100 sm:pb-16 md:pb-20 lg:max-w-2xl lg:w-full lg:pb-28 xl:pb-32",children:e.jsx("div",{className:"mt-10 mx-auto max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28",children:e.jsxs("div",{className:"sm:text-center lg:text-left",children:[e.jsxs("h1",{className:"text-4xl tracking-tight font-bold text-gray-900 sm:text-5xl md:text-6xl",children:[e.jsx("span",{className:"block xl:inline",children:"Cross-platform ad"}),e.jsx("span",{className:"block text-blue-600 xl:inline",children:" analytics made simple"})]}),e.jsx("p",{className:"mt-3 text-base text-gray-600 sm:mt-5 sm:text-lg sm:max-w-xl sm:mx-auto md:mt-5 md:text-xl lg:mx-0 leading-relaxed",children:"Get unified analytics across TikTok, Meta, and Snapchat in under 60 seconds. Automated insights, cross-platform comparison, and proactive alerts  all in one dashboard."}),e.jsxs("div",{className:"mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start",children:[e.jsx("div",{className:"rounded-md shadow",children:e.jsx(W,{to:"/signup",className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-all duration-200 md:py-4 md:text-lg md:px-10 shadow-lg hover:shadow-xl",children:"Start Free Today"})}),e.jsx("div",{className:"mt-3 sm:mt-0 sm:ml-3",children:e.jsx("button",{onClick:d,disabled:c.isPending,className:"w-full flex items-center justify-center px-8 py-3 border border-gray-300 text-base font-medium rounded-lg text-gray-900 bg-white hover:bg-gray-50 transition-all duration-200 md:py-4 md:text-lg md:px-10 disabled:opacity-50 disabled:cursor-not-allowed",children:c.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating demo..."]}):"View Live Demo"})})]}),a&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm",children:a}),e.jsx("button",{onClick:y,className:"ml-2 text-red-500 hover:text-red-700",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"mt-6 text-sm text-gray-500 sm:text-center lg:text-left",children:["Already have an account?",e.jsx(W,{to:"/signin",className:"ml-1 text-blue-600 hover:text-blue-500 font-medium",children:"Sign in"})]})]})})})}),e.jsx("div",{className:"lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2",children:e.jsx("div",{className:"h-56 w-full bg-gray-100 sm:h-72 md:h-96 lg:w-full lg:h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-32 h-32 bg-blue-600 rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("svg",{className:"w-16 h-16 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Dashboard Preview"})]})})})]}),e.jsx("div",{className:"py-12 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"lg:text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 sm:text-4xl",children:"Everything you need to optimize cross-platform campaigns"}),e.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-600 lg:mx-auto leading-relaxed",children:"Stop switching between platforms. Get unified analytics, automated insights, and proactive alerts in one place."})]}),e.jsx("div",{className:"mt-10",children:e.jsxs("dl",{className:"space-y-10 md:space-y-0 md:grid md:grid-cols-3 md:gap-x-8 md:gap-y-10",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("dt",{children:[e.jsx("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-lg bg-blue-600 text-white",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),e.jsx("p",{className:"ml-16 text-lg leading-6 font-medium text-gray-900",children:"Unified Analytics"})]}),e.jsx("dd",{className:"mt-2 ml-16 text-base text-gray-600",children:"Connect TikTok, Meta, and Snapchat data in one dashboard. No more manual exports or spreadsheet juggling."})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("dt",{children:[e.jsx("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-lg bg-blue-600 text-white",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("p",{className:"ml-16 text-lg leading-6 font-medium text-gray-900",children:"Automated Insights"})]}),e.jsx("dd",{className:"mt-2 ml-16 text-base text-gray-600",children:"AI-powered insights highlight performance anomalies, optimization opportunities, and winning creative patterns."})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("dt",{children:[e.jsx("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-lg bg-blue-600 text-white",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"ml-16 text-lg leading-6 font-medium text-gray-900",children:"Time Savings"})]}),e.jsx("dd",{className:"mt-2 ml-16 text-base text-gray-600",children:"From upload to insights in under 60 seconds. Spend time optimizing campaigns, not compiling reports."})]})]})})]})}),e.jsx("div",{className:"py-12 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"lg:text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 sm:text-4xl",children:"Seamless platform integration"}),e.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-600 lg:mx-auto leading-relaxed",children:"Simply export your campaign data and upload to PulseDeck. We handle the rest."})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-3",children:i.map((b,N)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{className:"h-20 w-20 rounded-xl shadow-lg",src:b.logo_url,alt:b.name})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:b.name}),e.jsx("p",{className:"mt-2 text-base text-gray-600",children:b.description}),N<i.length-1&&e.jsx("div",{className:"hidden sm:block mt-6",children:e.jsx("svg",{className:"mx-auto h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})})]},b.name))}),e.jsx("div",{className:"mt-10 text-center",children:e.jsxs("div",{className:"inline-flex items-center px-6 py-3 bg-blue-600 rounded-lg",children:[e.jsx("svg",{className:"h-8 w-8 text-white mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("span",{className:"text-white font-medium text-lg",children:"PulseDeck Dashboard"})]})})]})]})}),e.jsx("div",{className:"py-12 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"lg:text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 sm:text-4xl",children:"Trusted by marketing teams worldwide"}),e.jsx("p",{className:"mt-4 max-w-2xl text-xl text-gray-600 lg:mx-auto leading-relaxed",children:"Join hundreds of marketers who have transformed their cross-platform analytics workflow."})]}),e.jsx("div",{className:"mt-10",children:e.jsx("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:n.map(b=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("p",{className:"text-gray-900 leading-relaxed",children:['"',b.testimonial,'"']}),e.jsxs("div",{className:"mt-6 flex items-center",children:[e.jsx("img",{className:"h-12 w-12 rounded-full",src:b.avatar_url,alt:b.name}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.name}),e.jsx("p",{className:"text-sm text-gray-600",children:b.company})]})]})]},b.name))})}),e.jsx("div",{className:"mt-10 text-center",children:e.jsxs("div",{className:"flex justify-center items-center space-x-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"500+"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"10M+"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ad Spend Analyzed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"99.9%"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Uptime"})]})]})})]})}),e.jsx("div",{className:"bg-blue-600",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16 px-4 sm:py-20 sm:px-6 lg:px-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white sm:text-4xl",children:[e.jsx("span",{className:"block",children:"Ready to transform your"}),e.jsx("span",{className:"block",children:"ad analytics workflow?"})]}),e.jsx("p",{className:"mt-4 text-lg leading-6 text-blue-200",children:"Start free today. No credit card required. Set up in under 5 minutes."}),e.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(W,{to:"/signup",className:"inline-flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-lg text-blue-600 bg-white hover:bg-gray-50 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Get Started Free"}),e.jsx("button",{onClick:d,disabled:c.isPending,className:"inline-flex items-center justify-center px-8 py-3 border border-white text-base font-medium rounded-lg text-white bg-transparent hover:bg-blue-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:c.isPending?"Creating demo...":"Try Live Demo"})]})]})}),e.jsx("div",{className:"py-12 bg-gray-50",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"lg:text-center",children:e.jsx("h2",{className:"text-3xl font-bold text-gray-900 sm:text-4xl",children:"Frequently asked questions"})}),e.jsxs("div",{className:"mt-10 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"How secure is my campaign data?"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Your data is encrypted at rest and in transit. We use industry-standard security practices and never store your platform credentials. Data is processed locally and deleted after analysis."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Which platforms do you support?"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Currently we support TikTok Ads Manager, Meta Ads Manager (Facebook & Instagram), and Snapchat Ads Manager. More platforms coming soon."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"How long does setup take?"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Setup takes under 5 minutes. Simply export your campaign data from each platform and upload to PulseDeck. Our intelligent mapping handles the rest automatically."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Can I customize the analytics dashboard?"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Yes! You can customize metrics, date ranges, comparison periods, and create custom alerts based on your specific KPIs and performance thresholds."})]})]})]})})]})},qr=s=>{const t={length:s.length>=8,uppercase:/[A-Z]/.test(s),lowercase:/[a-z]/.test(s),numbers:/\d/.test(s)},a=Object.values(t).filter(Boolean).length;let r="Weak";return a>=4?r="Strong":a>=3?r="Good":a>=2&&(r="Fair"),{score:a,requirements:t,strength_label:r}},Kt=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),Ur=()=>{const[s,t]=l.useState({email:"",name:"",password:""}),[a,r]=l.useState({}),[n,i]=l.useState({score:0,requirements:{length:!1,uppercase:!1,lowercase:!1,numbers:!1},strength_label:"Weak"}),[c,d]=l.useState(!1),[y,b]=l.useState(!1),[N,g]=l.useState(!1),[o,S]=l.useState(null),C=M(E=>E.authentication_state.authentication_status.is_loading),B=M(E=>E.authentication_state.error_message),$=M(E=>E.register_user),P=M(E=>E.clear_auth_error),u=l.useCallback(async E=>{var G;if(!E||!Kt(E)){S(null);return}g(!0);try{await D.get("https://123ad-performance.launchpulse.ai/api/users/check-email",{params:{email:E}}),S(!1),r(Y=>({...Y,email:"Email address is already registered"}))}catch(Y){((G=Y.response)==null?void 0:G.status)===404?(S(!0),r(L=>({...L,email:void 0}))):S(null)}finally{g(!1)}},[]);l.useEffect(()=>{const E=setTimeout(()=>{s.email&&u(s.email)},500);return()=>clearTimeout(E)},[s.email,u]),l.useEffect(()=>{if(s.password){const E=qr(s.password);i(E)}else i({score:0,requirements:{length:!1,uppercase:!1,lowercase:!1,numbers:!1},strength_label:"Weak"})},[s.password]);const w=(E,G)=>{t(Y=>({...Y,[E]:G})),r(Y=>({...Y,[E]:void 0,general:void 0})),P()},U=()=>{const E={};return s.email?Kt(s.email)?o===!1&&(E.email="Email address is already registered"):E.email="Please enter a valid email address":E.email="Email address is required",s.name.trim()?s.name.trim().length<2&&(E.name="Name must be at least 2 characters long"):E.name="Full name is required",s.password?n.score<3&&(E.password="Password is too weak. Please meet more requirements."):E.password="Password is required",y||(E.general="You must accept the Terms of Service and Privacy Policy"),r(E),Object.keys(E).length===0},O=async E=>{if(E.preventDefault(),!!U())try{await $(s.email,s.password,s.name)}catch(G){console.error("Registration error:",G)}},X=()=>{console.log("Google sign up clicked")},z=()=>{console.log("GitHub sign up clicked")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 leading-tight",children:"Create your account"}),e.jsx("p",{className:"mt-2 text-gray-600 leading-relaxed",children:"Join thousands of marketers optimizing their ad performance"})]})}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white shadow-lg shadow-gray-200/50 rounded-xl border border-gray-100 py-8 px-6 lg:px-8",children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("button",{type:"button",onClick:X,className:"w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("button",{type:"button",onClick:z,className:"w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-100",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"Continue with GitHub"]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with email"})})]}),e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[(B||a.general)&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:B||a.general})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:E=>w("email",E.target.value),className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none ${a.email?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":o===!0?"border-green-300 focus:border-green-500 focus:ring-4 focus:ring-green-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`,placeholder:"Enter your email"}),N&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})}),o===!0&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(Me,{className:"h-4 w-4 text-green-600"})}),o===!1&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(Le,{className:"h-4 w-4 text-red-600"})})]}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-900 mb-2",children:"Full name"}),e.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:s.name,onChange:E=>w("name",E.target.value),className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none ${a.name?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`,placeholder:"Enter your full name"}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"new-password",required:!0,value:s.password,onChange:E=>w("password",E.target.value),className:`w-full px-4 py-3 pr-12 rounded-lg border-2 transition-all duration-200 focus:outline-none ${a.password?"border-red-300 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100"}`,placeholder:"Create a strong password"}),e.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none",children:c?e.jsx(Ss,{className:"h-5 w-5"}):e.jsx(Ls,{className:"h-5 w-5"})})]}),s.password&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Password strength:"}),e.jsx("span",{className:`text-sm font-medium ${n.score>=4?"text-green-600":n.score>=3?"text-yellow-600":n.score>=2?"text-orange-600":"text-red-600"}`,children:n.strength_label})]}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3,4].map(E=>e.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors duration-200 ${E<=n.score?n.score>=4?"bg-green-500":n.score>=3?"bg-yellow-500":n.score>=2?"bg-orange-500":"bg-red-500":"bg-gray-200"}`},E))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:`flex items-center ${n.requirements.length?"text-green-600":"text-gray-400"}`,children:[n.requirements.length?e.jsx(Me,{className:"h-3 w-3 mr-1"}):e.jsx(Le,{className:"h-3 w-3 mr-1"}),"8+ characters"]}),e.jsxs("div",{className:`flex items-center ${n.requirements.uppercase?"text-green-600":"text-gray-400"}`,children:[n.requirements.uppercase?e.jsx(Me,{className:"h-3 w-3 mr-1"}):e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Uppercase letter"]}),e.jsxs("div",{className:`flex items-center ${n.requirements.lowercase?"text-green-600":"text-gray-400"}`,children:[n.requirements.lowercase?e.jsx(Me,{className:"h-3 w-3 mr-1"}):e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Lowercase letter"]}),e.jsxs("div",{className:`flex items-center ${n.requirements.numbers?"text-green-600":"text-gray-400"}`,children:[n.requirements.numbers?e.jsx(Me,{className:"h-3 w-3 mr-1"}):e.jsx(Le,{className:"h-3 w-3 mr-1"}),"Number"]})]})]}),a.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:E=>b(E.target.checked),className:"mt-1 h-4 w-4 text-blue-600 border-2 border-gray-300 rounded focus:ring-4 focus:ring-blue-100 focus:border-blue-500"}),e.jsxs("span",{className:"ml-3 text-sm text-gray-600 leading-relaxed",children:["I accept the"," ",e.jsx("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Privacy Policy"})]})]})}),e.jsx("button",{type:"submit",disabled:C||!y,className:"w-full flex justify-center py-3 px-6 border border-transparent rounded-lg shadow-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-xl",children:C?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating account..."]}):"Create account"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsx(lt,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Secure"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsx(ot,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Trusted by 10K+"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsx(Zt,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Quick Setup"})]})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(W,{to:"/signin",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Sign in"})]})})]})}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(lt,{className:"h-5 w-5 text-blue-600 mt-0.5"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Email verification required"}),e.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"After creating your account, we'll send you a verification email to confirm your email address and activate your account."})]})]})})})]})})},Ir=()=>{const[s,t]=l.useState({email:"",password:""}),[a,r]=l.useState(!1),[n,i]=l.useState(0),[c,d]=l.useState(!1),[y]=ce(),b=Ee(),N=y.get("redirect"),g=M(O=>O.authentication_state.authentication_status.is_loading),o=M(O=>O.authentication_state.error_message),S=M(O=>O.authentication_state.authentication_status.is_authenticated),C=M(O=>O.current_workspace),B=M(O=>O.login_user),$=M(O=>O.clear_auth_error);l.useEffect(()=>{S&&(N?b(N,{replace:!0}):C?b(`/w/${C.id}`,{replace:!0}):b("/w/default",{replace:!0}))},[S,C,N,b]),l.useEffect(()=>{o&&$()},[s.email,s.password,$,o]);const P=async O=>{if(O.preventDefault(),$(),!(!s.email||!s.password))try{await B(s.email,s.password),i(0)}catch{i(X=>X+1)}},u=O=>X=>{t(z=>({...z,[O]:X.target.value}))},w=()=>{window.location.href="https://123ad-performance.launchpulse.ai/api/auth/google"},U=()=>{window.location.href="https://123ad-performance.launchpulse.ai/api/auth/github"};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-xl bg-blue-600 mb-6",children:e.jsx("svg",{className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your PulseDeck account to access your analytics dashboard"})]}),e.jsxs("div",{className:"bg-white shadow-lg shadow-gray-200/50 rounded-xl border border-gray-100 p-8",children:[o&&e.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 text-red-800 px-4 py-3 rounded-lg",role:"alert",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-red-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:o}),o.includes("Invalid credentials")&&e.jsx("p",{className:"text-xs mt-1",children:"Please check your email and password and try again."}),o.includes("not verified")&&e.jsx("p",{className:"text-xs mt-1",children:"Please check your email for a verification link."})]})]})}),n>=3&&e.jsx("div",{className:"mb-6 bg-yellow-50 border-2 border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg",role:"alert",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-yellow-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"Multiple failed attempts detected"}),e.jsx("p",{className:"text-xs mt-1",children:"For security, your account may be temporarily locked after additional failed attempts."})]})]})}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("button",{type:"button",onClick:w,className:"w-full flex items-center justify-center px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 font-medium",children:[e.jsxs("svg",{className:"h-5 w-5 mr-3",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),e.jsxs("button",{type:"button",onClick:U,className:"w-full flex items-center justify-center px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-300 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 font-medium",children:[e.jsx("svg",{className:"h-5 w-5 mr-3",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"Continue with GitHub"]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500 font-medium",children:"Or continue with email"})})]}),e.jsxs("form",{className:"space-y-6",onSubmit:P,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:u("email"),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",placeholder:"Enter your email address",disabled:g})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"current-password",required:!0,value:s.password,onChange:u("password"),className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200",placeholder:"Enter your password",disabled:g}),e.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 focus:outline-none",children:c?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L8.464 8.464m1.414 1.414l-1.414-1.414M14.12 14.12l1.415 1.415m0 0l1.414-1.414m-1.414 1.414l-1.415-1.415"})}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:a,onChange:O=>r(O.target.checked),className:"h-4 w-4 text-blue-600 border-2 border-gray-300 rounded focus:ring-blue-500 focus:ring-2",disabled:g}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(W,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200",children:"Forgot your password?"})})]}),e.jsx("button",{type:"submit",disabled:g||!s.email||!s.password,className:"w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:g?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in to your account"})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",e.jsx(W,{to:"/signup",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200",children:"Sign up for free"})]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500 max-w-sm mx-auto",children:"By signing in, you agree to our data protection practices. Your information is secure and encrypted."})})]})})})},Vr=()=>{const[s]=ce(),t=Ee(),a=s.get("token"),[r,n]=l.useState({status:"pending",message:null}),[i,c]=l.useState(5),[d,y]=l.useState(0),b=M(P=>P.authentication_state.current_user),N=M(P=>P.update_user_profile),g="https://123ad-performance.launchpulse.ai",o=te({mutationFn:async P=>(await D.post(`${g}/api/auth/verify-email`,{token:P},{headers:{"Content-Type":"application/json"}})).data,onSuccess:P=>{n({status:"success",message:P.message||"Email verified successfully! Redirecting..."}),P.user&&N({email_verified:!0,updated_at:P.user.updated_at}),c(5)},onError:P=>{var U,O;const u=((O=(U=P.response)==null?void 0:U.data)==null?void 0:O.message)||P.message||"Verification failed",w=u.toLowerCase().includes("expired")||u.toLowerCase().includes("expire");n({status:w?"expired":"failed",message:u})}}),S=te({mutationFn:async P=>(await D.post(`${g}/api/auth/verify-email`,{email:P},{headers:{"Content-Type":"application/json"}})).data,onSuccess:P=>{n({status:"pending",message:P.message||"Verification email sent! Please check your inbox."}),y(60)},onError:P=>{var w,U;const u=((U=(w=P.response)==null?void 0:w.data)==null?void 0:U.message)||P.message||"Failed to send verification email";n({status:"failed",message:u})}});l.useEffect(()=>{a?(n({status:"verifying",message:null}),o.mutate(a)):n({status:"failed",message:"No verification token provided. Please check your email for the verification link."})},[a,o]),l.useEffect(()=>{if(r.status==="success"&&i>0){const P=setTimeout(()=>{c(u=>u-1)},1e3);return()=>clearTimeout(P)}else r.status==="success"&&i===0&&t("/")},[r.status,i,t]),l.useEffect(()=>{if(d>0){const P=setTimeout(()=>{y(u=>u-1)},1e3);return()=>clearTimeout(P)}},[d]);const C=l.useCallback(()=>{b!=null&&b.email&&d===0&&S.mutate(b.email)},[b==null?void 0:b.email,d,S]),B=()=>{switch(r.status){case"verifying":return e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-6"});case"success":return e.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"failed":case"expired":return e.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-red-100",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})})});default:return e.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-gray-100",children:e.jsx("svg",{className:"h-8 w-8 text-gray-600",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})})})}},$=()=>{switch(r.status){case"verifying":return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Verifying Your Email"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-8",children:"Please wait while we verify your email address..."})]});case"success":return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Email Verified Successfully!"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-6",children:"Welcome to PulseDeck! Your account has been activated and you're ready to start analyzing your ad performance."}),r.message&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-green-700 text-center text-sm",children:r.message})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[e.jsxs("p",{className:"text-blue-700 mb-2",children:["Redirecting to dashboard in ",i," seconds..."]}),e.jsx(W,{to:"/",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Go to Dashboard Now"})]})]});case"expired":return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Verification Link Expired"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-6",children:"Your verification link has expired for security reasons. Don't worry, we can send you a new one!"}),r.message&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-700 text-center text-sm",children:r.message})}),(b==null?void 0:b.email)&&e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:C,disabled:d>0||S.isPending,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:S.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):d>0?`Resend in ${d}s`:"Send New Verification Email"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["We'll send a new verification link to ",b.email]})]})]});case"failed":return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Verification Failed"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-6",children:"We couldn't verify your email with the provided link. This might be due to an invalid or expired token."}),r.message&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-700 text-center text-sm",children:r.message})}),e.jsxs("div",{className:"space-y-4",children:[(b==null?void 0:b.email)&&e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:C,disabled:d>0||S.isPending,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:S.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):d>0?`Resend in ${d}s`:"Send New Verification Email"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["We'll send a new verification link to ",b.email]})]}),e.jsx("div",{className:"text-center",children:e.jsx(W,{to:"/signin",className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Back to Sign In"})})]})]});default:return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Email Verification"}),e.jsx("p",{className:"text-lg text-gray-600 text-center mb-6",children:"Please check your email for the verification link."})]})}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg shadow-gray-200/50 sm:rounded-xl sm:px-10 border border-gray-100",children:[B(),$(),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Need help with verification?"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{to:"/signup",className:"block text-sm text-blue-600 hover:text-blue-500 font-medium transition-colors",children:"Create a new account"}),e.jsx("a",{href:"mailto:support@pulsedeck.com",className:"block text-sm text-gray-600 hover:text-gray-700 transition-colors",children:"Contact support"})]})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(W,{to:"/",className:"text-sm text-gray-500 hover:text-gray-700 transition-colors",children:" Back to PulseDeck"})})]})})})},Wr=(s,t)=>{const a=s.length>=8,r=/[A-Z]/.test(s),n=/[a-z]/.test(s),i=/\d/.test(s),c=/[!@#$%^&*(),.?":{}|<>]/.test(s),d=[a,r,n,i,c].filter(Boolean).length,y=d>=4&&a,b=s===t&&t.length>0;return{strength_score:d,matches_confirmation:b,requirements_met:y,criteria:{hasMinLength:a,hasUppercase:r,hasLowercase:n,hasNumbers:i,hasSpecialChar:c}}},Hr=()=>{const s=Ee(),[t]=ce(),a=t.get("token"),r=M(L=>L.authentication_state.authentication_status.is_authenticated),n=M(L=>L.authentication_state.authentication_status.is_loading),i=l.useMemo(()=>a?"reset":"request",[a]),[c,d]=l.useState({email:""}),[y,b]=l.useState({password:"",confirm_password:""}),[N,g]=l.useState({status:"idle",message:null}),[o,S]=l.useState({is_valid:!0,is_expired:!1,error_message:null}),[C,B]=l.useState(!1),[$,P]=l.useState(!1),u=l.useMemo(()=>Wr(y.password,y.confirm_password),[y.password,y.confirm_password]);l.useEffect(()=>{!n&&r&&s("/w/default/settings",{replace:!0})},[r,n,s]);const w=()=>"https://123ad-performance.launchpulse.ai",U=te({mutationFn:async L=>(await D.post(`${w()}/api/auth/forgot-password`,L,{headers:{"Content-Type":"application/json"}})).data,onMutate:()=>{g({status:"sending",message:null})},onSuccess:L=>{g({status:"sent",message:L.message||"Password reset instructions have been sent to your email."})},onError:L=>{var R,I;const p=((I=(R=L.response)==null?void 0:R.data)==null?void 0:I.message)||L.message||"Failed to send password reset email. Please try again.";g({status:"failed",message:p})}}),O=te({mutationFn:async L=>(await D.post(`${w()}/api/auth/reset-password`,L,{headers:{"Content-Type":"application/json"}})).data,onMutate:()=>{g({status:"resetting",message:null})},onSuccess:L=>{g({status:"success",message:L.message||"Your password has been successfully reset."}),setTimeout(()=>{s("/signin?message=Password reset successful. Please sign in with your new password.",{replace:!0})},2e3)},onError:L=>{var R,I,H,K;const p=((I=(R=L.response)==null?void 0:R.data)==null?void 0:I.message)||L.message||"Failed to reset password. Please try again.";(((H=L.response)==null?void 0:H.status)===400||((K=L.response)==null?void 0:K.status)===401)&&S({is_valid:!1,is_expired:!0,error_message:"This reset link has expired or is invalid. Please request a new password reset."}),g({status:"failed",message:p})}}),X=L=>{if(L.preventDefault(),!c.email){g({status:"failed",message:"Please enter your email address."});return}U.mutate({email:c.email})},z=L=>{if(L.preventDefault(),!u.requirements_met){g({status:"failed",message:"Please ensure your password meets all requirements."});return}if(!u.matches_confirmation){g({status:"failed",message:"Passwords do not match."});return}if(!a){g({status:"failed",message:"Invalid reset token."});return}O.mutate({token:a,password:y.password})},E=L=>{d({email:L.target.value}),N.status==="failed"&&g({status:"idle",message:null})},G=L=>{b(p=>({...p,password:L.target.value})),N.status==="failed"&&g({status:"idle",message:null})},Y=L=>{b(p=>({...p,confirm_password:L.target.value})),N.status==="failed"&&g({status:"idle",message:null})};return n?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx($r,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"ml-2 text-2xl font-bold text-gray-900",children:"PulseDeck"})]})}),i==="request"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Reset your password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),i==="reset"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Set new password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Create a strong password for your account."})]})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg shadow-gray-200/50 sm:rounded-xl sm:px-10 border border-gray-100",children:[N.status==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx(Se,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:i==="request"?"Email sent!":"Password reset successfully!"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:N.message}),i==="request"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx(hr,{className:"h-5 w-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-blue-700 font-medium",children:"What happens next?"}),e.jsxs("ul",{className:"text-blue-600 mt-1 space-y-1",children:[e.jsx("li",{children:" Check your email inbox for reset instructions"}),e.jsx("li",{children:" Click the reset link within 1 hour"}),e.jsx("li",{children:" The link can only be used once for security"})]})]})]})}),e.jsx("div",{className:"space-y-3",children:i==="request"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g({status:"idle",message:null}),className:"w-full flex justify-center py-3 px-4 border border-blue-300 rounded-lg text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Send another email"}),e.jsx(W,{to:"/signin",className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Back to sign in"})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to sign in page..."})})]}),o.error_message&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(Oe,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Link expired"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:o.error_message}),e.jsx(W,{to:"/reset-password",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Request new reset link"})]}),i==="request"&&N.status!=="success"&&e.jsxs("form",{className:"space-y-6",onSubmit:X,children:[N.message&&N.status==="failed"&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx(ye,{className:"h-5 w-5 text-red-400 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:N.message})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:c.email,onChange:E,placeholder:"Enter your email address",className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Security information"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:" Reset links expire after 1 hour for security"}),e.jsx("li",{children:" Each link can only be used once"}),e.jsx("li",{children:" Check your spam folder if you don't see the email"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:N.status==="sending",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:N.status==="sending"?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending email..."]}):"Send reset email"})}),e.jsx("div",{className:"text-center",children:e.jsx(W,{to:"/signin",className:"text-blue-600 hover:text-blue-500 text-sm font-medium transition-colors",children:"Back to sign in"})})]}),i==="reset"&&N.status!=="success"&&!o.error_message&&e.jsxs("form",{className:"space-y-6",onSubmit:z,children:[N.message&&N.status==="failed"&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx(ye,{className:"h-5 w-5 text-red-400 mr-2 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:N.message})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:C?"text":"password",autoComplete:"new-password",required:!0,value:y.password,onChange:G,placeholder:"Create a strong password",className:"block w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("button",{type:"button",onClick:()=>B(!C),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:C?e.jsx(Wt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Ht,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),y.password&&e.jsxs("div",{className:"mt-3 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-2",children:"Password requirements:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1 text-xs",children:[e.jsxs("div",{className:`flex items-center ${u.criteria.hasMinLength?"text-green-600":"text-red-600"}`,children:[u.criteria.hasMinLength?e.jsx(Se,{className:"h-3 w-3 mr-1"}):e.jsx(ye,{className:"h-3 w-3 mr-1"}),"At least 8 characters"]}),e.jsxs("div",{className:`flex items-center ${u.criteria.hasUppercase?"text-green-600":"text-red-600"}`,children:[u.criteria.hasUppercase?e.jsx(Se,{className:"h-3 w-3 mr-1"}):e.jsx(ye,{className:"h-3 w-3 mr-1"}),"One uppercase letter"]}),e.jsxs("div",{className:`flex items-center ${u.criteria.hasLowercase?"text-green-600":"text-red-600"}`,children:[u.criteria.hasLowercase?e.jsx(Se,{className:"h-3 w-3 mr-1"}):e.jsx(ye,{className:"h-3 w-3 mr-1"}),"One lowercase letter"]}),e.jsxs("div",{className:`flex items-center ${u.criteria.hasNumbers?"text-green-600":"text-red-600"}`,children:[u.criteria.hasNumbers?e.jsx(Se,{className:"h-3 w-3 mr-1"}):e.jsx(ye,{className:"h-3 w-3 mr-1"}),"One number"]}),e.jsxs("div",{className:`flex items-center ${u.criteria.hasSpecialChar?"text-green-600":"text-red-600"}`,children:[u.criteria.hasSpecialChar?e.jsx(Se,{className:"h-3 w-3 mr-1"}):e.jsx(ye,{className:"h-3 w-3 mr-1"}),"One special character"]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Strength:"}),e.jsx("span",{className:`text-xs font-medium ${u.strength_score<=2?"text-red-600":u.strength_score<=3?"text-yellow-600":"text-green-600"}`,children:u.strength_score<=2?"Weak":u.strength_score<=3?"Medium":"Strong"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full transition-all ${u.strength_score<=2?"bg-red-500":u.strength_score<=3?"bg-yellow-500":"bg-green-500"}`,style:{width:`${u.strength_score/5*100}%`}})})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm new password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirm_password",name:"confirm_password",type:$?"text":"password",autoComplete:"new-password",required:!0,value:y.confirm_password,onChange:Y,placeholder:"Confirm your password",className:"block w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-lg placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),e.jsx("button",{type:"button",onClick:()=>P(!$),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:$?e.jsx(Wt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Ht,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),y.confirm_password&&e.jsxs("div",{className:`mt-2 flex items-center text-xs ${u.matches_confirmation?"text-green-600":"text-red-600"}`,children:[u.matches_confirmation?e.jsx(Se,{className:"h-3 w-3 mr-1"}):e.jsx(ye,{className:"h-3 w-3 mr-1"}),u.matches_confirmation?"Passwords match":"Passwords do not match"]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:N.status==="resetting"||!u.requirements_met||!u.matches_confirmation,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:N.status==="resetting"?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating password..."]}):"Update password"})}),e.jsx("div",{className:"text-center",children:e.jsx(W,{to:"/signin",className:"text-blue-600 hover:text-blue-500 text-sm font-medium transition-colors",children:"Back to sign in"})})]})]})})]})})},Yr=()=>{const s=Ee(),{workspace_id:t}=he(),[a,r]=l.useState(!1),n=M(g=>g.authentication_state.current_user),i=M(g=>g.authentication_state.auth_token),c=M(g=>g.update_workspace_context),d=M(g=>g.add_toast_notification),y=te({mutationFn:async()=>(await D.post("https://123ad-performance.launchpulse.ai/api/workspaces",{name:`${(n==null?void 0:n.name)||"Demo"} Workspace`,default_currency:"USD",timezone:"UTC",data_retention_days:730},{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}})).data,onSuccess:g=>{c({id:g.workspace.id,name:g.workspace.name,role:"owner",created_at:new Date().toISOString()}),d({type:"success",message:"Demo workspace created successfully! Exploring sample data...",auto_dismiss:!0}),s(`/w/${g.workspace.id}`)},onError:g=>{var o,S;console.error("Demo workspace creation failed:",g),d({type:"error",message:((S=(o=g.response)==null?void 0:o.data)==null?void 0:S.message)||"Failed to create demo workspace. Please try again.",auto_dismiss:!0}),r(!1)}}),b=async()=>{r(!0),y.mutate()},N=g=>{const S={tiktok:`Date,Campaign Name,Ad Group,Ad Name,Impressions,Clicks,Spend,Conversions,Revenue
2023-11-01,Black Friday Campaign,Audience 1,Video Ad 1,50000,2500,250.00,125,1250.00
2023-11-02,Black Friday Campaign,Audience 1,Video Ad 1,45000,2200,220.00,110,1100.00`,meta:`Date,Campaign Name,Ad Set Name,Ad Name,Impressions,Clicks,Amount Spent,Purchases,Purchase ROAS
2023-11-01,Holiday Sale,Interest Targeting,Carousel Ad,60000,3000,300.00,150,1500.00
2023-11-02,Holiday Sale,Interest Targeting,Carousel Ad,55000,2750,275.00,140,1400.00`,snapchat:`Date,Campaign,Ad Squad,Ad,Impressions,Swipes,Spend,Purchases,Revenue
2023-11-01,Winter Collection,Lookalike Audience,Story Ad,40000,2000,200.00,100,1000.00
2023-11-02,Winter Collection,Lookalike Audience,Story Ad,38000,1900,190.00,95,950.00`}[g],C=new Blob([S],{type:"text/csv"}),B=URL.createObjectURL(C),$=document.createElement("a");$.href=B,$.download=`sample_${g}_data.csv`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(B),d({type:"success",message:`Sample ${g.charAt(0).toUpperCase()+g.slice(1)} data downloaded!`,auto_dismiss:!0})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight",children:["Welcome to PulseDeck,"," ",e.jsxs("span",{className:"text-blue-600",children:[(n==null?void 0:n.name)||"there","!"]})]}),e.jsx("p",{className:"mt-6 text-xl md:text-2xl text-gray-600 leading-relaxed max-w-4xl mx-auto",children:"Your unified cross-platform analytics dashboard is ready. Get insights from TikTok, Meta, and Snapchat campaigns all in one place."}),e.jsxs("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Unified Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Compare performance across all platforms in one dashboard"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Real-time Insights"}),e.jsx("p",{className:"text-gray-600",children:"Get automated insights and anomaly detection"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Save Time & Money"}),e.jsx("p",{className:"text-gray-600",children:"Zero-to-insights in under 60 seconds"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-blue-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Upload Your First File"}),e.jsx("p",{className:"text-gray-600",children:"Import your campaign data and start analyzing performance"})]}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 mb-6 bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Drag and drop your files here"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Supports CSV, XLSX files up to 50MB"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Supported Platforms:"}),e.jsxs("div",{className:"flex justify-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-black rounded-lg flex items-center justify-center mb-2",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"T"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"TikTok"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center mb-2",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"f"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Meta"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-400 rounded-lg flex items-center justify-center mb-2",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"S"})}),e.jsx("p",{className:"text-xs text-gray-600",children:"Snapchat"})]})]})]}),e.jsx(W,{to:`/w/${t||"default"}/upload`,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-xl text-center block",children:"Start Upload Process"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-200",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"bg-green-100 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Load Demo Workspace"}),e.jsx("p",{className:"text-gray-600",children:"Explore PulseDeck with realistic sample data"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"90 Days of Realistic Data"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Complete campaign performance history"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Multi-Platform Campaigns"}),e.jsx("p",{className:"text-xs text-gray-600",children:"TikTok, Meta, and Snapchat data"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Seasonal Variations"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Black Friday, holiday trends included"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Ready-to-Explore Insights"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Anomalies, trends, and recommendations"})]})]})]}),e.jsx("button",{onClick:b,disabled:a,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-6 rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:a?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Demo Workspace..."]}):"Load Demo Workspace"})]})})]})}),e.jsx("div",{className:"bg-white py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Getting Started in 3 Easy Steps"}),e.jsx("p",{className:"text-xl text-gray-600",children:"From zero to insights in under 60 seconds"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-4 font-bold text-lg",children:"1"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Upload or Demo"}),e.jsx("p",{className:"text-gray-600",children:"Choose to upload your own data or explore with our demo workspace"}),e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"~ 30 seconds"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-4 font-bold text-lg",children:"2"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Review & Map"}),e.jsx("p",{className:"text-gray-600",children:"Our intelligent system maps your data columns automatically"}),e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"~ 15 seconds"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-4 font-bold text-lg",children:"3"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Analyze & Optimize"}),e.jsx("p",{className:"text-gray-600",children:"Get instant insights, comparisons, and performance recommendations"}),e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"~ 15 seconds"})]})]})]})}),e.jsx("div",{className:"bg-gray-50 py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Download Sample Files"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Test PulseDeck with example data from each platform"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-black rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"T"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"TikTok Sample"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Example TikTok Ads Manager export with campaign, ad group, and performance data"}),e.jsx("button",{onClick:()=>N("tiktok"),className:"bg-black text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-800 transition-colors",children:"Download CSV"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"f"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Meta Sample"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Example Facebook/Instagram Ads Manager export with complete metrics"}),e.jsx("button",{onClick:()=>N("meta"),className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors",children:"Download CSV"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-400 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-white font-bold text-2xl",children:"S"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Snapchat Sample"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Example Snapchat Ads Manager export with campaign and performance data"}),e.jsx("button",{onClick:()=>N("snapchat"),className:"bg-yellow-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-yellow-600 transition-colors",children:"Download CSV"})]})]})]})}),e.jsx("div",{className:"bg-white py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Need Help Getting Started?"}),e.jsx("p",{className:"text-xl text-gray-600",children:"We're here to support your analytics journey"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("a",{href:"#",className:"bg-gray-50 rounded-lg p-6 text-center hover:shadow-md transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.832 18.477 19.246 18 17.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Documentation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Complete guides and tutorials"})]}),e.jsxs("a",{href:"#",className:"bg-gray-50 rounded-lg p-6 text-center hover:shadow-md transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Video Tutorials"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Step-by-step video guides"})]}),e.jsxs("a",{href:"#",className:"bg-gray-50 rounded-lg p-6 text-center hover:shadow-md transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Live Chat"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Real-time support chat"})]}),e.jsxs("a",{href:"#",className:"bg-gray-50 rounded-lg p-6 text-center hover:shadow-md transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Email Support"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get help via email"})]})]})]})})]})})},Kr=()=>{const{workspace_id:s}=he(),[t,a]=ce(),r=M(f=>f.authentication_state.current_user),n=M(f=>f.authentication_state.auth_token),i=M(f=>f.current_workspace),c=M(f=>f.date_range_filter),d=M(f=>f.platform_filter),y=M(f=>f.update_date_range),b=M(f=>f.update_comparison_mode),N=M(f=>f.update_platform_filter),g=M(f=>f.add_toast_notification),[o,S]=l.useState(["spend","revenue","roas"]),[C,B]=l.useState(!0),[$,P]=l.useState("overview");l.useEffect(()=>{const f=t.get("date_from"),m=t.get("date_to"),x=t.get("date_preset"),T=t.get("comparison_mode"),Z=t.get("platforms");if((f||m||x)&&y(f,m,x),T&&b(T),Z){const _=Z.split(",").filter(Boolean);N(_)}},[t,y,b,N]);const u=l.useMemo(()=>{const f=new URLSearchParams;return c.date_from&&f.append("date_from",c.date_from),c.date_to&&f.append("date_to",c.date_to),c.date_preset&&f.append("date_preset",c.date_preset),c.comparison_mode&&f.append("comparison_mode",c.comparison_mode),d.selected_platforms.length>0&&f.append("platforms",d.selected_platforms.join(",")),d.selected_accounts.length>0&&f.append("accounts",d.selected_accounts.join(",")),f.toString()},[c,d]),{data:w,isLoading:U,error:O}=ae({queryKey:["overview-metrics",s,u],queryFn:async()=>(await D.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/metrics/overview?${u}`,{headers:{Authorization:`Bearer ${n}`}})).data,enabled:!!s&&!!n,staleTime:5*60*1e3,select:f=>({...f,spend:Number(f.spend||0),revenue:Number(f.revenue||0),roas:Number(f.roas||0),cpa:Number(f.cpa||0),ctr:Number(f.ctr||0),cpm:Number(f.cpm||0),cvr:Number(f.cvr||0),mer:Number(f.mer||0)})}),{data:X,isLoading:z}=ae({queryKey:["metrics-trends",s,u,o],queryFn:async()=>(await D.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/metrics/trends?${u}&metrics=${o.join(",")}`,{headers:{Authorization:`Bearer ${n}`}})).data,enabled:!!s&&!!n&&o.length>0,staleTime:5*60*1e3}),{data:E}=ae({queryKey:["anomalies",s,u],queryFn:async()=>(await D.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/anomalies?${u}&is_reviewed=false`,{headers:{Authorization:`Bearer ${n}`}})).data.data,enabled:!!s&&!!n,staleTime:2*60*1e3}),{data:G,isLoading:Y}=ae({queryKey:["platform-comparison",s,u],queryFn:async()=>(await D.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/metrics/comparison?${u}`,{headers:{Authorization:`Bearer ${n}`}})).data,enabled:!!s&&!!n,staleTime:5*60*1e3}),L=[{label:"Today",value:"today"},{label:"Yesterday",value:"yesterday"},{label:"Last 7 days",value:"last_7_days"},{label:"Last 30 days",value:"last_30_days"},{label:"Last 90 days",value:"last_90_days"},{label:"Month to date",value:"mtd"},{label:"Quarter to date",value:"qtd"},{label:"Year to date",value:"ytd"}],p=[{key:"spend",label:"Spend",format:"currency",color:"blue"},{key:"revenue",label:"Revenue",format:"currency",color:"green"},{key:"roas",label:"ROAS",format:"decimal",color:"purple",suffix:"x"},{key:"cpa",label:"CPA",format:"currency",color:"orange"},{key:"ctr",label:"CTR",format:"percentage",color:"blue"},{key:"cpm",label:"CPM",format:"currency",color:"indigo"},{key:"cvr",label:"CVR",format:"percentage",color:"green"},{key:"mer",label:"MER",format:"decimal",color:"purple",suffix:"x"}],R=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),I=f=>`${f.toFixed(2)}%`,H=(f,m)=>`${f.toFixed(2)}${m||""}`,K=(f,m,x)=>{switch(m){case"currency":return R(f);case"percentage":return I(f);case"decimal":return H(f,x);default:return f.toString()}},re=f=>{const m=new URLSearchParams(t);m.set("date_preset",f),m.delete("date_from"),m.delete("date_to"),a(m)},h=f=>{const m=new URLSearchParams(t);f===c.comparison_mode?m.delete("comparison_mode"):m.set("comparison_mode",f),a(m)},A=()=>{g({type:"info",message:"Export functionality will be available soon",auto_dismiss:!0})},q=()=>{g({type:"info",message:"Share functionality will be available soon",auto_dismiss:!0})};return U?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})})}):O?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Oe,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Failed to load dashboard"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please try refreshing the page or contact support if the issue persists."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Page"})]})})}):w&&w.spend===0&&w.revenue===0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[e.jsx(De,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"No data available"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Upload your advertising data to start analyzing your performance across platforms."}),e.jsxs(W,{to:`/w/${s}/upload`,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[e.jsx(Yt,{className:"h-5 w-5 mr-2"}),"Upload Your First File"]})]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between py-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Performance Overview"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[i==null?void 0:i.name,"  ",r==null?void 0:r.name]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(W,{to:`/w/${s}/upload`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Upload Data"]}),e.jsxs("button",{onClick:A,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs("button",{onClick:q,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[e.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(W,{to:`/w/${s}/alerts`,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium",children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),"Alerts"]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(er,{className:"h-5 w-5 text-gray-400"}),e.jsx("select",{value:c.date_preset||"last_30_days",onChange:f=>re(f.target.value),className:"border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",children:L.map(f=>e.jsx("option",{value:f.value,children:f.label},f.value))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>h("vs_previous_period"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c.comparison_mode==="vs_previous_period"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"vs Previous Period"}),e.jsx("button",{onClick:()=>h("vs_same_period_last_year"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c.comparison_mode==="vs_same_period_last_year"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"vs Same Period Last Year"})]})]})})}),E&&E.length>0&&e.jsx("div",{className:"bg-yellow-50 border-b border-yellow-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:[E.length," anomal",E.length===1?"y":"ies"," detected"]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[E.slice(0,3).map(f=>e.jsxs(W,{to:`/w/${s}/alerts`,className:`px-2 py-1 rounded text-xs font-medium transition-colors ${f.severity==="critical"?"bg-red-100 text-red-700 hover:bg-red-200":f.severity==="high"?"bg-orange-100 text-orange-700 hover:bg-orange-200":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"}`,children:[f.metric," ",f.anomaly_type," on ",f.platform]},f.id)),E.length>3&&e.jsxs(W,{to:`/w/${s}/alerts`,className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium hover:bg-gray-200 transition-colors",children:["+",E.length-3," more"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:p.map(f=>{var F;const m=(w==null?void 0:w[f.key])||0,x=`${f.key}_change`,T=((F=w==null?void 0:w.comparison)==null?void 0:F[x])||0,Z=T>0,_=T<0;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:f.label}),c.comparison_mode&&e.jsxs("div",{className:`flex items-center space-x-1 text-xs font-medium ${Z?"text-green-600":_?"text-red-600":"text-gray-500"}`,children:[Z?e.jsx(hs,{className:"h-3 w-3"}):_?e.jsx(us,{className:"h-3 w-3"}):null,e.jsxs("span",{children:[Math.abs(T).toFixed(1),"%"]})]})]}),e.jsx("div",{className:"mb-2",children:e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:K(m,f.format,f.suffix)})}),e.jsx("div",{className:"h-8 bg-gray-50 rounded flex items-end justify-center space-x-1",children:Array.from({length:7}).map((se,pe)=>e.jsx("div",{className:`w-1 bg-${f.color}-400 rounded-t`,style:{height:`${Math.random()*100}%`}},pe))})]},f.key)})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-8",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6",children:[e.jsx("button",{onClick:()=>P("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${$==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{children:"Time Series"})]})}),e.jsx("button",{onClick:()=>P("platforms"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${$==="platforms"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{children:"Platform Comparison"})]})})]})}),e.jsxs("div",{className:"p-6",children:[$==="overview"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select metrics to display"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(f=>e.jsx("button",{onClick:()=>{S(m=>m.includes(f.key)?m.filter(x=>x!==f.key):[...m,f.key])},className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${o.includes(f.key)?`bg-${f.color}-100 text-${f.color}-700`:"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f.label},f.key))})]}),z?e.jsx("div",{className:"h-80 bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading chart data..."})]})}):e.jsx("div",{className:"h-80 bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Vt,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Interactive time series chart will be displayed here"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(X==null?void 0:X.length)||0," data points available"]})]})})]}),$==="platforms"&&e.jsx("div",{children:Y?e.jsx("div",{className:"h-80 bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading platform data..."})]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spend"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ROAS"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CTR"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaigns"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G==null?void 0:G.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${f.platform==="facebook"?"bg-blue-500":f.platform==="tiktok"?"bg-black":f.platform==="snapchat"?"bg-yellow-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:f.platform})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R(f.spend)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R(f.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:H(f.roas,"x")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I(f.ctr)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.campaign_count})]},f.platform))})]})})})]})]}),C&&(w==null?void 0:w.insights)&&w.insights.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Performance Insights"}),e.jsxs("button",{onClick:()=>B(!1),className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),""]})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:w.insights.map((f,m)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${f.severity==="critical"?"bg-red-500":f.severity==="warning"?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900",children:f.message}),f.entity_type&&f.entity_id&&e.jsxs(W,{to:`/w/${s}/campaigns`,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:["Investigate ",f.entity_type," "]})]})]},m))})})]})]})]})})},Qr=()=>{var p,R,I,H,K,re;const{workspace_id:s}=he(),[t,a]=ce(),r=M(h=>h.date_range_filter),n=M(h=>h.platform_filter),[i,c]=l.useState(new Set),[d,y]=l.useState(t.get("efficiency_view")==="true"),[b,N]=l.useState(t.get("sort_by")||"spend"),[g,o]=l.useState(t.get("sort_order")||"desc"),S={facebook:{name:"Meta",color:"bg-blue-600",logo:""},tiktok:{name:"TikTok",color:"bg-black",logo:""},snapchat:{name:"Snapchat",color:"bg-yellow-400",logo:""},google:{name:"Google",color:"bg-red-500",logo:""},linkedin:{name:"LinkedIn",color:"bg-blue-700",logo:""},twitter:{name:"X (Twitter)",color:"bg-gray-900",logo:""}},{data:C,isLoading:B,error:$,refetch:P}=ae({queryKey:["platform-comparison",s,r.date_from,r.date_to,n.selected_platforms.join(","),b,g,d],queryFn:async()=>{if(!s)throw new Error("Workspace ID required");const h=new URLSearchParams;return r.date_from&&h.append("date_from",r.date_from),r.date_to&&h.append("date_to",r.date_to),n.selected_platforms.length>0&&h.append("platforms",n.selected_platforms.join(",")),h.append("sort_by",b),h.append("sort_order",g),d&&h.append("efficiency_view","true"),(await D.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/metrics/comparison?${h}`,{headers:{Authorization:`Bearer ${M.getState().authentication_state.auth_token}`}})).data},enabled:!!s,staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1}),u=h=>{var A,q;return[{account_id:`${h}_acc_1`,account_name:`${(A=S[h])==null?void 0:A.name} Account 1`,spend:5e3,revenue:15e3,roas:3,cpa:25,ctr:2.5,cpm:15,cvr:1.8,impressions:333333,clicks:8333,conversions:150},{account_id:`${h}_acc_2`,account_name:`${(q=S[h])==null?void 0:q.name} Account 2`,spend:3e3,revenue:9e3,roas:3,cpa:20,ctr:3,cpm:12,cvr:2,impressions:25e4,clicks:7500,conversions:150}]},w=l.useMemo(()=>{if(!(C!=null&&C.length))return null;const h=[...C].sort((q,f)=>f.roas-q.roas),A=[...C].sort((q,f)=>f.spend-q.spend);return{topPerformer:h[0],bottomPerformer:h[h.length-1],highestSpend:A[0],totalSpend:C.reduce((q,f)=>q+f.spend,0),avgRoas:C.reduce((q,f)=>q+f.roas,0)/C.length}},[C]),U=h=>{const A=b===h&&g==="desc"?"asc":"desc";N(h),o(A);const q=new URLSearchParams(t);q.set("sort_by",h),q.set("sort_order",A),a(q)},O=()=>{const h=!d;y(h);const A=new URLSearchParams(t);h?A.set("efficiency_view","true"):A.delete("efficiency_view"),a(A)},X=h=>{const A=new Set(i);A.has(h)?A.delete(h):A.add(h),c(A)},z=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(h),E=(h,A=2)=>new Intl.NumberFormat("en-US",{minimumFractionDigits:A,maximumFractionDigits:A}).format(h),G=h=>`${E(h,2)}%`,Y=h=>w?h===w.topPerformer.platform?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Br,{className:"w-3 h-3 mr-1"}),"Top Performer"]}):h===w.bottomPerformer.platform?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(Oe,{className:"w-3 h-3 mr-1"}),"Needs Attention"]}):null:null,L=()=>{if(!C)return;const A=[["Platform","Spend","Revenue","ROAS","CPA","CTR","CPM","CVR","Impressions","Clicks","Conversions"].join(","),...C.map(x=>{var T;return[((T=S[x.platform])==null?void 0:T.name)||x.platform,x.spend,x.revenue,x.roas,x.cpa,x.ctr,x.cpm,x.cvr,x.impressions,x.clicks,x.conversions].join(",")})].join(`
`),q=new Blob([A],{type:"text/csv"}),f=window.URL.createObjectURL(q),m=document.createElement("a");m.href=f,m.download=`platform-comparison-${new Date().toISOString().split("T")[0]}.csv`,m.click(),window.URL.revokeObjectURL(f)};return B?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded mb-6"}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(h=>e.jsx("div",{className:"h-20 bg-gray-200 rounded"},h))})]})})})}):$?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(Oe,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Platform Comparison"}),e.jsx("p",{className:"text-red-700 mb-4",children:$ instanceof Error?$.message:"An unexpected error occurred"}),e.jsx("button",{onClick:()=>P(),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Channel Performance Comparison"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Compare performance across advertising platforms to optimize budget allocation"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:L,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(gs,{className:"w-5 h-5 mr-2"}),"Export CSV"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(sr,{className:"w-5 h-5 mr-2"}),"Export Chart"]})]})]})}),w&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Top Performer"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:(p=S[w.topPerformer.platform])==null?void 0:p.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[E(w.topPerformer.roas,2),"x ROAS"]})]}),e.jsx("div",{className:"text-4xl",children:(R=S[w.topPerformer.platform])==null?void 0:R.logo})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Spend"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:z(w.totalSpend)}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Across ",(C==null?void 0:C.length)||0," platforms"]})]}),e.jsx(De,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Average ROAS"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[E(w.avgRoas,2),"x"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Portfolio performance"})]}),e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-bold",children:""})})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:O,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Efficiency View (per 1K impressions)"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(_r,{className:"w-4 h-4 mr-1"}),"Normalize metrics for fair comparison across spending levels"]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleTimeString()]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platform"}),["spend","revenue","roas","cpa","ctr","cpm","cvr"].map(h=>e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>U(h),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:h.toUpperCase()}),b===h?g==="desc"?e.jsx(us,{className:"w-4 h-4"}):e.jsx(hs,{className:"w-4 h-4"}):e.jsx(Qa,{className:"w-4 h-4 opacity-50"})]})},h)),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C==null?void 0:C.map(h=>{var A,q,f;return e.jsxs(Be.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>X(h.platform),className:"mr-3 p-1 hover:bg-gray-200 rounded transition-colors",children:i.has(h.platform)?e.jsx(xr,{className:"w-4 h-4 text-gray-500"}):e.jsx(ir,{className:"w-4 h-4 text-gray-500"})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg ${((A=S[h.platform])==null?void 0:A.color)||"bg-gray-500"} flex items-center justify-center text-white text-xl mr-3`,children:((q=S[h.platform])==null?void 0:q.logo)||""}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((f=S[h.platform])==null?void 0:f.name)||h.platform}),e.jsxs("div",{className:"text-sm text-gray-500",children:[h.account_count," accounts  ",h.campaign_count," campaigns"]})]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z(d?h.spend/h.impressions*1e3:h.spend)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z(d?h.revenue/h.impressions*1e3:h.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("span",{className:h.roas>=2?"text-green-600":h.roas>=1.5?"text-yellow-600":"text-red-600",children:[E(h.roas,2),"x"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z(d?h.cpa/h.impressions*1e3:h.cpa)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G(h.ctr)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z(h.cpm)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G(h.cvr)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Y(h.platform)})]}),i.has(h.platform)&&e.jsx(e.Fragment,{children:u(h.platform).map(m=>e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"ml-12 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full mr-3"}),e.jsx("div",{className:"text-sm text-gray-700",children:m.account_name})]})}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:z(m.spend)}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:z(m.revenue)}),e.jsxs("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:[E(m.roas,2),"x"]}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:z(m.cpa)}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:G(m.ctr)}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:z(m.cpm)}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-600",children:G(m.cvr)}),e.jsx("td",{className:"px-6 py-3 whitespace-nowrap",children:e.jsx(W,{to:`/w/${s}/campaigns?accounts=${m.account_id}`,className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"View Campaigns "})})]},m.account_id))})]},h.platform)})})]})})}),w&&e.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Budget Allocation Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Recommendations"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Increase budget"})," for ",(I=S[w.topPerformer.platform])==null?void 0:I.name,"(ROAS: ",E(w.topPerformer.roas,2),"x)"]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Review and optimize"})," ",(H=S[w.bottomPerformer.platform])==null?void 0:H.name,"campaigns (ROAS: ",E(w.bottomPerformer.roas,2),"x)"]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Maintain current allocation"})," for platforms performing above ",E(w.avgRoas,2),"x ROAS"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(W,{to:`/w/${s}/campaigns?platforms=${w.topPerformer.platform}`,className:"block w-full text-left px-4 py-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors text-sm",children:["Analyze ",(K=S[w.topPerformer.platform])==null?void 0:K.name," top campaigns"]}),e.jsxs(W,{to:`/w/${s}/campaigns?platforms=${w.bottomPerformer.platform}`,className:"block w-full text-left px-4 py-2 bg-yellow-50 text-yellow-700 rounded-lg hover:bg-yellow-100 transition-colors text-sm",children:["Troubleshoot ",(re=S[w.bottomPerformer.platform])==null?void 0:re.name," performance"]}),e.jsx(W,{to:`/w/${s}/alerts`,className:"block w-full text-left px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors text-sm",children:"Set up performance alerts"})]})]})]})]}),!(C!=null&&C.length)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center border border-gray-100",children:[e.jsx(De,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Platform Data Available"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Upload advertising data from multiple platforms to see performance comparisons and insights."}),e.jsx(W,{to:`/w/${s}/upload`,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Upload Data"})]})]})})})},Qt=()=>{var _,F,se,pe,je,Ne,_e,v;const{workspace_id:s,campaign_id:t}=he(),[a,r]=ce(),n=Pe(),i=M(j=>j.authentication_state.auth_token),c=M(j=>j.platform_filter),d=M(j=>j.add_toast_notification),[y,b]=l.useState(a.get("search_query")||""),[N,g]=l.useState(new Set),[o,S]=l.useState(new Set),[C,B]=l.useState(!1),$=parseInt(a.get("page")||"1"),P=parseInt(a.get("per_page")||"50"),u=a.get("sort_by")||"spend",w=a.get("sort_order")||"desc",U=a.get("status_filter")||"",O=a.get("platforms")||"",X=a.get("accounts")||"",z=O?O.split(","):c.selected_platforms,E=X?X.split(","):c.selected_accounts,G=async()=>{if(!s||!i)throw new Error("Missing workspace or auth token");const j=new URLSearchParams({page:$.toString(),per_page:P.toString(),sort_by:u,sort_order:w});return y&&j.append("search_query",y),U&&j.append("status_filter",U),z.length>0&&j.append("platforms",z.join(",")),E.length>0&&j.append("accounts",E.join(",")),(await D.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/campaigns?${j}`,{headers:{Authorization:`Bearer ${i}`}})).data},Y=async j=>{if(!s||!i)throw new Error("Missing workspace or auth token");return(await D.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/campaigns/${j}`,{headers:{Authorization:`Bearer ${i}`}})).data},L=ae({queryKey:["campaigns",s,$,P,u,w,y,U,z,E],queryFn:G,enabled:!!s&&!!i&&!t,staleTime:3e4,refetchOnWindowFocus:!1}),p=ae({queryKey:["campaign-details",s,t],queryFn:()=>Y(t),enabled:!!s&&!!i&&!!t,staleTime:3e4,refetchOnWindowFocus:!1}),R=l.useCallback(j=>{const Q=new URLSearchParams(a);Object.entries(j).forEach(([ee,oe])=>{oe===null||oe===""?Q.delete(ee):Q.set(ee,oe)}),r(Q)},[a,r]),I=l.useCallback(j=>{b(j),R({search_query:j,page:"1"})},[R]),H=l.useCallback(j=>{R({sort_by:j,sort_order:u===j&&w==="desc"?"asc":"desc",page:"1"})},[u,w,R]),K=l.useCallback(j=>{R({page:j.toString()})},[R]),re=l.useCallback(j=>{g(Q=>{const ee=new Set(Q);return ee.has(j)?ee.delete(j):ee.add(j),ee})},[]),h=l.useCallback(j=>{S(Q=>{const ee=new Set(Q);return ee.has(j)?ee.delete(j):ee.add(j),ee})},[]),A=l.useCallback(()=>{if(!L.data)return;const j=L.data.data.map(ee=>ee.id),Q=j.every(ee=>o.has(ee));S(Q?new Set:new Set(j))},[L.data,o]),q=te({mutationFn:async({campaignIds:j,status:Q})=>{const ee=j.map(oe=>D.put(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/campaigns/${oe}`,{status:Q},{headers:{Authorization:`Bearer ${i}`}}));return Promise.all(ee)},onSuccess:()=>{n.invalidateQueries({queryKey:["campaigns",s]}),d({type:"success",message:"Campaigns updated successfully",auto_dismiss:!0}),S(new Set)},onError:()=>{d({type:"error",message:"Failed to update campaigns",auto_dismiss:!0})}}),f=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(j),m=j=>`${j.toFixed(2)}%`,x=j=>{switch(j){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},T=(j,Q)=>j>Q?e.jsx(Ts,{className:"w-4 h-4 text-green-500"}):j<Q?e.jsx(Bs,{className:"w-4 h-4 text-red-500"}):e.jsx(Fs,{className:"w-4 h-4 text-gray-400"}),Z=({campaign:j,level:Q})=>{const ee=N.has(j.id),oe=o.has(j.id);return e.jsx(e.Fragment,{children:e.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 ${oe?"bg-blue-50":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center",style:{paddingLeft:`${Q*20}px`},children:[e.jsx("input",{type:"checkbox",checked:oe,onChange:()=>h(j.id),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),e.jsx("button",{onClick:()=>re(j.id),className:"ml-2 p-1 text-gray-400 hover:text-gray-600",children:ee?e.jsx(Ms,{className:"w-4 h-4"}):e.jsx(Ze,{className:"w-4 h-4"})}),e.jsxs("div",{className:"ml-2",children:[e.jsx("div",{className:"font-medium text-gray-900",children:j.campaign_name||`Campaign ${j.campaign_id}`}),e.jsxs("div",{className:"text-gray-500 text-xs",children:["ID: ",j.campaign_id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x(j.status)}`,children:j.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f(j.metrics.spend)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.metrics.impressions.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.metrics.clicks.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.metrics.conversions.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f(j.metrics.revenue)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[m(j.metrics.ctr),T(j.metrics.ctr,2.5)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f(j.metrics.cpm)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[j.metrics.roas.toFixed(2),"x"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx($s,{className:"w-5 h-5"})})})]})})};return t?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsx("div",{className:"flex items-center",children:e.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-4",children:[e.jsx("li",{children:e.jsx(W,{to:`/w/${s}`,className:"text-gray-400 hover:text-gray-500",children:"Overview"})}),e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"flex-shrink-0 h-5 w-5 text-gray-400"}),e.jsx(W,{to:`/w/${s}/campaigns`,className:"ml-4 text-gray-400 hover:text-gray-500",children:"Campaigns"})]})}),e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"flex-shrink-0 h-5 w-5 text-gray-400"}),e.jsx("span",{className:"ml-4 text-gray-900 font-medium",children:((F=(_=p.data)==null?void 0:_.campaign)==null?void 0:F.campaign_name)||"Campaign Details"})]})})]})})})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:p.isLoading?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]}):p.error?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-600 mb-4",children:"Failed to load campaign details"}),e.jsx("button",{onClick:()=>p.refetch(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Try Again"})]}):e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:((pe=(se=p.data)==null?void 0:se.campaign)==null?void 0:pe.campaign_name)||"Campaign Details"}),e.jsx("p",{className:"text-gray-600",children:"Campaign details view would be implemented here with ad sets and ads hierarchy."})]})})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Campaigns"}),e.jsxs("span",{className:"ml-3 text-sm text-gray-500",children:[((je=L.data)==null?void 0:je.pagination.total)||0," campaigns"]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:o.size>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:[o.size," selected"]}),e.jsxs("button",{onClick:()=>q.mutate({campaignIds:Array.from(o),status:"active"}),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(As,{className:"w-4 h-4 mr-1"}),"Activate"]}),e.jsxs("button",{onClick:()=>q.mutate({campaignIds:Array.from(o),status:"paused"}),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Es,{className:"w-4 h-4 mr-1"}),"Pause"]}),e.jsxs("button",{className:"inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(ct,{className:"w-4 h-4 mr-1"}),"Export"]})]})})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-lg",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Xt,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:y,onChange:j=>I(j.target.value),placeholder:"Search campaigns, IDs, creative names...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("button",{onClick:()=>B(!C),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Ps,{className:"w-4 h-4 mr-2"}),"Filters",(U||z.length>0||E.length>0)&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[U,...z,...E].filter(Boolean).length})]})]})}),C&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:U,onChange:j=>R({status_filter:j.target.value,page:"1"}),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"}),e.jsx("option",{value:"archived",children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platforms"}),e.jsx("div",{className:"space-y-2",children:["facebook","tiktok","snapchat","google"].map(j=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:z.includes(j),onChange:Q=>{const ee=Q.target.checked?[...z,j]:z.filter(oe=>oe!==j);R({platforms:ee.join(","),page:"1"})},className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 capitalize",children:j})]},j))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Performance"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",placeholder:"Min ROAS",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),e.jsx("input",{type:"number",placeholder:"Min Spend",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{r(new URLSearchParams),b("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Clear All"}),e.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700",children:"Apply Filters"})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:L.isLoading?e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"animate-pulse p-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(10)].map((j,Q)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},Q))})]})}):L.error?e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:"Failed to load campaigns"}),e.jsx("button",{onClick:()=>L.refetch(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Try Again"})]}):(Ne=L.data)!=null&&Ne.data.length?e.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[e.jsx("input",{type:"checkbox",checked:((_e=L.data)==null?void 0:_e.data.length)>0&&L.data.data.every(j=>o.has(j.id)),onChange:A,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2",children:"Campaign"})]}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("spend"),children:e.jsxs("div",{className:"flex items-center",children:["Spend",e.jsx(ve,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("impressions"),children:e.jsxs("div",{className:"flex items-center",children:["Impressions",e.jsx(ve,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("clicks"),children:e.jsxs("div",{className:"flex items-center",children:["Clicks",e.jsx(ve,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("conversions"),children:e.jsxs("div",{className:"flex items-center",children:["Conversions",e.jsx(ve,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("revenue"),children:e.jsxs("div",{className:"flex items-center",children:["Revenue",e.jsx(ve,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("ctr"),children:e.jsxs("div",{className:"flex items-center",children:["CTR",e.jsx(ve,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("cpm"),children:e.jsxs("div",{className:"flex items-center",children:["CPM",e.jsx(ve,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>H("roas"),children:e.jsxs("div",{className:"flex items-center",children:["ROAS",e.jsx(ve,{className:"ml-1 w-3 h-3"})]})}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(v=L.data)==null?void 0:v.data.map(j=>e.jsx(Z,{campaign:j,level:0},j.id))})]})}),L.data&&L.data.pagination.total_pages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>K($-1),disabled:$===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>K($+1),disabled:$===L.data.pagination.total_pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:($-1)*P+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min($*P,L.data.pagination.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:L.data.pagination.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsx("button",{onClick:()=>K($-1),disabled:$===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),[...Array(Math.min(5,L.data.pagination.total_pages))].map((j,Q)=>{const ee=$-2+Q;return ee<1||ee>L.data.pagination.total_pages?null:e.jsx("button",{onClick:()=>K(ee),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${ee===$?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:ee},ee)}),e.jsx("button",{onClick:()=>K($+1),disabled:$===L.data.pagination.total_pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]})]})]}):e.jsxs("div",{className:"bg-white shadow rounded-lg p-12 text-center",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"No campaigns found"}),e.jsxs(W,{to:`/w/${s}/upload`,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(Rs,{className:"w-4 h-4 mr-2"}),"Upload Campaign Data"]})]})})]})})},Gr=async(s,t,a)=>{const r=new URLSearchParams;return Object.entries(t).forEach(([i,c])=>{c!=null&&c!==""&&r.append(i,c.toString())}),(await D.get(`https://123ad-performance.launchpulse.ai/api/workspaces/${s}/creatives?${r}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data},Ue=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),st=s=>s===null?"N/A":`${s.toFixed(2)}%`,at=s=>new Intl.NumberFormat("en-US").format(s),Gt=s=>s===null?"text-gray-500":s>=3?"text-green-600":s>=2?"text-yellow-600":"text-red-600",Ie=s=>{const t=s.avg_roas||0;return t>=3?"winner":t<1.5?"loser":"average"},Zr=()=>{const{workspace_id:s}=he(),[t,a]=ce(),[r,n]=l.useState(null),[i,c]=l.useState(!1),[d,y]=l.useState(""),b=M(p=>p.authentication_state.auth_token),N=M(p=>p.date_range_filter),g=M(p=>p.platform_filter),o=t.get("performance_filter")||"all",S=t.get("sort_by")||"total_spend",C=t.get("sort_order")||"desc",B=t.get("platforms")||"",$=t.get("creative_tags")||"",P=l.useMemo(()=>({performance_filter:o,sort_by:S,sort_order:C,platforms:B||g.selected_platforms.join(","),creative_tags:$,date_from:t.get("date_from")||N.date_from||void 0,date_to:t.get("date_to")||N.date_to||void 0,query:d,limit:50,offset:0}),[o,S,C,B,$,g.selected_platforms,N.date_from,N.date_to,d,t]),{data:u,isLoading:w,error:U,refetch:O}=ae({queryKey:["creatives",s,P],queryFn:()=>Gr(s,P,b),enabled:!!(s&&b),staleTime:6e4,refetchOnWindowFocus:!1}),X=(p,R)=>{const I=new URLSearchParams(t);R?I.set(p,R):I.delete(p),a(I)},z=p=>{X("performance_filter",p==="all"?"":p)},E=p=>{n(p),c(!0)},G=()=>{n(null),c(!1)},Y=l.useMemo(()=>u!=null&&u.data?o==="all"?u.data:u.data.filter(p=>{const R=Ie(p);return o==="winners"?R==="winner":R==="loser"}):[],[u==null?void 0:u.data,o]),L=l.useMemo(()=>{if(!(u!=null&&u.data))return{winners:0,losers:0,total:0};const p=u.data.filter(I=>Ie(I)==="winner").length,R=u.data.filter(I=>Ie(I)==="loser").length;return{winners:p,losers:R,total:u.data.length}},[u==null?void 0:u.data]);return s?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Creative Performance"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Analyze and optimize your creative assets across all campaigns"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(W,{to:`/w/${s}/campaigns`,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"View Campaigns"})})]})})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>z("all"),className:`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${o==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["All Creatives (",L.total,")"]}),e.jsxs("button",{onClick:()=>z("winners"),className:`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${o==="winners"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Top Performers (",L.winners,")"]}),e.jsxs("button",{onClick:()=>z("losers"),className:`pb-2 px-1 border-b-2 font-medium text-sm transition-colors ${o==="losers"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Bottom Performers (",L.losers,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Search creatives...",value:d,onChange:p=>y(p.target.value),className:"w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),e.jsxs("select",{value:`${S}-${C}`,onChange:p=>{const[R,I]=p.target.value.split("-");X("sort_by",R),X("sort_order",I)},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"total_spend-desc",children:"Spend (High to Low)"}),e.jsx("option",{value:"total_spend-asc",children:"Spend (Low to High)"}),e.jsx("option",{value:"avg_roas-desc",children:"ROAS (High to Low)"}),e.jsx("option",{value:"avg_roas-asc",children:"ROAS (Low to High)"}),e.jsx("option",{value:"campaign_count-desc",children:"Campaigns (Most)"}),e.jsx("option",{value:"campaign_count-asc",children:"Campaigns (Least)"}),e.jsx("option",{value:"last_seen_date-desc",children:"Recently Used"}),e.jsx("option",{value:"creative_name-asc",children:"Name (A-Z)"})]})]})]})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:w?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading creatives..."})]}):U?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Error loading creatives"}),e.jsx("p",{className:"text-red-600 mb-4",children:U instanceof Error?U.message:"Failed to load creative performance data"}),e.jsx("button",{onClick:()=>O(),className:"inline-flex items-center px-4 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:"Try Again"})]}):Y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto h-24 w-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No creatives found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:o==="all"?"Upload some campaign data to start analyzing creative performance.":`No ${o} found with the current filters.`}),o==="all"&&e.jsx(W,{to:`/w/${s}/upload`,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"Upload Campaign Data"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Y.map(p=>{const R=Ie(p),I=Gt(p.avg_roas);return e.jsxs("div",{onClick:()=>E(p),className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-200 cursor-pointer group",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100",children:[p.creative_thumb_url?e.jsx("img",{src:p.creative_thumb_url,alt:p.creative_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("svg",{className:"h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R==="winner"?"bg-green-100 text-green-800":R==="loser"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:R==="winner"?"Winner":R==="loser"?"Loser":"Average"})}),p.ad_format&&e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:p.ad_format.replace("_"," ")})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 truncate",title:p.creative_name,children:p.creative_name}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:p.platforms.map(H=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",children:H.charAt(0).toUpperCase()+H.slice(1)},H))}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Spend"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:Ue(p.total_spend)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"ROAS"}),e.jsx("span",{className:`text-sm font-medium ${I}`,children:p.avg_roas?`${p.avg_roas.toFixed(2)}x`:"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"CTR"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:st(p.avg_ctr)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Campaigns"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:p.campaign_count})]})]}),p.creative_tags&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:p.creative_tags.split(",").slice(0,2).map((H,K)=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-blue-50 text-blue-700",children:H.trim()},K))})})]})]},p.id)})})}),i&&r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Creative Details"}),e.jsx("button",{onClick:G,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Creative Preview"}),e.jsx("div",{className:"bg-gray-100 rounded-lg h-64 flex items-center justify-center mb-4",children:r.creative_thumb_url?e.jsx("img",{src:r.creative_thumb_url,alt:r.creative_name,className:"max-h-full max-w-full object-contain rounded-lg"}):e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"h-16 w-16 text-gray-400 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"text-gray-500",children:"No preview available"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Name:"}),e.jsx("p",{className:"text-gray-900",children:r.creative_name})]}),r.ad_format&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Format:"}),e.jsx("p",{className:"text-gray-900",children:r.ad_format.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Platforms:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:r.platforms.map(p=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",children:p.charAt(0).toUpperCase()+p.slice(1)},p))})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Spend"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:Ue(r.total_spend)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Revenue"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:Ue(r.total_revenue)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"ROAS"}),e.jsx("p",{className:`text-xl font-semibold ${Gt(r.avg_roas)}`,children:r.avg_roas?`${r.avg_roas.toFixed(2)}x`:"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"CPA"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:r.avg_cpa?Ue(r.avg_cpa):"N/A"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"CTR"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:st(r.avg_ctr)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Campaigns"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:r.campaign_count})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Impressions:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:at(r.total_impressions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Clicks:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:at(r.total_clicks)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Conversions:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:at(r.total_conversions)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"CVR:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:st(r.avg_cvr)})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Usage"}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("p",{className:"text-blue-800",children:["This creative is being used in ",e.jsx("strong",{children:r.campaign_count})," campaigns from ",e.jsx("strong",{children:new Date(r.first_seen_date).toLocaleDateString()})," to ",e.jsx("strong",{children:new Date(r.last_seen_date).toLocaleDateString()})]}),e.jsxs(W,{to:`/w/${s}/campaigns?creative_filter=${r.id}`,className:"inline-flex items-center mt-3 text-sm font-medium text-blue-600 hover:text-blue-500",children:["View campaigns using this creative",e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),r.creative_tags&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.creative_tags.split(",").map((p,R)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:p.trim()},R))})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end space-x-3 border-t border-gray-200",children:[e.jsx("button",{onClick:G,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Close"}),e.jsx(W,{to:`/w/${s}/campaigns?creative_filter=${r.id}`,className:"px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"View Campaigns"})]})]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Workspace not found"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Please select a valid workspace."})]})})})},Xr=()=>{const{workspace_id:s}=he(),[t,a]=ce(),r=Pe(),n=M(p=>p.authentication_state.auth_token),i=M(p=>p.upload_state),[c,d]=l.useState(null),[y,b]=l.useState(!1),N={status_filter:t.get("status_filter"),platform_filter:t.get("platform_filter"),search_query:t.get("search_query")},g=parseInt(t.get("page")||"1"),o=10,S=()=>"https://123ad-performance.launchpulse.ai",{data:C,isLoading:B,error:$,refetch:P}=ae({queryKey:["upload_history",s,N,g],queryFn:async()=>{const p=new URLSearchParams;return N.status_filter&&p.append("status_filter",N.status_filter),N.platform_filter&&p.append("platform_filter",N.platform_filter),N.search_query&&p.append("search_query",N.search_query),p.append("page",g.toString()),p.append("limit",o.toString()),(await D.get(`${S()}/api/workspaces/${s}/uploads?${p.toString()}`,{headers:{Authorization:`Bearer ${n}`}})).data},enabled:!!s&&!!n,staleTime:3e4,refetchInterval:5e3}),u=te({mutationFn:async p=>{await D.delete(`${S()}/api/workspaces/${s}/uploads/${p}`,{headers:{Authorization:`Bearer ${n}`}})},onSuccess:()=>{r.invalidateQueries({queryKey:["upload_history"]}),d(null),b(!1)}}),w=te({mutationFn:async p=>{await D.post(`${S()}/api/workspaces/${s}/uploads/${p}/reprocess`,{},{headers:{Authorization:`Bearer ${n}`}})},onSuccess:()=>{r.invalidateQueries({queryKey:["upload_history"]})}}),U=(p,R)=>{const I=new URLSearchParams(t);R?I.set(p,R):I.delete(p),I.delete("page"),a(I)},O=p=>{const R=new URLSearchParams(t);R.set("page",p.toString()),a(R)},X=({status:p,progress:R})=>{const H=(K=>{switch(K){case"queued":return{color:"bg-gray-100 text-gray-800",label:"Queued"};case"processing":return{color:"bg-blue-100 text-blue-800",label:"Processing"};case"completed":return{color:"bg-green-100 text-green-800",label:"Completed"};case"failed":return{color:"bg-red-100 text-red-800",label:"Failed"};default:return{color:"bg-gray-100 text-gray-800",label:K}}})(p);return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${H.color}`,children:H.label}),p==="processing"&&R!==void 0&&e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${R}%`}})})]})},z=p=>{if(p===0)return"0 Bytes";const R=1024,I=["Bytes","KB","MB","GB"],H=Math.floor(Math.log(p)/Math.log(R));return parseFloat((p/Math.pow(R,H)).toFixed(2))+" "+I[H]},E=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),G=p=>{window.open(p,"_blank")},L=(()=>{if(!(C!=null&&C.data.length))return null;const p=C.data.length,R=C.data.filter(re=>re.status==="completed").length,I=C.data.filter(re=>re.status==="failed").length,H=C.data.filter(re=>re.status==="processing").length,K=p>0?R/p*100:0;return{total:p,completed:R,failed:I,processing:H,successRate:Math.round(K)}})();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Management"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage your data uploads and track processing status"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(W,{to:`/w/${s}/upload`,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Upload New File"})})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[L&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Uploads"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L.total})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L.completed})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L.failed})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[L.successRate,"%"]})]})]})})]}),i.active_uploads.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 mb-8 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Uploads"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:i.active_uploads.map(p=>e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.filename}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:p.platform})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(X,{status:p.status,progress:p.progress}),e.jsxs("span",{className:"text-sm text-gray-500",children:[p.progress,"%"]})]})]})},p.id))})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 mb-8 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Files"}),e.jsx("input",{type:"text",placeholder:"Search by filename...",value:N.search_query||"",onChange:p=>U("search_query",p.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:N.status_filter||"",onChange:p=>U("status_filter",p.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"queued",children:"Queued"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform"}),e.jsxs("select",{value:N.platform_filter||"",onChange:p=>U("platform_filter",p.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Platforms"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"tiktok",children:"TikTok"}),e.jsx("option",{value:"snapchat",children:"Snapchat"}),e.jsx("option",{value:"google",children:"Google"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"twitter",children:"Twitter"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upload History"})}),B?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading uploads..."})]}):$?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"text-red-600 mb-2",children:e.jsx("svg",{className:"w-8 h-8 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Failed to load uploads"}),e.jsx("button",{onClick:()=>P(),className:"mt-2 text-blue-600 hover:text-blue-500 text-sm font-medium",children:"Try again"})]}):C!=null&&C.data.length?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.data.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.original_filename}),e.jsx("p",{className:"text-sm text-gray-500",children:z(p.file_size)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"capitalize text-sm text-gray-900",children:p.platform})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(X,{status:p.status,progress:p.progress})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.rows_total>0?e.jsxs("div",{children:[e.jsxs("p",{children:[p.rows_processed.toLocaleString()," / ",p.rows_total.toLocaleString()," rows"]}),p.rows_error>0&&e.jsxs("p",{className:"text-red-600 text-xs",children:[p.rows_error.toLocaleString()," errors"]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E(p.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[p.status==="failed"&&e.jsx("button",{onClick:()=>w.mutate(p.id),disabled:w.isPending,className:"text-blue-600 hover:text-blue-500 disabled:opacity-50",title:"Reprocess Upload",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),p.error_log_url&&e.jsx("button",{onClick:()=>G(p.error_log_url),className:"text-orange-600 hover:text-orange-500",title:"Download Error Log",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("button",{onClick:()=>{d(p),b(!0)},className:"text-red-600 hover:text-red-500",title:"Delete Upload",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},p.id))})]})}),C.pagination.total_pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",(g-1)*o+1," to ",Math.min(g*o,C.pagination.total)," of ",C.pagination.total," uploads"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>O(g-1),disabled:g<=1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),Array.from({length:Math.min(5,C.pagination.total_pages)},(p,R)=>{const I=R+1;return e.jsx("button",{onClick:()=>O(I),className:`px-3 py-1 border rounded-md text-sm ${I===g?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"}`,children:I},I)}),e.jsx("button",{onClick:()=>O(g+1),disabled:g>=C.pagination.total_pages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No uploads found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:Object.values(N).some(Boolean)?"No uploads match your current filters":"Get started by uploading your first file"}),e.jsx(W,{to:`/w/${s}/upload`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Upload File"})]})]})]}),y&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Upload"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:['Are you sure you want to delete "',c.original_filename,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{b(!1),d(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>u.mutate(c.id),disabled:u.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:u.isPending?"Deleting...":"Delete"})]})]})})]})})},Jr=()=>{const{workspace_id:s}=he(),[t]=ce(),a=Ee(),r=Pe(),n=t.get("upload_id"),i=M(h=>h.authentication_state.auth_token),c=M(h=>h.current_workspace),d=M(h=>h.add_toast_notification),[y,b]=l.useState([]),[N,g]=l.useState([]),[o,S]=l.useState({}),[C,B]=l.useState({is_valid:!1,missing_required_fields:[],type_mismatches:[],warnings:[]}),[$,P]=l.useState({is_saving:!1,template_name:"",is_default:!1,is_shared:!1}),[u,w]=l.useState(""),[U,O]=l.useState(!1),X="https://123ad-performance.launchpulse.ai";l.useEffect(()=>{(!n||!s)&&a(`/w/${s}/uploads`)},[n,s,a]),l.useEffect(()=>{g([{field_name:"date",field_type:"string",required:!0,description:"Date in YYYY-MM-DD format"},{field_name:"spend",field_type:"number",required:!1,description:"Total spend amount"},{field_name:"impressions",field_type:"number",required:!1,description:"Number of impressions"},{field_name:"clicks",field_type:"number",required:!1,description:"Number of clicks"},{field_name:"conversions",field_type:"number",required:!1,description:"Number of conversions"},{field_name:"revenue",field_type:"number",required:!1,description:"Revenue generated"},{field_name:"campaign_id",field_type:"string",required:!1,description:"Campaign identifier"},{field_name:"adset_id",field_type:"string",required:!1,description:"Ad set identifier"},{field_name:"ad_id",field_type:"string",required:!1,description:"Ad identifier"},{field_name:"ctr",field_type:"number",required:!1,description:"Click-through rate"},{field_name:"cpm",field_type:"number",required:!1,description:"Cost per mille"},{field_name:"cpc",field_type:"number",required:!1,description:"Cost per click"},{field_name:"cpa",field_type:"number",required:!1,description:"Cost per acquisition"},{field_name:"cvr",field_type:"number",required:!1,description:"Conversion rate"},{field_name:"roas",field_type:"number",required:!1,description:"Return on ad spend"}])},[]);const{data:z,isLoading:E}=ae({queryKey:["upload",s,n],queryFn:async()=>(await D.get(`${X}/api/workspaces/${s}/uploads/${n}`,{headers:{Authorization:`Bearer ${i}`}})).data,enabled:!!(i&&s&&n),staleTime:6e4,retry:1}),{data:G=[],isLoading:Y}=ae({queryKey:["mapping-templates",s,z==null?void 0:z.platform],queryFn:async()=>{const h=await D.get(`${X}/api/workspaces/${s}/mapping-templates`,{headers:{Authorization:`Bearer ${i}`},params:{platform:z==null?void 0:z.platform}});return h.data.data||h.data},enabled:!!(i&&s&&(z!=null&&z.platform)),staleTime:3e5,retry:1});l.useEffect(()=>{z&&(b([{column_name:"Date",data_type:"string",sample_values:["2023-12-01","2023-12-02","2023-12-03"],confidence_score:.95},{column_name:"Campaign Name",data_type:"string",sample_values:["Black Friday Sale","Holiday Promo","Winter Collection"],confidence_score:.8},{column_name:"Amount Spent",data_type:"number",sample_values:["150.25","230.50","89.75"],confidence_score:.9},{column_name:"Impressions",data_type:"number",sample_values:["12543","18392","9876"],confidence_score:.95},{column_name:"Clicks",data_type:"number",sample_values:["234","456","178"],confidence_score:.9},{column_name:"Purchases",data_type:"number",sample_values:["12","23","8"],confidence_score:.85},{column_name:"Revenue",data_type:"number",sample_values:["450.00","890.50","234.75"],confidence_score:.88}]),S({Date:"date","Amount Spent":"spend",Impressions:"impressions",Clicks:"clicks",Purchases:"conversions",Revenue:"revenue"}))},[z]);const L=l.useCallback(()=>{const h=N.filter(T=>T.required).map(T=>T.field_name),A=Object.values(o),q=h.filter(T=>!A.includes(T)),f=Object.entries(o).map(([T,Z])=>{const _=y.find(se=>se.column_name===T),F=N.find(se=>se.field_name===Z);return _&&F&&!(F.field_type==="string"||F.field_type==="number"&&_.data_type==="number")?{column:T,expected_type:F.field_type,detected_type:_.data_type}:null}).filter(Boolean),m=[];A.length<y.length&&m.push(`${y.length-A.length} columns remain unmapped`);const x={is_valid:q.length===0&&f.length===0,missing_required_fields:q,type_mismatches:f,warnings:m};B(x)},[o,y,N]);l.useEffect(()=>{L()},[L]);const p=(h,A)=>{S(q=>{const f={...q};return A===""?delete f[h]:(Object.keys(f).forEach(m=>{f[m]===A&&delete f[m]}),f[h]=A),f})},R=h=>{const A=G.find(q=>q.id===h);A&&(S(A.mapping),w(h),d({type:"info",message:`Loaded template: ${A.name}`,auto_dismiss:!0}))},I=te({mutationFn:async h=>(await D.post(`${X}/api/workspaces/${s}/mapping-templates`,h,{headers:{Authorization:`Bearer ${i}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["mapping-templates"]}),d({type:"success",message:"Mapping template saved successfully",auto_dismiss:!0}),O(!1),P({is_saving:!1,template_name:"",is_default:!1,is_shared:!1})},onError:h=>{var A,q;d({type:"error",message:((q=(A=h.response)==null?void 0:A.data)==null?void 0:q.message)||"Failed to save template",auto_dismiss:!0})}}),H=()=>{if(!$.template_name.trim()){d({type:"error",message:"Template name is required",auto_dismiss:!0});return}I.mutate({name:$.template_name,platform:z==null?void 0:z.platform,mapping:o,is_default:$.is_default,is_shared:$.is_shared,created_by:c==null?void 0:c.id})},K=te({mutationFn:async()=>(await D.put(`${X}/api/workspaces/${s}/uploads/${n}`,{mapping_template_id:u||null,mapping:o},{headers:{Authorization:`Bearer ${i}`}})).data,onSuccess:()=>{d({type:"success",message:"Mapping applied successfully. Processing upload...",auto_dismiss:!0}),a(`/w/${s}/uploads`)},onError:h=>{var A,q;d({type:"error",message:((q=(A=h.response)==null?void 0:A.data)==null?void 0:q.message)||"Failed to apply mapping",auto_dismiss:!0})}}),re=()=>{if(!C.is_valid){d({type:"error",message:"Please fix validation errors before continuing",auto_dismiss:!0});return}K.mutate()};return E?e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading upload details..."})]})})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6",children:[e.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-4",children:[e.jsx("li",{children:e.jsx("div",{className:"flex items-center",children:e.jsxs("a",{href:`/w/${s}/uploads`,className:"text-gray-400 hover:text-gray-500",children:[e.jsx("svg",{className:"flex-shrink-0 h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),e.jsx("span",{className:"sr-only",children:"Uploads"})]})})}),e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"flex-shrink-0 h-5 w-5 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"ml-4 text-sm font-medium text-gray-900",children:"Column Mapping"})]})})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Data Column Mapping"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Map your file columns to PulseDeck's standard fields for accurate data processing"}),z&&e.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("span",{className:"font-medium",children:"File:"})," ",z.original_filename,e.jsx("span",{className:"ml-4 font-medium",children:"Platform:"})," ",z.platform,e.jsx("span",{className:"ml-4 font-medium",children:"Size:"})," ",(z.file_size/1024/1024).toFixed(2)," MB"]})})]})})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"lg:col-span-5",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Detected Columns"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[y.length," columns found in your file"]})]}),e.jsx("div",{className:"p-6 space-y-4 max-h-96 overflow-y-auto",children:y.map((h,A)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:h.column_name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:h.data_type}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${h.confidence_score>=.9?"bg-green-400":h.confidence_score>=.7?"bg-yellow-400":"bg-red-400"}`}),e.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(h.confidence_score*100),"%"]})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Sample Values:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:h.sample_values.slice(0,3).map((q,f)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-50 text-blue-700 rounded",children:q},f))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Map to field:"}),e.jsxs("select",{value:o[h.column_name]||"",onChange:q=>p(h.column_name,q.target.value),className:"w-full text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select field..."}),N.map(q=>e.jsxs("option",{value:q.field_name,disabled:Object.values(o).includes(q.field_name)&&o[h.column_name]!==q.field_name,children:[q.field_name," ",q.required?"*":""," (",q.field_type,")"]},q.field_name))]})]})]},A))})]})}),e.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Mapping Templates"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Load existing template"}),e.jsxs("select",{value:u,onChange:h=>{w(h.target.value),h.target.value&&R(h.target.value)},className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:Y,children:[e.jsx("option",{value:"",children:"Select template..."}),G.map(h=>e.jsxs("option",{value:h.id,children:[h.name," ",h.is_default?"(Default)":""]},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Save current mapping"}),e.jsx("button",{onClick:()=>O(!U),className:"w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors",children:"Save as Template"})]})]}),U&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name"}),e.jsx("input",{type:"text",value:$.template_name,onChange:h=>P(A=>({...A,template_name:h.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter template name..."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:$.is_default,onChange:h=>P(A=>({...A,is_default:h.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Set as default"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:$.is_shared,onChange:h=>P(A=>({...A,is_shared:h.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Share with team"})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:H,disabled:I.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:I.isPending?"Saving...":"Save Template"}),e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Target Schema Fields"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"PulseDeck's standard fields for analytics"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:N.map(h=>{const A=Object.keys(o).find(q=>o[q]===h.field_name);return e.jsxs("div",{className:`p-4 rounded-lg border-2 transition-colors ${A?"border-green-200 bg-green-50":h.required?"border-red-200 bg-red-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:[h.field_name,h.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:h.field_type})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:h.description}),A&&e.jsxs("div",{className:"flex items-center text-sm text-green-700",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Mapped from: ",A]})]},h.field_name)})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Mapping Validation"})}),e.jsx("div",{className:"p-6",children:C.is_valid?e.jsxs("div",{className:"flex items-center text-green-700 bg-green-50 p-4 rounded-lg",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Mapping is valid and ready for processing"]}):e.jsxs("div",{className:"space-y-4",children:[C.missing_required_fields.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Missing Required Fields:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-red-700",children:C.missing_required_fields.map((h,A)=>e.jsx("li",{children:h},A))})]}),C.type_mismatches.length>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-800 mb-2",children:"Type Mismatches:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-orange-700",children:C.type_mismatches.map((h,A)=>e.jsxs("li",{children:[h.column,": Expected ",h.expected_type,", found ",h.detected_type]},A))})]}),C.warnings.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Warnings:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-yellow-700",children:C.warnings.map((h,A)=>e.jsx("li",{children:h},A))})]})]})})]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>a(`/w/${s}/upload?step=2`),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Back to Upload"}),e.jsx("button",{onClick:re,disabled:!C.is_valid||K.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:K.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Continue Processing"})]})]})]})})},en=[{id:"facebook",name:"Meta (Facebook)",icon:"",description:"Facebook Ads Manager exports"},{id:"tiktok",name:"TikTok",icon:"",description:"TikTok Ads Manager exports"},{id:"snapchat",name:"Snapchat",icon:"",description:"Snapchat Ads Manager exports"}],tn=50*1024*1024,sn=[".csv",".xlsx"],an=()=>{const{workspace_id:s}=he(),[t,a]=ce(),r=l.useRef(null),n=M(m=>m.authentication_state.auth_token),i=M(m=>m.add_active_upload),c=M(m=>m.update_upload_progress),d=M(m=>m.complete_upload),y=M(m=>m.add_toast_notification),[b,N]=l.useState(1),[g,o]=l.useState([]),[S,C]=l.useState(""),[B,$]=l.useState({date_from:null,date_to:null}),[P,u]=l.useState(null),[w,U]=l.useState(null),[O,X]=l.useState({current_step:"",progress_percentage:0,estimated_completion:null,rows_processed:0,rows_total:0}),[z,E]=l.useState(!1);l.useEffect(()=>{const m=t.get("step");if(m){const x=parseInt(m);x>=1&&x<=5&&N(x)}},[t]);const G=()=>"https://123ad-performance.launchpulse.ai",{data:Y=[]}=ae({queryKey:["mapping-templates",s,S],queryFn:async()=>S?(await D.get(`${G()}/api/workspaces/${s}/mapping-templates`,{headers:{Authorization:`Bearer ${n}`},params:{platform:S,limit:50}})).data.data||[]:[],enabled:!!S&&!!n&&!!s,staleTime:5*60*1e3}),L=l.useCallback(async m=>{try{const x=await D.get(`${G()}/api/workspaces/${s}/uploads/${m}`,{headers:{Authorization:`Bearer ${n}`}});U(x.data),X({current_step:x.data.status,progress_percentage:x.data.progress,estimated_completion:null,rows_processed:x.data.rows_processed,rows_total:x.data.rows_total})}catch(x){console.error("Failed to fetch upload job:",x)}},[s,n]);l.useEffect(()=>{const m=t.get("upload_id");m&&!w&&L(m)},[t,L,w]);const p=te({mutationFn:async()=>{if(!g.length||!S)throw new Error("Missing required data");const m=new FormData;return m.append("file",g[0].file),m.append("platform",S),P!=null&&P.id&&m.append("mapping_template_id",P.id),B.date_from&&m.append("date_from",B.date_from),B.date_to&&m.append("date_to",B.date_to),(await D.post(`${G()}/api/workspaces/${s}/uploads`,m,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"multipart/form-data"}})).data},onSuccess:m=>{U(m),X({current_step:m.status,progress_percentage:m.progress,estimated_completion:null,rows_processed:m.rows_processed,rows_total:m.rows_total}),i({id:m.id,filename:m.original_filename,status:m.status,progress:m.progress,platform:m.platform}),a(x=>(x.set("upload_id",m.id),x.set("step","4"),x)),N(4),y({type:"success",message:"Upload started successfully",auto_dismiss:!0})},onError:m=>{var x,T;y({type:"error",message:((T=(x=m.response)==null?void 0:x.data)==null?void 0:T.message)||"Upload failed",auto_dismiss:!0})}}),{data:R}=ae({queryKey:["upload-progress",w==null?void 0:w.id],queryFn:async()=>w!=null&&w.id?(await D.get(`${G()}/api/workspaces/${s}/uploads/${w.id}`,{headers:{Authorization:`Bearer ${n}`}})).data:null,enabled:!!(w!=null&&w.id)&&!!n,refetchInterval:m=>{var x,T,Z,_;return((T=(x=m==null?void 0:m.state)==null?void 0:x.data)==null?void 0:T.status)==="completed"||((_=(Z=m==null?void 0:m.state)==null?void 0:Z.data)==null?void 0:_.status)==="failed"?!1:2e3}});l.useEffect(()=>{R&&(U(R),X({current_step:R.status,progress_percentage:R.progress,estimated_completion:null,rows_processed:R.rows_processed,rows_total:R.rows_total}),c(R.id,R.progress,R.status),(R.status==="completed"||R.status==="failed")&&(d(R.id,R.status),N(5),a(m=>(m.set("step","5"),m))))},[R,d,a,c]);const I=m=>{var T;if(m.size>tn)return{isValid:!1,error:"File size exceeds 50MB limit"};const x="."+((T=m.name.split(".").pop())==null?void 0:T.toLowerCase());return sn.includes(x)?{isValid:!0,error:null}:{isValid:!1,error:"Only CSV and XLSX files are allowed"}},H=l.useCallback(m=>{const T=Array.from(m).map(Z=>{const _=I(Z);return{file:Z,validation_status:_.isValid?"valid":"invalid",error_message:_.error,size:Z.size,type:Z.type}});o(T)},[]),K=l.useCallback(m=>{m.preventDefault(),E(!0)},[]),re=l.useCallback(m=>{m.preventDefault(),E(!1)},[]),h=l.useCallback(m=>{m.preventDefault(),E(!1),H(m.dataTransfer.files)},[H]),A=m=>{N(m),a(x=>(x.set("step",m.toString()),x))},q=m=>{switch(m){case 2:return g.length>0&&g[0].validation_status==="valid";case 3:return!!S;case 4:return!!S&&g.length>0;default:return!0}},f=m=>{if(m===0)return"0 Bytes";const x=1024,T=["Bytes","KB","MB","GB"],Z=Math.floor(Math.log(m)/Math.log(x));return parseFloat((m/Math.pow(x,Z)).toFixed(2))+" "+T[Z]};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("nav",{className:"text-sm text-gray-500 mb-4",children:[e.jsx(W,{to:`/w/${s}`,className:"hover:text-blue-600 transition-colors",children:"Dashboard"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(W,{to:`/w/${s}/uploads`,className:"hover:text-blue-600 transition-colors",children:"Uploads"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900",children:"Upload Wizard"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Data"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Follow the steps below to upload and process your advertising data"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("nav",{"aria-label":"Progress",children:e.jsx("ol",{className:"flex items-center",children:[{id:1,name:"Select Files",desc:"Choose your data files"},{id:2,name:"Choose Platform",desc:"Select data source"},{id:3,name:"Configure",desc:"Set options and mapping"},{id:4,name:"Processing",desc:"Upload and process data"},{id:5,name:"Complete",desc:"Review results"}].map((m,x)=>e.jsxs("li",{className:`relative ${x!==4?"pr-8 sm:pr-20":""}`,children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:x!==4&&e.jsx("div",{className:`h-0.5 w-full ${b>m.id?"bg-blue-600":"bg-gray-200"}`})}),e.jsx("button",{onClick:()=>q(m.id)&&A(m.id),disabled:!q(m.id),className:`relative w-8 h-8 flex items-center justify-center rounded-full border-2 ${b===m.id||b>m.id?"border-blue-600 bg-blue-600 text-white":"border-gray-300 bg-white text-gray-500"} ${q(m.id)?"hover:border-blue-400 cursor-pointer":"cursor-not-allowed"}`,children:b>m.id?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("span",{className:"text-sm font-medium",children:m.id})}),e.jsxs("div",{className:"ml-10 sm:ml-4 mt-2 sm:mt-0 sm:absolute sm:top-0 sm:left-10",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.name}),e.jsx("p",{className:"text-xs text-gray-500",children:m.desc})]})]},m.id))})})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[b===1&&e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Select Your Data Files"}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${z?"border-blue-500 bg-blue-50":g.length>0?"border-green-500 bg-green-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:K,onDragLeave:re,onDrop:h,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 48 48",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Drop your files here"}),e.jsx("p",{className:"text-gray-600",children:"or click to browse"})]}),e.jsx("button",{type:"button",onClick:()=>{var m;return(m=r.current)==null?void 0:m.click()},className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Choose Files"}),e.jsx("input",{ref:r,type:"file",multiple:!0,accept:".csv,.xlsx",onChange:m=>m.target.files&&H(m.target.files),className:"hidden"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Supports CSV and XLSX files up to 50MB"})]}),g.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Selected Files"}),e.jsx("div",{className:"space-y-3",children:g.map((m,x)=>e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${m.validation_status==="valid"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${m.validation_status==="valid"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:m.validation_status==="valid"?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.file.name}),e.jsx("p",{className:"text-sm text-gray-600",children:f(m.size)}),m.error_message&&e.jsx("p",{className:"text-sm text-red-600",children:m.error_message})]})]}),e.jsx("button",{onClick:()=>o(T=>T.filter((Z,_)=>_!==x)),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},x))})]}),e.jsx("div",{className:"flex justify-end mt-8",children:e.jsx("button",{onClick:()=>A(2),disabled:!q(2),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Continue"})})]}),b===2&&e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Choose Data Platform"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Select the advertising platform where your data originated from"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:en.map(m=>e.jsxs("label",{className:"relative cursor-pointer",children:[e.jsx("input",{type:"radio",name:"platform",value:m.id,checked:S===m.id,onChange:x=>C(x.target.value),className:"sr-only"}),e.jsxs("div",{className:`p-6 rounded-xl border-2 transition-all hover:shadow-md ${S===m.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:m.icon}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600",children:m.description})]}),S===m.id&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]})]},m.id))}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("button",{onClick:()=>A(1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>A(3),disabled:!q(3),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Continue"})]})]}),b===3&&e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Configure Upload"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Date Range (Optional)"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Specify the date range for data validation and filtering"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_from",className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",id:"date_from",value:B.date_from||"",onChange:m=>$(x=>({...x,date_from:m.target.value||null})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_to",className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",id:"date_to",value:B.date_to||"",onChange:m=>$(x=>({...x,date_to:m.target.value||null})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Mapping Template (Optional)"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose a pre-configured mapping template for faster processing"}),Y.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"mapping_template",checked:!P,onChange:()=>u(null),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Auto-detect columns (recommended)"})]}),Y.map(m=>e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"radio",name:"mapping_template",checked:(P==null?void 0:P.id)===m.id,onChange:()=>u(m),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 mt-1"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:m.name}),m.is_default&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Default"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Platform: ",m.platform]})]})]},m.id))]}):e.jsxs("div",{className:"text-sm text-gray-500",children:["No mapping templates available for ",S,". Auto-detection will be used."]})]})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("button",{onClick:()=>A(2),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Back"}),e.jsx("button",{onClick:()=>p.mutate(),disabled:p.isPending,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p.isPending?"Starting Upload...":"Start Upload"})]})]}),b===4&&e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Processing Upload"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[O.progress_percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${O.progress_percentage}%`}})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Current Status"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:O.current_step.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Rows Processed"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[O.rows_processed.toLocaleString()," / ",O.rows_total.toLocaleString()]})]})]})}),w&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-700 mb-4",children:"Upload Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Filename:"}),e.jsx("span",{className:"text-blue-900 font-medium",children:w.original_filename})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Platform:"}),e.jsx("span",{className:"text-blue-900 font-medium capitalize",children:w.platform})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"File Size:"}),e.jsx("span",{className:"text-blue-900 font-medium",children:f(w.file_size)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"Started:"}),e.jsx("span",{className:"text-blue-900 font-medium",children:new Date(w.created_at).toLocaleString()})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Processing Stages"}),e.jsx("div",{className:"space-y-3",children:[{stage:"queued",label:"Queued",desc:"Upload queued for processing"},{stage:"processing",label:"Processing",desc:"Parsing and validating data"},{stage:"completed",label:"Completed",desc:"Data successfully processed"}].map(m=>{const x=O.current_step===m.stage,T=["processing","completed"].includes(O.current_step)&&(["queued"].includes(m.stage)||m.stage==="processing"&&O.current_step==="completed");return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${T?"bg-green-100 text-green-600":x?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"}`,children:T?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):x?e.jsx("div",{className:"w-2 h-2 bg-current rounded-full animate-pulse"}):e.jsx("div",{className:"w-2 h-2 bg-current rounded-full"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:`text-sm font-medium ${T||x?"text-gray-900":"text-gray-500"}`,children:m.label}),e.jsx("p",{className:"text-xs text-gray-500",children:m.desc})]})]},m.stage)})})]})]})]}),b===5&&w&&e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"text-center mb-8",children:w.status==="completed"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Upload Completed!"}),e.jsx("p",{className:"text-gray-600",children:"Your data has been successfully processed and is now available in your dashboard."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Upload Failed"}),e.jsx("p",{className:"text-gray-600",children:"There was an issue processing your data. Please check the details below."})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Processing Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.rows_total.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Rows"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:w.rows_success.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600",children:"Successful"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:w.rows_error.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600",children:"Errors"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[w.progress,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Processed"})]})]})]}),w.status==="failed"&&w.error_text&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Error Details"}),e.jsx("p",{className:"text-red-700",children:w.error_text}),w.error_log_url&&e.jsxs("a",{href:w.error_log_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center mt-4 text-sm text-red-600 hover:text-red-500",children:["Download Error Log",e.jsx("svg",{className:"ml-1 w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:w.status==="completed"?e.jsxs(e.Fragment,{children:[e.jsx(W,{to:`/w/${s}`,className:"inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"View Dashboard"}),e.jsx(W,{to:`/w/${s}/campaigns`,className:"inline-flex items-center justify-center px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"View Campaigns"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{N(1),o([]),C(""),U(null),a({})},className:"inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Try Again"}),e.jsx(W,{to:`/w/${s}/uploads`,className:"inline-flex items-center justify-center px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"View All Uploads"})]})})]})]})]})})})},rn=()=>{const{workspace_id:s}=he(),[t,a]=ce(),r=Pe(),n=M(v=>v.authentication_state.auth_token),i=M(v=>v.authentication_state.current_user),c=M(v=>v.add_toast_notification),[d,y]=l.useState("rules"),[b,N]=l.useState(null),[g,o]=l.useState(!1),[S,C]=l.useState(null),B=t.get("rule_status"),$=t.get("trigger_status"),P=t.get("alert_type"),u=t.get("date_from"),[w,U]=l.useState({name:"",metric:"spend",condition:"greater_than",threshold:null,threshold_percentage:null,time_window:"daily",platform_filter:null,account_filter:null,campaign_filter:null,severity:"warning",is_active:!0,notification_email:!0,notification_in_app:!0,cooldown_minutes:60}),[O,X]=l.useState(1),[z,E]=l.useState(1),G=()=>"https://123ad-performance.launchpulse.ai",Y=async(v=1)=>{const j=new URLSearchParams({limit:"10",offset:((v-1)*10).toString()});return B==="active"&&j.set("is_active","true"),B==="inactive"&&j.set("is_active","false"),P&&j.set("severity",P),(await D.get(`${G()}/api/workspaces/${s}/alert-rules?${j}`,{headers:{Authorization:`Bearer ${n}`}})).data},L=async(v=1)=>{const j=new URLSearchParams({limit:"10",offset:((v-1)*10).toString()});return $==="resolved"&&j.set("is_resolved","true"),$==="unresolved"&&j.set("is_resolved","false"),(await D.get(`${G()}/api/workspaces/${s}/alert-triggers?${j}`,{headers:{Authorization:`Bearer ${n}`}})).data},p=async v=>(await D.post(`${G()}/api/workspaces/${s}/alert-rules`,{...v,workspace_id:s,created_by:i==null?void 0:i.id},{headers:{Authorization:`Bearer ${n}`}})).data,R=async(v,j)=>(await D.put(`${G()}/api/workspaces/${s}/alert-rules/${v}`,j,{headers:{Authorization:`Bearer ${n}`}})).data,I=async v=>{await D.delete(`${G()}/api/workspaces/${s}/alert-rules/${v}`,{headers:{Authorization:`Bearer ${n}`}})},H=async v=>(await D.put(`${G()}/api/workspaces/${s}/alert-triggers/${v}`,{is_resolved:!0,resolved_by:i==null?void 0:i.id,resolved_at:new Date().toISOString()},{headers:{Authorization:`Bearer ${n}`}})).data,{data:K,isLoading:re,error:h}=ae({queryKey:["alert-rules",s,O,B,P],queryFn:()=>Y(O),enabled:!!s&&!!n&&d==="rules",staleTime:3e4}),{data:A,isLoading:q,error:f}=ae({queryKey:["alert-triggers",s,z,$],queryFn:()=>L(z),enabled:!!s&&!!n&&d==="triggers",staleTime:3e4}),m=te({mutationFn:p,onSuccess:()=>{r.invalidateQueries({queryKey:["alert-rules"]}),c({type:"success",message:"Alert rule created successfully",auto_dismiss:!0}),y("rules"),_()},onError:v=>{var j,Q;c({type:"error",message:((Q=(j=v.response)==null?void 0:j.data)==null?void 0:Q.message)||"Failed to create alert rule",auto_dismiss:!0})}}),x=te({mutationFn:({ruleId:v,ruleData:j})=>R(v,j),onSuccess:()=>{r.invalidateQueries({queryKey:["alert-rules"]}),c({type:"success",message:"Alert rule updated successfully",auto_dismiss:!0}),N(null),o(!1),_()},onError:v=>{var j,Q;c({type:"error",message:((Q=(j=v.response)==null?void 0:j.data)==null?void 0:Q.message)||"Failed to update alert rule",auto_dismiss:!0})}}),T=te({mutationFn:I,onSuccess:()=>{r.invalidateQueries({queryKey:["alert-rules"]}),c({type:"success",message:"Alert rule deleted successfully",auto_dismiss:!0}),C(null)},onError:v=>{var j,Q;c({type:"error",message:((Q=(j=v.response)==null?void 0:j.data)==null?void 0:Q.message)||"Failed to delete alert rule",auto_dismiss:!0})}}),Z=te({mutationFn:H,onSuccess:()=>{r.invalidateQueries({queryKey:["alert-triggers"]}),c({type:"success",message:"Alert resolved successfully",auto_dismiss:!0})},onError:v=>{var j,Q;c({type:"error",message:((Q=(j=v.response)==null?void 0:j.data)==null?void 0:Q.message)||"Failed to resolve alert",auto_dismiss:!0})}}),_=()=>{U({name:"",metric:"spend",condition:"greater_than",threshold:null,threshold_percentage:null,time_window:"daily",platform_filter:null,account_filter:null,campaign_filter:null,severity:"warning",is_active:!0,notification_email:!0,notification_in_app:!0,cooldown_minutes:60})},F=(v,j)=>{const Q=new URLSearchParams(t);j?Q.set(v,j):Q.delete(v),a(Q)},se=v=>{v.preventDefault(),g&&b?x.mutate({ruleId:b.id,ruleData:w}):m.mutate(w)},pe=v=>{N(v),o(!0),U({name:v.name,metric:v.metric,condition:v.condition,threshold:v.threshold,threshold_percentage:v.threshold_percentage,time_window:v.time_window,platform_filter:v.platform_filter,account_filter:v.account_filter,campaign_filter:v.campaign_filter,severity:v.severity,is_active:v.is_active,notification_email:v.notification_email,notification_in_app:v.notification_in_app,cooldown_minutes:v.cooldown_minutes}),y("create")},je=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Ne=v=>{switch(v){case"critical":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800";case"info":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},_e=v=>v?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Alert Management"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Configure alert rules and monitor triggered alerts for proactive performance monitoring"})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsx("button",{onClick:()=>{_(),o(!1),N(null),y("create")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Create Alert Rule"})})]})})})}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>y("rules"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d==="rules"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Alert Rules",K&&e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-600 py-0.5 px-2 rounded-full text-xs",children:K.pagination.total})]}),e.jsxs("button",{onClick:()=>y("triggers"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d==="triggers"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Alert History",A&&e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-600 py-0.5 px-2 rounded-full text-xs",children:A.pagination.total})]}),e.jsx("button",{onClick:()=>y("create"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${d==="create"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:g?"Edit Rule":"Create Rule"})]})}),d==="rules"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rule Status"}),e.jsxs("select",{value:B||"",onChange:v=>F("rule_status",v.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Severity"}),e.jsxs("select",{value:P||"",onChange:v=>F("alert_type",v.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Severities"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"info",children:"Info"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date From"}),e.jsx("input",{type:"date",value:u||"",onChange:v=>F("date_from",v.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Alert Rules"})}),re?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading alert rules..."})]}):h?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Error loading alert rules. Please try again."})}):K!=null&&K.data.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rule Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric & Condition"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Severity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Triggered"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.data.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Cooldown: ",v.cooldown_minutes,"min"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[v.metric.toUpperCase()," ",v.condition.replace("_"," ")]}),e.jsx("div",{className:"text-sm text-gray-500",children:v.threshold!==null?`Threshold: ${v.threshold}`:`Percentage: ${v.threshold_percentage}%`})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Ne(v.severity)}`,children:v.severity})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_e(v.is_active)}`,children:v.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.last_triggered_at?je(v.last_triggered_at):"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 justify-end",children:[e.jsx("button",{onClick:()=>pe(v),className:"text-blue-600 hover:text-blue-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>{x.mutate({ruleId:v.id,ruleData:{is_active:!v.is_active}})},className:`transition-colors ${v.is_active?"text-yellow-600 hover:text-yellow-700":"text-green-600 hover:text-green-700"}`,children:v.is_active?"Disable":"Enable"}),e.jsx("button",{onClick:()=>C(v.id),className:"text-red-600 hover:text-red-700 transition-colors",children:"Delete"})]})})]},v.id))})]})}):e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No alert rules found. Create your first alert rule to get started."})}),K&&K.pagination.total_pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(O-1)*10+1," to ",Math.min(O*10,K.pagination.total)," of ",K.pagination.total," rules"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>X(v=>Math.max(1,v-1)),disabled:O===1,className:"px-3 py-2 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsx("button",{onClick:()=>X(v=>Math.min(K.pagination.total_pages,v+1)),disabled:O===K.pagination.total_pages,className:"px-3 py-2 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]}),d==="triggers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resolution Status"}),e.jsxs("select",{value:$||"",onChange:v=>F("trigger_status",v.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"unresolved",children:"Unresolved"}),e.jsx("option",{value:"resolved",children:"Resolved"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Alert History"})}),q?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading alert history..."})]}):f?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-red-600",children:"Error loading alert history. Please try again."})}):A!=null&&A.data.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Triggered At"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Affected Entity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platform"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.data.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:je(v.triggered_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.affected_entity_name||v.affected_entity_id}),e.jsx("div",{className:"text-sm text-gray-500",children:v.affected_entity_type})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:v.platform})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:["Value: ",v.metric_value]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Threshold: ",v.threshold_value]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.is_resolved?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.is_resolved?"Resolved":"Unresolved"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:!v.is_resolved&&e.jsx("button",{onClick:()=>Z.mutate(v.id),disabled:Z.isPending,className:"text-green-600 hover:text-green-700 transition-colors disabled:opacity-50",children:Z.isPending?"Resolving...":"Resolve"})})]},v.id))})]})}):e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No triggered alerts found."})}),A&&A.pagination.total_pages>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(z-1)*10+1," to ",Math.min(z*10,A.pagination.total)," of ",A.pagination.total," triggers"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>E(v=>Math.max(1,v-1)),disabled:z===1,className:"px-3 py-2 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),e.jsx("button",{onClick:()=>E(v=>Math.min(A.pagination.total_pages,v+1)),disabled:z===A.pagination.total_pages,className:"px-3 py-2 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]}),d==="create"&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:g?"Edit Alert Rule":"Create New Alert Rule"}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Configure alert conditions and notification settings"})]}),e.jsxs("form",{onSubmit:se,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rule Name *"}),e.jsx("input",{type:"text",value:w.name,onChange:v=>U(j=>({...j,name:v.target.value})),required:!0,placeholder:"e.g., High ROAS Drop Alert",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Severity *"}),e.jsxs("select",{value:w.severity,onChange:v=>U(j=>({...j,severity:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Metric *"}),e.jsxs("select",{value:w.metric,onChange:v=>U(j=>({...j,metric:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"spend",children:"Spend"}),e.jsx("option",{value:"impressions",children:"Impressions"}),e.jsx("option",{value:"clicks",children:"Clicks"}),e.jsx("option",{value:"conversions",children:"Conversions"}),e.jsx("option",{value:"revenue",children:"Revenue"}),e.jsx("option",{value:"ctr",children:"CTR"}),e.jsx("option",{value:"cpm",children:"CPM"}),e.jsx("option",{value:"cpc",children:"CPC"}),e.jsx("option",{value:"cpa",children:"CPA"}),e.jsx("option",{value:"cvr",children:"CVR"}),e.jsx("option",{value:"roas",children:"ROAS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Condition *"}),e.jsxs("select",{value:w.condition,onChange:v=>U(j=>({...j,condition:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"greater_than",children:"Greater Than"}),e.jsx("option",{value:"less_than",children:"Less Than"}),e.jsx("option",{value:"percentage_increase",children:"Percentage Increase"}),e.jsx("option",{value:"percentage_decrease",children:"Percentage Decrease"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Window *"}),e.jsxs("select",{value:w.time_window,onChange:v=>U(j=>({...j,time_window:v.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.condition==="greater_than"||w.condition==="less_than"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Threshold Value"}),e.jsx("input",{type:"number",step:"0.01",value:w.threshold||"",onChange:v=>U(j=>({...j,threshold:v.target.value?parseFloat(v.target.value):null,threshold_percentage:null})),placeholder:"e.g., 1000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Percentage Change (%)"}),e.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:w.threshold_percentage||"",onChange:v=>U(j=>({...j,threshold_percentage:v.target.value?parseFloat(v.target.value):null,threshold:null})),placeholder:"e.g., 20",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cooldown (minutes) *"}),e.jsx("input",{type:"number",min:"1",value:w.cooldown_minutes,onChange:v=>U(j=>({...j,cooldown_minutes:parseInt(v.target.value)||60})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notification Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"notification_email",checked:w.notification_email,onChange:v=>U(j=>({...j,notification_email:v.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"notification_email",className:"ml-2 text-sm text-gray-700",children:"Send email notifications"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"notification_in_app",checked:w.notification_in_app,onChange:v=>U(j=>({...j,notification_in_app:v.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"notification_in_app",className:"ml-2 text-sm text-gray-700",children:"Send in-app notifications"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:w.is_active,onChange:v=>U(j=>({...j,is_active:v.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Activate rule immediately"})]})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"submit",disabled:m.isPending||x.isPending,className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m.isPending||x.isPending?"Saving...":g?"Update Rule":"Create Rule"}),e.jsx("button",{type:"button",onClick:()=>{_(),o(!1),N(null),y("rules")},className:"bg-gray-300 text-gray-700 px-6 py-2 rounded-lg font-medium hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Alert Rule"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this alert rule? This action cannot be undone."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>{T.mutate(S)},disabled:T.isPending,className:"bg-red-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-700 disabled:opacity-50 transition-colors",children:T.isPending?"Deleting...":"Delete"}),e.jsx("button",{onClick:()=>C(null),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})})]})})},nn=()=>{var pe,je,Ne,_e,v,j,Q,ee,oe,Nt,_t,kt,Ct,St,Lt,At,Et,Pt,Rt;const{workspace_id:s}=he(),[t,a]=ce(),r=Pe(),n=M(k=>k.authentication_state.current_user),i=M(k=>k.authentication_state.auth_token),c=M(k=>k.current_workspace),[d,y]=l.useState(t.get("section")||"workspace"),[b,N]=l.useState({workspace:!1,personal:!1,team:!1}),[g,o]=l.useState({workspace:{},personal:{},team_invitation:{email:"",role:"member"}}),[S,C]=l.useState(!1),[B,$]=l.useState(""),P=()=>"https://123ad-performance.launchpulse.ai",u=(c==null?void 0:c.role)||"member",w=u==="owner"||u==="admin",U=u==="owner"||u==="admin",O=u==="owner",X=async()=>(await D.get(`${P()}/api/workspaces/${s}`,{headers:{Authorization:`Bearer ${i}`}})).data,z=async()=>(await D.get(`${P()}/api/users/${n==null?void 0:n.id}/preferences`,{headers:{Authorization:`Bearer ${i}`}})).data,E=async()=>(await D.get(`${P()}/api/workspaces/${s}/members`,{headers:{Authorization:`Bearer ${i}`}})).data,G=async()=>(await D.get(`${P()}/api/workspaces/${s}/invitations`,{headers:{Authorization:`Bearer ${i}`}})).data,Y=ae({queryKey:["workspace-settings",s],queryFn:X,enabled:!!s&&!!i&&w,staleTime:5*60*1e3}),L=ae({queryKey:["user-preferences",n==null?void 0:n.id],queryFn:z,enabled:!!(n!=null&&n.id)&&!!i,staleTime:5*60*1e3}),p=ae({queryKey:["team-members",s],queryFn:E,enabled:!!s&&!!i&&U,staleTime:2*60*1e3}),R=ae({queryKey:["pending-invitations",s],queryFn:G,enabled:!!s&&!!i&&U,staleTime:2*60*1e3}),I=te({mutationFn:async k=>(await D.put(`${P()}/api/workspaces/${s}`,k,{headers:{Authorization:`Bearer ${i}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["workspace-settings",s]}),N(k=>({...k,workspace:!1})),o(k=>({...k,workspace:{}}))}}),H=te({mutationFn:async k=>(await D.put(`${P()}/api/users/${n==null?void 0:n.id}/preferences`,k,{headers:{Authorization:`Bearer ${i}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["user-preferences",n==null?void 0:n.id]}),N(k=>({...k,personal:!1})),o(k=>({...k,personal:{}}))}}),K=te({mutationFn:async k=>(await D.post(`${P()}/api/workspaces/${s}/invitations`,k,{headers:{Authorization:`Bearer ${i}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["pending-invitations",s]}),o(k=>({...k,team_invitation:{email:"",role:"member"}}))}}),re=te({mutationFn:async({member_id:k,role:V})=>(await D.put(`${P()}/api/workspaces/${s}/members/${k}`,{role:V},{headers:{Authorization:`Bearer ${i}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["team-members",s]})}}),h=te({mutationFn:async k=>{await D.delete(`${P()}/api/workspaces/${s}/members/${k}`,{headers:{Authorization:`Bearer ${i}`}})},onSuccess:()=>{r.invalidateQueries({queryKey:["team-members",s]})}}),A=te({mutationFn:async()=>{await D.delete(`${P()}/api/workspaces/${s}`,{headers:{Authorization:`Bearer ${i}`}})},onSuccess:()=>{window.location.href="/w/default"}}),q=k=>{y(k),a({section:k})},f=k=>{if(k.preventDefault(),!Y.data)return;const V={...Y.data,...g.workspace};I.mutate(V)},m=k=>{if(k.preventDefault(),!L.data)return;const V={...L.data,...g.personal};H.mutate(V)},x=k=>{k.preventDefault(),K.mutate(g.team_invitation)},T=(k,V)=>{re.mutate({member_id:k,role:V})},Z=k=>{confirm("Are you sure you want to remove this team member?")&&h.mutate(k)},_=()=>{var k;B===((k=Y.data)==null?void 0:k.name)&&A.mutate()};l.useEffect(()=>{b.workspace&&Y.data&&o(k=>({...k,workspace:{...Y.data}}))},[b.workspace,Y.data]),l.useEffect(()=>{b.personal&&L.data&&o(k=>({...k,personal:{...L.data}}))},[b.personal,L.data]);const F=[{value:"USD",label:"USD ($)"},{value:"EUR",label:"EUR ()"},{value:"GBP",label:"GBP ()"}],se=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time"},{value:"America/Chicago",label:"Central Time"},{value:"America/Denver",label:"Mountain Time"},{value:"America/Los_Angeles",label:"Pacific Time"},{value:"Europe/London",label:"London"},{value:"Europe/Paris",label:"Paris"},{value:"Asia/Tokyo",label:"Tokyo"}];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your workspace configuration and personal preferences"})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("nav",{className:"space-y-1",children:[w&&e.jsx("button",{onClick:()=>q("workspace"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${d==="workspace"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Workspace"}),U&&e.jsx("button",{onClick:()=>q("team"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${d==="team"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Team"}),e.jsx("button",{onClick:()=>q("personal"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${d==="personal"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Personal"}),u==="owner"&&e.jsx("button",{onClick:()=>q("billing"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${d==="billing"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:"Billing"})]})}),e.jsxs("div",{className:"lg:col-span-9 mt-6 lg:mt-0",children:[d==="workspace"&&w&&e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Workspace Settings"}),b.workspace?e.jsx("div",{className:"space-x-2",children:e.jsx("button",{onClick:()=>N(k=>({...k,workspace:!1})),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-500",children:"Cancel"})}):e.jsx("button",{onClick:()=>N(k=>({...k,workspace:!0})),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Edit"})]})}),e.jsxs("div",{className:"px-6 py-6",children:[Y.isLoading?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):b.workspace?e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Workspace Name"}),e.jsx("input",{type:"text",value:g.workspace.name||"",onChange:k=>o(V=>({...V,workspace:{...V.workspace,name:k.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Currency"}),e.jsx("select",{value:g.workspace.default_currency||"USD",onChange:k=>o(V=>({...V,workspace:{...V.workspace,default_currency:k.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:F.map(k=>e.jsx("option",{value:k.value,children:k.label},k.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Revenue per Conversion"}),e.jsx("input",{type:"number",step:"0.01",value:g.workspace.default_revenue_per_conversion||"",onChange:k=>o(V=>({...V,workspace:{...V.workspace,default_revenue_per_conversion:k.target.value?parseFloat(k.target.value):null}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Used for calculating ROAS when revenue data is not available"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Timezone"}),e.jsx("select",{value:g.workspace.timezone||"UTC",onChange:k=>o(V=>({...V,workspace:{...V.workspace,timezone:k.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:se.map(k=>e.jsx("option",{value:k.value,children:k.label},k.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data Retention (Days)"}),e.jsxs("select",{value:g.workspace.data_retention_days||730,onChange:k=>o(V=>({...V,workspace:{...V.workspace,data_retention_days:parseInt(k.target.value)}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:90,children:"90 days"}),e.jsx("option",{value:180,children:"180 days"}),e.jsx("option",{value:365,children:"1 year"}),e.jsx("option",{value:730,children:"2 years"}),e.jsx("option",{value:1095,children:"3 years"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"How long to keep historical data before automatic deletion"})]}),e.jsx("div",{className:"flex justify-end space-x-3",children:e.jsx("button",{type:"submit",disabled:I.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:I.isPending?"Saving...":"Save Changes"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Workspace Name"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:(pe=Y.data)==null?void 0:pe.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Default Currency"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:(je=Y.data)==null?void 0:je.default_currency})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Default Revenue per Conversion"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:(Ne=Y.data)!=null&&Ne.default_revenue_per_conversion?`${Y.data.default_currency} ${Y.data.default_revenue_per_conversion}`:"Not set"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Timezone"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:(_e=Y.data)==null?void 0:_e.timezone})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Data Retention"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[(v=Y.data)==null?void 0:v.data_retention_days," days"]})]})]}),I.isError&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsx("p",{className:"text-sm",children:"Failed to update workspace settings. Please try again."})})]}),O&&e.jsx("div",{className:"px-6 py-6 border-t border-gray-200",children:e.jsxs("div",{className:"rounded-md bg-red-50 p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"Danger Zone"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Once you delete a workspace, there is no going back. All data will be permanently lost."}),S?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-red-700",children:['Type the workspace name "',(j=Y.data)==null?void 0:j.name,'" to confirm deletion:']}),e.jsx("input",{type:"text",value:B,onChange:k=>$(k.target.value),className:"block w-full px-3 py-2 border border-red-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:(Q=Y.data)==null?void 0:Q.name}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:_,disabled:B!==((ee=Y.data)==null?void 0:ee.name)||A.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:opacity-50",children:A.isPending?"Deleting...":"Delete Workspace"}),e.jsx("button",{onClick:()=>{C(!1),$("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>C(!0),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"Delete Workspace"})]})})]}),d==="team"&&U&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Team Members"})}),e.jsx("div",{className:"px-6 py-6",children:p.isLoading?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(k=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]})]},k))}):e.jsx("div",{className:"space-y-4",children:(oe=p.data)==null?void 0:oe.map(k=>e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-800",children:k.user.name.split(" ").map(V=>V[0]).join("").substring(0,2)})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.user.name}),e.jsx("p",{className:"text-sm text-gray-500",children:k.user.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:k.membership.role,onChange:V=>T(k.membership.id,V.target.value),disabled:k.user.id===(n==null?void 0:n.id),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"owner",children:"Owner"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"member",children:"Member"})]}),k.user.id!==(n==null?void 0:n.id)&&e.jsx("button",{onClick:()=>Z(k.membership.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]},k.membership.id))})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Invite Team Member"})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx("input",{type:"email",required:!0,value:g.team_invitation.email,onChange:k=>o(V=>({...V,team_invitation:{...V.team_invitation,email:k.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"colleague@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),e.jsxs("select",{value:g.team_invitation.role,onChange:k=>o(V=>({...V,team_invitation:{...V.team_invitation,role:k.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"member",children:"Member"})]})]}),e.jsx("button",{type:"submit",disabled:K.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:K.isPending?"Sending...":"Send Invitation"})]}),K.isError&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsx("p",{className:"text-sm",children:"Failed to send invitation. Please check the email address and try again."})})]})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Pending Invitations"})}),e.jsx("div",{className:"px-6 py-6",children:R.isLoading?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2].map(k=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},k))}):((Nt=R.data)==null?void 0:Nt.length)===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No pending invitations"}):e.jsx("div",{className:"space-y-4",children:(_t=R.data)==null?void 0:_t.map(k=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.email}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Role: ",k.role,"  Expires: ",new Date(k.expires_at).toLocaleDateString()]})]}),e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending"})]},k.id))})})]})]}),d==="personal"&&e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Personal Preferences"}),b.personal?e.jsx("button",{onClick:()=>N(k=>({...k,personal:!1})),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-500",children:"Cancel"}):e.jsx("button",{onClick:()=>N(k=>({...k,personal:!0})),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-500",children:"Edit"})]})}),e.jsxs("div",{className:"px-6 py-6",children:[L.isLoading?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}):b.personal?e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.personal.email_notifications??!0,onChange:k=>o(V=>({...V,personal:{...V.personal,email_notifications:k.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-3 text-sm text-gray-700",children:"Email notifications"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.personal.in_app_notifications??!0,onChange:k=>o(V=>({...V,personal:{...V.personal,in_app_notifications:k.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-3 text-sm text-gray-700",children:"In-app notifications"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email frequency"}),e.jsxs("select",{value:g.personal.email_frequency||"immediate",onChange:k=>o(V=>({...V,personal:{...V.personal,email_frequency:k.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"immediate",children:"Immediate"}),e.jsx("option",{value:"daily",children:"Daily digest"}),e.jsx("option",{value:"weekly",children:"Weekly digest"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Display Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g.personal.reduced_motion??!1,onChange:k=>o(V=>({...V,personal:{...V.personal,reduced_motion:k.target.checked}})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-3 text-sm text-gray-700",children:"Reduce motion (accessibility)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date format"}),e.jsxs("select",{value:g.personal.date_format||"YYYY-MM-DD",onChange:k=>o(V=>({...V,personal:{...V.personal,date_format:k.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"}),e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Number format"}),e.jsxs("select",{value:g.personal.number_format||"US",onChange:k=>o(V=>({...V,personal:{...V.personal,number_format:k.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"US",children:"US (1,234.56)"}),e.jsx("option",{value:"EU",children:"EU (1.234,56)"}),e.jsx("option",{value:"UK",children:"UK (1,234.56)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default dashboard view"}),e.jsxs("select",{value:g.personal.default_dashboard_view||"overview",onChange:k=>o(V=>({...V,personal:{...V.personal,default_dashboard_view:k.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"overview",children:"Overview"}),e.jsx("option",{value:"campaigns",children:"Campaigns"}),e.jsx("option",{value:"creatives",children:"Creatives"}),e.jsx("option",{value:"analytics",children:"Analytics"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Theme"}),e.jsxs("select",{value:g.personal.theme_preference||"dark",onChange:k=>o(V=>({...V,personal:{...V.personal,theme_preference:k.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"auto",children:"Auto"})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:H.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:H.isPending?"Saving...":"Save Preferences"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Email notifications: ",(kt=L.data)!=null&&kt.email_notifications?"Enabled":"Disabled"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["In-app notifications: ",(Ct=L.data)!=null&&Ct.in_app_notifications?"Enabled":"Disabled"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Email frequency: ",(St=L.data)==null?void 0:St.email_frequency]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Display Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Reduced motion: ",(Lt=L.data)!=null&&Lt.reduced_motion?"Enabled":"Disabled"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Date format: ",(At=L.data)==null?void 0:At.date_format]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Number format: ",(Et=L.data)==null?void 0:Et.number_format]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Default dashboard: ",(Pt=L.data)==null?void 0:Pt.default_dashboard_view]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Theme: ",(Rt=L.data)==null?void 0:Rt.theme_preference]})]})]})]}),H.isError&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsx("p",{className:"text-sm",children:"Failed to update preferences. Please try again."})})]})]}),d==="billing"&&u==="owner"&&e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Billing"})}),e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Billing management coming soon"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Manage your subscription, payment methods, and billing history"})]})})]}),(d==="workspace"&&!w||d==="team"&&!U||d==="billing"&&u!=="owner")&&e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 text-gray-400",children:e.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m0 0v2m0-2h2m-2 0H10m9-7a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Restricted"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to access this section. Contact your workspace owner for access."})]})})]})]})})]})})},Ae=()=>"https://123ad-performance.launchpulse.ai",ln=async(s,t,a)=>{const r=new URLSearchParams;return a&&r.append("member_filter",a),(await D.get(`${Ae()}/api/workspaces/${s}/members?${r.toString()}`,{headers:{Authorization:`Bearer ${t}`}})).data},on=async(s,t)=>(await D.get(`${Ae()}/api/workspaces/${s}/invitations`,{headers:{Authorization:`Bearer ${t}`}})).data,cn=async(s,t)=>(await D.get(`${Ae()}/api/workspaces/${s}/audit-logs?limit=50&sort_by=created_at&sort_order=desc`,{headers:{Authorization:`Bearer ${t}`}})).data,dn=async(s,t,a,r)=>(await D.post(`${Ae()}/api/workspaces/${s}/invitations`,{email:a,role:r},{headers:{Authorization:`Bearer ${t}`}})).data,mn=async(s,t,a,r)=>(await D.put(`${Ae()}/api/workspaces/${s}/members/${t}`,{role:r},{headers:{Authorization:`Bearer ${a}`}})).data,xn=async(s,t,a)=>{await D.delete(`${Ae()}/api/workspaces/${s}/members/${t}`,{headers:{Authorization:`Bearer ${a}`}})},un=async(s,t,a)=>(await D.post(`${Ae()}/api/workspaces/${s}/exports`,{export_type:"team_members",format:a},{headers:{Authorization:`Bearer ${t}`}})).data,hn=()=>{const{workspace_id:s}=he(),[t,a]=ce(),r=M(_=>_.authentication_state.auth_token),n=M(_=>_.current_workspace),i=M(_=>_.add_toast_notification),[c,d]=l.useState({email:"",role:"member",is_submitting:!1,validation_errors:{}}),[y,b]=l.useState(t.get("member_filter")),[N,g]=l.useState(null),[o,S]=l.useState("members"),[C,B]=l.useState(""),$=(n==null?void 0:n.role)||"member",P=$==="owner"||$==="admin",{data:u=[],isLoading:w,refetch:U}=ae({queryKey:["teamMembers",s,y],queryFn:()=>ln(s,r,y||void 0),enabled:!!s&&!!r,staleTime:6e4}),{data:O=[],isLoading:X,refetch:z}=ae({queryKey:["pendingInvitations",s],queryFn:()=>on(s,r),enabled:!!s&&!!r,staleTime:3e4}),{data:E,isLoading:G}=ae({queryKey:["auditLogs",s],queryFn:()=>cn(s,r),enabled:!!s&&!!r&&o==="audit",staleTime:3e4}),Y=(E==null?void 0:E.data)||[],L=te({mutationFn:({email:_,role:F})=>dn(s,r,_,F),onSuccess:()=>{i({type:"success",message:"Team member invited successfully",auto_dismiss:!0}),d({email:"",role:"member",is_submitting:!1,validation_errors:{}}),z()},onError:_=>{var F,se;i({type:"error",message:((se=(F=_.response)==null?void 0:F.data)==null?void 0:se.message)||"Failed to send invitation",auto_dismiss:!0}),d(pe=>({...pe,is_submitting:!1}))}}),p=te({mutationFn:({memberId:_,role:F})=>mn(s,_,r,F),onSuccess:()=>{i({type:"success",message:"Member role updated successfully",auto_dismiss:!0}),g(null),U()},onError:_=>{var F,se;i({type:"error",message:((se=(F=_.response)==null?void 0:F.data)==null?void 0:se.message)||"Failed to update member role",auto_dismiss:!0})}}),R=te({mutationFn:_=>xn(s,_,r),onSuccess:()=>{i({type:"success",message:"Member removed successfully",auto_dismiss:!0}),U()},onError:_=>{var F,se;i({type:"error",message:((se=(F=_.response)==null?void 0:F.data)==null?void 0:se.message)||"Failed to remove member",auto_dismiss:!0})}}),I=te({mutationFn:_=>un(s,r,_),onSuccess:()=>{i({type:"success",message:"Team data export started",auto_dismiss:!0})},onError:_=>{var F,se;i({type:"error",message:((se=(F=_.response)==null?void 0:F.data)==null?void 0:se.message)||"Failed to export team data",auto_dismiss:!0})}}),H=()=>{const _={};return c.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)||(_.email="Please enter a valid email address"):_.email="Email is required",c.role||(_.role="Role selection is required"),d(F=>({...F,validation_errors:_})),Object.keys(_).length===0},K=async _=>{_.preventDefault(),H()&&(d(F=>({...F,is_submitting:!0})),L.mutate({email:c.email,role:c.role}))},re=(_,F,se)=>{g({membership_id:_,current_role:F,new_role:se})},h=()=>{N&&p.mutate({memberId:N.membership_id,role:N.new_role})},A=(_,F)=>{window.confirm(`Are you sure you want to remove ${F} from the workspace?`)&&R.mutate(_)},q=_=>{b(_);const F=new URLSearchParams(t);_?F.set("member_filter",_):F.delete("member_filter"),a(F)},f=_=>{I.mutate(_)},m=_=>{switch(_){case"owner":return"bg-purple-100 text-purple-800";case"admin":return"bg-blue-100 text-blue-800";case"member":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},x=_=>{switch(_){case"active":return e.jsx(le,{className:"size-4 text-green-500"});case"pending":return e.jsx(nt,{className:"size-4 text-yellow-500"});case"inactive":return e.jsx(ke,{className:"size-4 text-red-500"});default:return e.jsx(nt,{className:"size-4 text-gray-500"})}},T=u.filter(_=>_.user.name.toLowerCase().includes(C.toLowerCase())||_.user.email.toLowerCase().includes(C.toLowerCase())),Z=()=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(lt,{className:"size-5 mr-2 text-blue-600"}),"Role Permissions Matrix"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permission"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Owner"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"View workspace data"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Upload data files"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Create and manage alerts"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ke,{className:"size-4 text-red-500 mx-auto"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Manage team members"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ke,{className:"size-4 text-red-500 mx-auto"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Workspace settings"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ke,{className:"size-4 text-red-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ke,{className:"size-4 text-red-500 mx-auto"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Delete workspace"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(le,{className:"size-4 text-green-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ke,{className:"size-4 text-red-500 mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx(ke,{className:"size-4 text-red-500 mx-auto"})})]})]})]})})]});return P?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("nav",{className:"flex space-x-2 text-sm text-gray-500 mb-2",children:[e.jsx(W,{to:`/w/${s}`,className:"hover:text-gray-700",children:"Dashboard"}),e.jsx("span",{children:""}),e.jsx(W,{to:`/w/${s}/settings`,className:"hover:text-gray-700",children:"Settings"}),e.jsx("span",{children:""}),e.jsx("span",{className:"text-gray-900",children:"Team Management"})]}),e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(ot,{className:"size-8 mr-3 text-blue-600"}),"Team Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage team members, roles, and permissions for your workspace"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>f("csv"),disabled:I.isPending,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[e.jsx(ct,{className:"size-4 mr-2"}),"Export CSV"]}),e.jsxs("button",{onClick:()=>f("xlsx"),disabled:I.isPending,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:[e.jsx(ct,{className:"size-4 mr-2"}),"Export Excel"]})]})]})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>S("members"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${o==="members"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(ot,{className:"size-4 inline mr-2"}),"Team Members (",u.length,")"]}),e.jsxs("button",{onClick:()=>S("invitations"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${o==="invitations"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Mt,{className:"size-4 inline mr-2"}),"Pending Invitations (",O.length,")"]}),e.jsxs("button",{onClick:()=>S("audit"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${o==="audit"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx($t,{className:"size-4 inline mr-2"}),"Audit Log"]}),e.jsxs("button",{onClick:()=>S("activity"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${o==="activity"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Ds,{className:"size-4 inline mr-2"}),"Permissions"]})]})}),o==="members"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(Os,{className:"size-5 mr-2 text-blue-600"}),"Invite New Team Member"]}),e.jsxs("form",{onSubmit:K,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",value:c.email,onChange:_=>{d(F=>({...F,email:_.target.value,validation_errors:{...F.validation_errors,email:void 0}}))},placeholder:"colleague@company.com",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-colors ${c.validation_errors.email?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-300"}`}),c.validation_errors.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.validation_errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("select",{id:"role",value:c.role,onChange:_=>{d(F=>({...F,role:_.target.value,validation_errors:{...F.validation_errors,role:void 0}}))},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-colors ${c.validation_errors.role?"border-red-300 focus:border-red-500 focus:ring-red-100":"border-gray-300"}`,children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"}),$==="owner"&&e.jsx("option",{value:"owner",children:"Owner"})]}),c.validation_errors.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.validation_errors.role})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:c.is_submitting||L.isPending,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c.is_submitting||L.isPending?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):"Send Invitation"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Team Members (",T.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Xt,{className:"size-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search members...",value:C,onChange:_=>B(_.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-colors"})]}),e.jsxs("select",{value:y||"",onChange:_=>q(_.target.value||null),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-colors",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"owner",children:"Owners"}),e.jsx("option",{value:"admin",children:"Admins"}),e.jsx("option",{value:"member",children:"Members"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:w?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading team members..."})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-blue-800",children:_.user.name.split(" ").map(F=>F[0]).join("").toUpperCase()})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.user.name}),e.jsx("div",{className:"text-sm text-gray-500",children:_.user.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m(_.membership.role)}`,children:_.membership.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[x(_.membership.status),e.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:_.membership.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(_.membership.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("div",{className:"flex items-center justify-end space-x-2",children:_.membership.role!=="owner"&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:_.membership.role,onChange:F=>re(_.membership.id,_.membership.role,F.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p.isPending,children:[e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"}),$==="owner"&&e.jsx("option",{value:"owner",children:"Owner"})]}),e.jsx("button",{onClick:()=>A(_.membership.id,_.user.name),className:"text-red-600 hover:text-red-900 transition-colors",disabled:R.isPending,children:e.jsx(zs,{className:"size-4"})})]})})})]},_.membership.id))})]})})]})]}),o==="invitations"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pending Invitations (",O.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:X?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading invitations..."})]}):O.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Mt,{className:"size-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No pending invitations"})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${m(_.role)}`,children:_.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:_.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(_.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(_.expires_at).toLocaleDateString()})]},_.id))})]})})]}),o==="audit"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Activity Audit Log"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track team member actions and changes for compliance and security"})]}),e.jsx("div",{className:"overflow-x-auto",children:G?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading audit logs..."})]}):Y.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx($t,{className:"size-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No audit logs found"})]}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Y.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(_.created_at).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.user_id||"System"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.action}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[_.entity_type," ",_.entity_id&&`(${_.entity_id})`]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:_.details?JSON.stringify(_.details):"-"})]},_.id))})]})})]}),o==="activity"&&Z()]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Confirm Role Change"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to change this member's role from"," ",e.jsx("span",{className:"font-medium",children:N.current_role})," to"," ",e.jsx("span",{className:"font-medium",children:N.new_role}),"?"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:p.isPending,children:"Cancel"}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:p.isPending,children:p.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):"Confirm Change"})]})]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx(it,{className:"size-16 text-yellow-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You need Admin or Owner permissions to access team management."}),e.jsx(W,{to:`/w/${s}/settings`,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Settings"})]})})})},pn=new ws({defaultOptions:{queries:{staleTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}}}),wt=()=>e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading..."})]}),me=({children:s})=>{const t=M(r=>r.authentication_state.authentication_status.is_authenticated);return M(r=>r.authentication_state.authentication_status.is_loading)?e.jsx(wt,{}):t?e.jsx(e.Fragment,{children:s}):e.jsx(Ke,{to:"/signin",replace:!0})},rt=({children:s})=>{const t=M(n=>n.authentication_state.authentication_status.is_authenticated),a=M(n=>n.authentication_state.authentication_status.is_loading),r=M(n=>n.current_workspace);if(a)return e.jsx(wt,{});if(t){const n=r?`/w/${r.id}`:"/w/default";return e.jsx(Ke,{to:n,replace:!0})}return e.jsx(e.Fragment,{children:s})},xe=({children:s})=>e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Ua,{}),e.jsxs("div",{className:"flex",children:[e.jsx(Dr,{}),e.jsx("main",{className:"flex-1 ml-0 lg:ml-240 pt-16",children:e.jsx("div",{className:"min-h-[calc(100vh-4rem)]",children:s})})]}),e.jsx(fs,{}),e.jsx(Or,{})]}),Te=({children:s})=>e.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[e.jsx("main",{className:"flex-1",children:s}),e.jsx(fs,{})]}),gn=()=>{const s=M(n=>n.authentication_state.authentication_status.is_loading),t=M(n=>n.authentication_state.authentication_status.is_authenticated),a=M(n=>n.current_workspace),r=M(n=>n.initialize_auth);return l.useEffect(()=>{r()},[r]),s?e.jsx(wt,{}):e.jsx(Ns,{client:pn,children:e.jsx(js,{children:e.jsx("div",{className:"App",children:e.jsxs(vs,{children:[e.jsx(ie,{path:"/",element:e.jsx(rt,{children:e.jsx(Te,{children:e.jsx(zr,{})})})}),e.jsx(ie,{path:"/signup",element:e.jsx(rt,{children:e.jsx(Te,{children:e.jsx(Ur,{})})})}),e.jsx(ie,{path:"/signin",element:e.jsx(rt,{children:e.jsx(Te,{children:e.jsx(Ir,{})})})}),e.jsx(ie,{path:"/verify-email",element:e.jsx(Te,{children:e.jsx(Vr,{})})}),e.jsx(ie,{path:"/reset-password",element:e.jsx(Te,{children:e.jsx(Hr,{})})}),e.jsx(ie,{path:"/w/:workspace_id",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Kr,{})})})}),e.jsx(ie,{path:"/w/:workspace_id/channels",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Qr,{})})})}),e.jsx(ie,{path:"/w/:workspace_id/campaigns",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Qt,{})})})}),e.jsx(ie,{path:"/w/:workspace_id/campaigns/:campaign_id",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Qt,{})})})}),e.jsx(ie,{path:"/w/:workspace_id/creatives",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Zr,{})})})}),e.jsx(ie,{path:"/w/:workspace_id/uploads",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Xr,{})})})}),e.jsx(ie,{path:"/w/:workspace_id/upload",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(an,{})})})}),e.jsx(ie,{path:"/w/:workspace_id/upload/mapping",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Jr,{})})})}),e.jsx(ie,{path:"/w/:workspace_id/alerts",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(rn,{})})})}),e.jsx(ie,{path:"/w/:workspace_id/settings",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(nn,{})})})}),e.jsx(ie,{path:"/w/:workspace_id/settings/team",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(hn,{})})})}),e.jsx(ie,{path:"/w/default",element:e.jsx(me,{children:e.jsx(xe,{children:e.jsx(Yr,{})})})}),e.jsx(ie,{path:"*",element:t?e.jsx(Ke,{to:a?`/w/${a.id}`:"/w/default",replace:!0}):e.jsx(Ke,{to:"/",replace:!0})})]})})})})},fn=()=>e.jsx(e.Fragment,{children:e.jsx(gn,{})});Jt(document.getElementById("root")).render(e.jsx(fn,{}));
